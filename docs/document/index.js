"use strict";(()=>{var Oi=Object.create;var Nn=Object.defineProperty;var $i=Object.getOwnPropertyDescriptor;var Li=Object.getOwnPropertyNames;var Mi=Object.getPrototypeOf,Ni=Object.prototype.hasOwnProperty;var Dn=(e,t)=>()=>(e&&(t=e(e=0)),t);var Jt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Di=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Li(t))!Ni.call(e,i)&&i!==n&&Nn(e,i,{get:()=>t[i],enumerable:!(r=$i(t,i))||r.enumerable});return e};var Qt=(e,t,n)=>(n=e!=null?Oi(Mi(e)):{},Di(t||!e||!e.__esModule?Nn(n,"default",{value:e,enumerable:!0}):n,e));function In(e){let t=String(e),n=t.length-1;return D.context.id+(n?String.fromCharCode(96+n):"")+t}function tn(e){D.context=e}function Ii(){return{...D.context,id:D.getNextContextId(),count:0}}function Ve(e,t){let n=I,r=L,i=e.length===0,s=t===void 0?r:t,a=i?Yn:{owned:null,cleanups:null,context:s?s.context:null,owner:s},c=i?e:()=>e(()=>ne(()=>Ae(a)));L=a,I=null;try{return le(c,!0)}finally{I=n,L=r}}function ce(e,t){t=t?Object.assign({},Tt,t):Tt;let n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(p&&p.running&&p.sources.has(n)?i=i(n.tValue):i=i(n.value)),er(n,i));return[Zn.bind(n),r]}function jn(e,t,n){let r=ut(e,t,!0,oe);Ge&&p&&p.running?Y.push(r):$e(r)}function z(e,t,n){let r=ut(e,t,!1,oe);Ge&&p&&p.running?Y.push(r):$e(r)}function ct(e,t,n){qn=qi;let r=ut(e,t,!1,oe),i=at&&Qn(at);i&&(r.suspense=i),(!n||!n.render)&&(r.user=!0),Z?Z.push(r):$e(r)}function j(e,t,n){n=n?Object.assign({},Tt,n):Tt;let r=ut(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ge&&p&&p.running?(r.tState=oe,Y.push(r)):$e(r),Zn.bind(r)}function Hi(e){return e&&typeof e=="object"&&"then"in e}function zn(e,t,n){let r,i,s;typeof t=="function"?(r=e,i=t,s=n||{}):(r=!0,i=e,s=t||{});let a=null,c=Zt,l=null,h=!1,g=!1,d="initialValue"in s,w=typeof r=="function"&&j(r),x=new Set,[b,S]=(s.storage||ce)(s.initialValue),[N,V]=ce(void 0),[H,k]=ce(void 0,{equals:!1}),[T,R]=ce(d?"ready":"unresolved");D.context&&(l=D.getNextContextId(),s.ssrLoadFrom==="initial"?c=s.initialValue:D.load&&D.has(l)&&(c=D.load(l)));function B(O,U,M,se){return a===O&&(a=null,se!==void 0&&(d=!0),(O===c||U===c)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(se,{value:U})),c=Zt,p&&O&&h?(p.promises.delete(O),h=!1,le(()=>{p.running=!0,K(U,M)},!1)):K(U,M)),U}function K(O,U){le(()=>{U===void 0&&S(()=>O),R(U!==void 0?"errored":d?"ready":"unresolved"),V(U);for(let M of x.keys())M.decrement();x.clear()},!1)}function ee(){let O=at&&Qn(at),U=b(),M=N();if(M!==void 0&&!a)throw M;return I&&!I.user&&O&&jn(()=>{H(),a&&(O.resolved&&p&&h?p.promises.add(a):x.has(O)||(O.increment(),x.add(O)))}),U}function ie(O=!0){if(O!==!1&&g)return;g=!1;let U=w?w():r;if(h=p&&p.running,U==null||U===!1){B(a,ne(b));return}p&&a&&p.promises.delete(a);let M=c!==Zt?c:ne(()=>i(U,{value:b(),refetching:O}));return Hi(M)?(a=M,"value"in M?(M.status==="success"?B(a,M.value,void 0,U):B(a,void 0,nn(M.value),U),M):(g=!0,queueMicrotask(()=>g=!1),le(()=>{R(d?"refreshing":"pending"),k()},!1),M.then(se=>B(M,se,void 0,U),se=>B(M,void 0,nn(se),U)))):(B(a,M,void 0,U),M)}return Object.defineProperties(ee,{state:{get:()=>T()},error:{get:()=>N()},loading:{get(){let O=T();return O==="pending"||O==="refreshing"}},latest:{get(){if(!d)return ee();let O=N();if(O&&!a)throw O;return b()}}}),w?jn(()=>ie(!1)):ie(!1),[ee,{refetch:ie,mutate:S}]}function Kn(e,t=Gn,n){let r=new Map,i=ut(s=>{let a=e();for(let[c,l]of r.entries())if(t(c,a)!==t(c,s))for(let h of l.values())h.state=oe,h.pure?Y.push(h):Z.push(h);return a},void 0,!0,oe);return $e(i),s=>{let a=I;if(a){let c;(c=r.get(s))?c.add(a):r.set(s,c=new Set([a])),ke(()=>{c.delete(a),!c.size&&r.delete(s)})}return t(s,p&&p.running&&p.sources.has(i)?i.tValue:i.value)}}function Xn(e){return le(e,!1)}function ne(e){if(!We&&I===null)return e();let t=I;I=null;try{return We?We.untrack(e):e()}finally{I=t}}function on(e){ct(()=>ne(e))}function ke(e){return L===null||(L.cleanups===null?L.cleanups=[e]:L.cleanups.push(e)),e}function Ft(){return I}function Ot(){return L}function Jn(e,t){let n=L,r=I;L=e,I=null;try{return le(t,!0)}catch(i){$t(i)}finally{L=n,I=r}}function Bi(e){if(p&&p.running)return e(),p.done;let t=I,n=L;return Promise.resolve().then(()=>{I=t,L=n;let r;return(Ge||at)&&(r=p||(p={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(i=>r.resolve=i)),r.running=!0),le(e,!1),I=L=null,r?r.done:void 0})}function Qn(e){let t;return L&&L.context&&(t=L.context[e.id])!==void 0?t:e.defaultValue}function Wi(e){let t=j(e),n=j(()=>rn(t()));return n.toArray=()=>{let r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Zn(){let e=p&&p.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===oe)$e(this);else{let t=Y;Y=null,le(()=>Ct(this),!1),Y=t}if(I){let t=this.observers?this.observers.length:0;I.sources?(I.sources.push(this),I.sourceSlots.push(t)):(I.sources=[this],I.sourceSlots=[t]),this.observers?(this.observers.push(I),this.observerSlots.push(I.sources.length-1)):(this.observers=[I],this.observerSlots=[I.sources.length-1])}return e&&p.sources.has(this)?this.tValue:this.value}function er(e,t,n){let r=p&&p.running&&p.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if(p){let i=p.running;(i||!n&&p.sources.has(e))&&(p.sources.add(e),e.tValue=t),i||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&le(()=>{for(let i=0;i<e.observers.length;i+=1){let s=e.observers[i],a=p&&p.running;a&&p.disposed.has(s)||((a?!s.tState:!s.state)&&(s.pure?Y.push(s):Z.push(s),s.observers&&nr(s)),a?s.tState=oe:s.state=oe)}if(Y.length>1e6)throw Y=[],new Error},!1)}return t}function $e(e){if(!e.fn)return;Ae(e);let t=Pt;Bn(e,p&&p.running&&p.sources.has(e)?e.tValue:e.value,t),p&&!p.running&&p.sources.has(e)&&queueMicrotask(()=>{le(()=>{p&&(p.running=!0),I=L=e,Bn(e,e.tValue,t),I=L=null},!1)})}function Bn(e,t,n){let r,i=L,s=I;I=L=e;try{r=e.fn(t)}catch(a){return e.pure&&(p&&p.running?(e.tState=oe,e.tOwned&&e.tOwned.forEach(Ae),e.tOwned=void 0):(e.state=oe,e.owned&&e.owned.forEach(Ae),e.owned=null)),e.updatedAt=n+1,$t(a)}finally{I=s,L=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?er(e,r,!0):p&&p.running&&e.pure?(p.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function ut(e,t,n,r=oe,i){let s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:L,context:L?L.context:null,pure:n};if(p&&p.running&&(s.state=0,s.tState=r),L===null||L!==Yn&&(p&&p.running&&L.pure?L.tOwned?L.tOwned.push(s):L.tOwned=[s]:L.owned?L.owned.push(s):L.owned=[s]),We&&s.fn){let[a,c]=ce(void 0,{equals:!1}),l=We.factory(s.fn,c);ke(()=>l.dispose());let h=()=>Bi(c).then(()=>g.dispose()),g=We.factory(s.fn,h);s.fn=d=>(a(),p&&p.running?g.track(d):l.track(d))}return s}function lt(e){let t=p&&p.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===st)return Ct(e);if(e.suspense&&ne(e.suspense.inFallback))return e.suspense.effects.push(e);let n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Pt);){if(t&&p.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let i=e,s=n[r+1];for(;(i=i.owner)&&i!==s;)if(p.disposed.has(i))return}if((t?e.tState:e.state)===oe)$e(e);else if((t?e.tState:e.state)===st){let i=Y;Y=null,le(()=>Ct(e,n[0]),!1),Y=i}}}function le(e,t){if(Y)return e();let n=!1;t||(Y=[]),Z?n=!0:Z=[],Pt++;try{let r=e();return Vi(n),r}catch(r){n||(Z=null),Y=null,$t(r)}}function Vi(e){if(Y&&(Ge&&p&&p.running?Gi(Y):tr(Y),Y=null),e)return;let t;if(p){if(!p.promises.size&&!p.queue.size){let r=p.sources,i=p.disposed;Z.push.apply(Z,p.effects),t=p.resolve;for(let s of Z)"tState"in s&&(s.state=s.tState),delete s.tState;p=null,le(()=>{for(let s of i)Ae(s);for(let s of r){if(s.value=s.tValue,s.owned)for(let a=0,c=s.owned.length;a<c;a++)Ae(s.owned[a]);s.tOwned&&(s.owned=s.tOwned),delete s.tValue,delete s.tOwned,s.tState=0}Hn(!1)},!1)}else if(p.running){p.running=!1,p.effects.push.apply(p.effects,Z),Z=null,Hn(!0);return}}let n=Z;Z=null,n.length&&le(()=>qn(n),!1),t&&t()}function tr(e){for(let t=0;t<e.length;t++)lt(e[t])}function Gi(e){for(let t=0;t<e.length;t++){let n=e[t],r=p.queue;r.has(n)||(r.add(n),Ge(()=>{r.delete(n),le(()=>{p.running=!0,lt(n)},!1),p&&(p.running=!1)}))}}function qi(e){let t,n=0;for(t=0;t<e.length;t++){let r=e[t];r.user?e[n++]=r:lt(r)}if(D.context){if(D.count){D.effects||(D.effects=[]),D.effects.push(...e.slice(0,n));return}tn()}for(D.effects&&(D.done||!D.count)&&(e=[...D.effects,...e],n+=D.effects.length,delete D.effects),t=0;t<n;t++)lt(e[t])}function Ct(e,t){let n=p&&p.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){let i=e.sources[r];if(i.sources){let s=n?i.tState:i.state;s===oe?i!==t&&(!i.updatedAt||i.updatedAt<Pt)&&lt(i):s===st&&Ct(i,t)}}}function nr(e){let t=p&&p.running;for(let n=0;n<e.observers.length;n+=1){let r=e.observers[n];(t?!r.tState:!r.state)&&(t?r.tState=st:r.state=st,r.pure?Y.push(r):Z.push(r),r.observers&&nr(r))}}function Ae(e){let t;if(e.sources)for(;e.sources.length;){let n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){let s=i.pop(),a=n.observerSlots.pop();r<i.length&&(s.sourceSlots[a]=r,i[r]=s,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Ae(e.tOwned[t]);delete e.tOwned}if(p&&p.running&&e.pure)rr(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ae(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}p&&p.running?e.tState=0:e.state=0}function rr(e,t){if(t||(e.tState=0,p.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)rr(e.owned[n])}function nn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Wn(e,t,n){try{for(let r of t)r(e)}catch(r){$t(r,n&&n.owner||null)}}function $t(e,t=L){let n=Un&&t&&t.context&&t.context[Un],r=nn(e);if(!n)throw r;Z?Z.push({fn(){Wn(r,n,t)},state:oe}):Wn(r,n,t)}function rn(e){if(typeof e=="function"&&!e.length)return rn(e());if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let r=rn(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Vn(e){for(let t=0;t<e.length;t++)e[t]()}function zi(e,t,n={}){let r=[],i=[],s=[],a=0,c=t.length>1?[]:null;return ke(()=>Vn(s)),()=>{let l=e()||[],h=l.length,g,d;return l[Rt],ne(()=>{let x,b,S,N,V,H,k,T,R;if(h===0)a!==0&&(Vn(s),s=[],r=[],i=[],a=0,c&&(c=[])),n.fallback&&(r=[Yi],i[0]=Ve(B=>(s[0]=B,n.fallback())),a=1);else if(a===0){for(i=new Array(h),d=0;d<h;d++)r[d]=l[d],i[d]=Ve(w);a=h}else{for(S=new Array(h),N=new Array(h),c&&(V=new Array(h)),H=0,k=Math.min(a,h);H<k&&r[H]===l[H];H++);for(k=a-1,T=h-1;k>=H&&T>=H&&r[k]===l[T];k--,T--)S[T]=i[k],N[T]=s[k],c&&(V[T]=c[k]);for(x=new Map,b=new Array(T+1),d=T;d>=H;d--)R=l[d],g=x.get(R),b[d]=g===void 0?-1:g,x.set(R,d);for(g=H;g<=k;g++)R=r[g],d=x.get(R),d!==void 0&&d!==-1?(S[d]=i[g],N[d]=s[g],c&&(V[d]=c[g]),d=b[d],x.set(R,d)):s[g]();for(d=H;d<h;d++)d in S?(i[d]=S[d],s[d]=N[d],c&&(c[d]=V[d],c[d](d))):i[d]=Ve(w);i=i.slice(0,a=h),r=l.slice(0)}return i});function w(x){if(s[d]=x,c){let[b,S]=ce(d);return c[d]=S,t(l[d],b)}return t(l[d])}}}function G(e,t){if(Ki&&D.context){let n=D.context;tn(Ii());let r=ne(()=>e(t||{}));return tn(n),r}return ne(()=>e(t||{}))}function Et(){return!0}function en(e){return(e=typeof e=="function"?e():e)?e:{}}function Ji(){for(let e=0,t=this.length;e<t;++e){let n=this[e]();if(n!==void 0)return n}}function sn(...e){let t=!1;for(let a=0;a<e.length;a++){let c=e[a];t=t||!!c&&he in c,e[a]=typeof c=="function"?(t=!0,j(c)):c}if(ji&&t)return new Proxy({get(a){for(let c=e.length-1;c>=0;c--){let l=en(e[c])[a];if(l!==void 0)return l}},has(a){for(let c=e.length-1;c>=0;c--)if(a in en(e[c]))return!0;return!1},keys(){let a=[];for(let c=0;c<e.length;c++)a.push(...Object.keys(en(e[c])));return[...new Set(a)]}},Xi);let n={},r=Object.create(null);for(let a=e.length-1;a>=0;a--){let c=e[a];if(!c)continue;let l=Object.getOwnPropertyNames(c);for(let h=l.length-1;h>=0;h--){let g=l[h];if(g==="__proto__"||g==="constructor")continue;let d=Object.getOwnPropertyDescriptor(c,g);if(!r[g])r[g]=d.get?{enumerable:!0,configurable:!0,get:Ji.bind(n[g]=[d.get.bind(c)])}:d.value!==void 0?d:void 0;else{let w=n[g];w&&(d.get?w.push(d.get.bind(c)):d.value!==void 0&&w.push(()=>d.value))}}}let i={},s=Object.keys(r);for(let a=s.length-1;a>=0;a--){let c=s[a],l=r[c];l&&l.get?Object.defineProperty(i,c,l):i[c]=l?l.value:void 0}return i}function ft(e){let t="fallback"in e&&{fallback:()=>e.fallback};return j(zi(()=>e.each,e.children,t||void 0))}function ve(e){let t=e.keyed,n=j(()=>e.when,void 0,void 0),r=t?n:j(n,void 0,{equals:(i,s)=>!i==!s});return j(()=>{let i=r();if(i){let s=e.children;return typeof s=="function"&&s.length>0?ne(()=>s(t?i:()=>{if(!ne(r))throw ir("Show");return n()})):s}return e.fallback},void 0,void 0)}function an(e){let t=Wi(()=>e.children),n=j(()=>{let r=t(),i=Array.isArray(r)?r:[r],s=()=>{};for(let a=0;a<i.length;a++){let c=a,l=i[a],h=s,g=j(()=>h()?void 0:l.when,void 0,void 0),d=l.keyed?g:j(g,void 0,{equals:(w,x)=>!w==!x});s=()=>h()||(d()?[c,g,l]:void 0)}return s});return j(()=>{let r=n()();if(!r)return e.fallback;let[i,s,a]=r,c=a.children;return typeof c=="function"&&c.length>0?ne(()=>c(a.keyed?s():()=>{if(ne(n)()?.[0]!==i)throw ir("Match");return s()})):c},void 0,void 0)}function dt(e){return e}var D,Ui,Gn,he,ji,Rt,Fs,Tt,Un,qn,oe,st,Yn,Zt,L,p,Ge,We,I,Y,Z,Pt,Os,Hn,at,Yi,Ki,Xi,ir,qe=Dn(()=>{D={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return In(this.context.count)},getNextContextId(){return In(this.context.count++)}};Ui=!1,Gn=(e,t)=>e===t,he=Symbol("solid-proxy"),ji=typeof Proxy=="function",Rt=Symbol("solid-track"),Fs=Symbol("solid-dev-component"),Tt={equals:Gn},Un=null,qn=tr,oe=1,st=2,Yn={owned:null,cleanups:null,context:null,owner:null},Zt={},L=null,p=null,Ge=null,We=null,I=null,Y=null,Z=null,Pt=0;[Os,Hn]=ce(!1);Yi=Symbol("fallback");Ki=!1;Xi={get(e,t,n){return t===he?n:e.get(t)},has(e,t){return t===he?!0:e.has(t)},set:Et,deleteProperty:Et,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Et,deleteProperty:Et}},ownKeys(e){return e.keys()}};ir=e=>`Stale read from <${e}>.`});function ro(e,t){let n=no[e];return typeof n=="object"?n[t]?n.$:void 0:n}function so(e,t,n){let r=n.length,i=t.length,s=r,a=0,c=0,l=t[i-1].nextSibling,h=null;for(;a<i||c<s;){if(t[a]===n[c]){a++,c++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===a){let g=s<r?c?n[c-1].nextSibling:n[s-c]:l;for(;c<s;)e.insertBefore(n[c++],g)}else if(s===c)for(;a<i;)(!h||!h.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[s-1]&&n[c]===t[i-1]){let g=t[--i].nextSibling;e.insertBefore(n[c++],t[a++].nextSibling),e.insertBefore(n[--s],g),t[i]=n[s]}else{if(!h){h=new Map;let d=c;for(;d<s;)h.set(n[d],d++)}let g=h.get(t[a]);if(g!=null)if(c<g&&g<s){let d=a,w=1,x;for(;++d<i&&d<s&&!((x=h.get(t[d]))==null||x!==g+w);)w++;if(w>g-c){let b=t[a];for(;c<g;)e.insertBefore(n[c++],b)}else e.replaceChild(n[c++],t[a++])}else a++;else t[a++].remove()}}}function cn(e,t,n,r={}){let i;return Ve(s=>{i=s,t===document?e():$(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function q(e,t,n,r){let i,s=()=>{let c=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return c.innerHTML=e,n?c.content.firstChild.firstChild:r?c.firstChild:c.content.firstChild},a=t?()=>ne(()=>document.importNode(i||(i=s()),!0)):()=>(i||(i=s())).cloneNode(!0);return a.cloneNode=a,a}function ht(e,t=window.document){let n=t[or]||(t[or]=new Set);for(let r=0,i=e.length;r<i;r++){let s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,ho))}}function pe(e,t,n){Ke(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function ao(e,t,n,r){Ke(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function lo(e,t,n){Ke(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function gt(e,t){Ke(e)||(t==null?e.removeAttribute("class"):e.className=t)}function co(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){let i=n[0];e.addEventListener(t,n[0]=s=>i.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Lt(e,t,n={}){let r=Object.keys(t||{}),i=Object.keys(n),s,a;for(s=0,a=i.length;s<a;s++){let c=i[s];!c||c==="undefined"||t[c]||(sr(e,c,!1),delete n[c])}for(s=0,a=r.length;s<a;s++){let c=r[s],l=!!t[c];!c||c==="undefined"||n[c]===l||!l||(sr(e,c,!0),n[c]=l)}return n}function un(e,t,n){if(!t)return n?pe(e,"style"):t;let r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)i=t[s],i!==n[s]&&(r.setProperty(s,i),n[s]=i);return n}function cr(e,t={},n,r){let i={};return r||z(()=>i.children=ze(e,t.children,i.children)),z(()=>typeof t.ref=="function"&&Le(t.ref,e)),z(()=>uo(e,t,n,!0,i,!0)),i}function Le(e,t,n){return ne(()=>e(t,n))}function $(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return ze(e,t,r,n);z(i=>ze(e,t(),i,n),r)}function uo(e,t,n,r,i={},s=!1){t||(t={});for(let a in i)if(!(a in t)){if(a==="children")continue;i[a]=ar(e,a,null,i[a],n,s,t)}for(let a in t){if(a==="children"){r||ze(e,t.children);continue}let c=t[a];i[a]=ar(e,a,c,i[a],n,s,t)}}function Ke(e){return!!D.context&&!D.done&&(!e||e.isConnected)}function fo(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function sr(e,t,n){let r=t.trim().split(/\s+/);for(let i=0,s=r.length;i<s;i++)e.classList.toggle(r[i],n)}function ar(e,t,n,r,i,s,a){let c,l,h,g,d;if(t==="style")return un(e,n,r);if(t==="classList")return Lt(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){let w=t.slice(3);r&&e.removeEventListener(w,r,typeof r!="function"&&r),n&&e.addEventListener(w,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){let w=t.slice(10);r&&e.removeEventListener(w,r,!0),n&&e.addEventListener(w,n,!0)}else if(t.slice(0,2)==="on"){let w=t.slice(2).toLowerCase(),x=io.has(w);if(!x&&r){let b=Array.isArray(r)?r[0]:r;e.removeEventListener(w,b)}(x||n)&&(co(e,w,n,x),x&&ht([w]))}else if(t.slice(0,5)==="attr:")pe(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")lo(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(h=eo.has(t))||!i&&((g=ro(t,e.tagName))||(l=Zi.has(t)))||(c=e.nodeName.includes("-")||"is"in a)){if(d)t=t.slice(5),l=!0;else if(Ke(e))return n;t==="class"||t==="className"?gt(e,n):c&&!l&&!h?e[fo(t)]=n:e[g||t]=n}else{let w=i&&t.indexOf(":")>-1&&oo[t.split(":")[0]];w?ao(e,w,t,n):pe(e,to[t]||t,n)}return n}function ho(e){if(D.registry&&D.events&&D.events.find(([l,h])=>h===e))return;let t=e.target,n=`$$${e.type}`,r=e.target,i=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),a=()=>{let l=t[n];if(l&&!t.disabled){let h=t[`${n}Data`];if(h!==void 0?l.call(t,h,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},c=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),D.registry&&!D.done&&(D.done=_$HY.done=!0),e.composedPath){let l=e.composedPath();s(l[0]);for(let h=0;h<l.length-2&&(t=l[h],!!a());h++){if(t._$host){t=t._$host,c();break}if(t.parentNode===i)break}}else c();s(r)}function ze(e,t,n,r,i){let s=Ke(e);if(s){!n&&(n=[...e.childNodes]);let l=[];for(let h=0;h<n.length;h++){let g=n[h];g.nodeType===8&&g.data.slice(0,2)==="!$"?g.remove():l.push(g)}n=l}for(;typeof n=="function";)n=n();if(t===n)return n;let a=typeof t,c=r!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,a==="string"||a==="number"){if(s||a==="number"&&(t=t.toString(),t===n))return n;if(c){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=Ye(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||a==="boolean"){if(s)return n;n=Ye(e,n,r)}else{if(a==="function")return z(()=>{let l=t();for(;typeof l=="function";)l=l();n=ze(e,l,n,r)}),()=>n;if(Array.isArray(t)){let l=[],h=n&&Array.isArray(n);if(ln(l,t,n,i))return z(()=>n=ze(e,l,n,r,!0)),()=>n;if(s){if(!l.length)return n;if(r===void 0)return n=[...e.childNodes];let g=l[0];if(g.parentNode!==e)return n;let d=[g];for(;(g=g.nextSibling)!==r;)d.push(g);return n=d}if(l.length===0){if(n=Ye(e,n,r),c)return n}else h?n.length===0?lr(e,l,r):so(e,n,l):(n&&Ye(e),lr(e,l));n=l}else if(t.nodeType){if(s&&t.parentNode)return n=c?[t]:t;if(Array.isArray(n)){if(c)return n=Ye(e,n,r,t);Ye(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ln(e,t,n,r){let i=!1;for(let s=0,a=t.length;s<a;s++){let c=t[s],l=n&&n[e.length],h;if(!(c==null||c===!0||c===!1))if((h=typeof c)=="object"&&c.nodeType)e.push(c);else if(Array.isArray(c))i=ln(e,c,l)||i;else if(h==="function")if(r){for(;typeof c=="function";)c=c();i=ln(e,Array.isArray(c)?c:[c],Array.isArray(l)?l:[l])||i}else e.push(c),i=!0;else{let g=String(c);l&&l.nodeType===3&&l.data===g?e.push(l):e.push(document.createTextNode(g))}}return i}function lr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Ye(e,t,n,r){if(n===void 0)return e.textContent="";let i=r||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){let c=t[a];if(i!==c){let l=c.parentNode===e;!s&&!a?l?e.replaceChild(i,c):e.insertBefore(i,n):l&&c.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}function mo(e,t=!1){return t?document.createElementNS(go,e):document.createElement(e)}function ur(e){let{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,i=Ot(),s,a=!!D.context;return ct(()=>{a&&(Ot().user=a=!1),s||(s=Jn(i,()=>j(()=>e.children)));let c=r();if(c instanceof HTMLHeadElement){let[l,h]=ce(!1),g=()=>h(!0);Ve(d=>$(c,()=>l()?d():s(),null)),ke(g)}else{let l=mo(e.isSVG?"g":"div",e.isSVG),h=t&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),$(h,s),c.appendChild(l),e.ref&&e.ref(l),ke(()=>c.removeChild(l))}},void 0,{render:!a}),n}var Qi,Zi,eo,to,no,io,oo,or,Hs,go,W=Dn(()=>{qe();qe();Qi=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Zi=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Qi]),eo=new Set(["innerHTML","textContent","innerText","children"]),to=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),no=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});io=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),oo={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};or="_$DX_DELEGATE";Hs=Symbol(),go="http://www.w3.org/2000/svg"});var vr=Jt((ca,wr)=>{W();W();W();W();W();W();W();W();W();W();W();W();W();qe();var It=q("<div>"),vo=q("<div class=loading>LOADING"),xo=q("<div><div>"),_o=q('<button class=common-select-button><span class=common-select-text></span><span class=" common-select-icon "><svg viewBox="0 0 1024 1024"version=1.1 xmlns=http://www.w3.org/2000/svg width=1em height=1em><path d="M908.7 363.7L554 751.6c-10.6 12.1-25.9 19-41.9 19-16.1 0-31.3-6.9-41.9-19L115.4 363.7c-17.3-18.3-22.7-44.9-13.7-68.5 8.9-23.5 30.6-40 55.7-42.2h709.1c25.2 2.1 46.9 18.5 55.8 42.1 9 23.7 3.7 50.2-13.6 68.6z m0 0"fill=currentColor>'),So=q('<dialog class=" common-select-popover ">'),Ao=async e=>{let t=document.getElementById("app");(()=>{try{return window.WebAssembly!=null&&window.HTMLCanvasElement!=null&&window.HTMLDialogElement!=null&&typeof HTMLDialogElement.prototype.showModal=="function"&&window.OffscreenCanvas!=null&&navigator.getGamepads!=null}catch{return!1}})()?cn(e,t):open("/nomaintenace.html","self")},ko=()=>window.navigator.userAgent.toLowerCase().includes("mobile"),Eo=e=>t=>{let n,r=clearTimeout,i=setTimeout;return(...s)=>{n=(n&&r(n),i(()=>t(...s),e))}},yr=e=>{let t=!1;return(...n)=>{t=(!t&&e(...n),!0)}},To=e=>(()=>{var t=It();return z(n=>{var r=e.class??"markdown",i=e.body;return r!==n.e&&gt(t,n.e=r),i!==n.t&&(t.innerHTML=n.t=i),n},{e:void 0,t:void 0}),t})(),Co=()=>G(ur,{get children(){return vo()}}),Ro=e=>{let t=new AudioContext({latencyHint:0}),n=2,r=new Uint8Array(0),i=(a,c,l)=>{if(a)if(c+l>a.length){let h=new Float32Array(2*(c+l));return h.set(a,0),h}else return a;else return new Float32Array(l*6)};return new WritableStream({start(a){this.pooled=r,this.srcnode=this.prepareSourceNode(),this.iswait=!1},source(){let a=this.srcnode;return a||(a=this.prepareSourceNode()),this.srcnode=null,a},write(a,c){let l;if(a.byteLength?(l=new Uint8Array(this.pooled.byteLength+a.byteLength),this.pooled.byteLength>0&&l.set(this.pooled,0),l.set(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),this.pooled.byteLength)):l=this.pooled,this.iswait)this.srcnode||(this.srcnode=this.prepareSourceNode()),this.preprocess(l);else{let h;if(this.cursor)l.byteLength>200&&this.preprocess(l),h=t.createBuffer(n,this.cursor,e),h.copyToChannel(this.left,0,0),h.copyToChannel(this.right,1,0),this.left=this.right=this.cursor=void 0;else{let d=l.byteLength>>3;h=t.createBuffer(n,d,e);let w=h.getChannelData(0),x=h.getChannelData(1),b=new Float32Array(l.buffer,0,d*n);for(let S=0;S<d;++S){let N=S<<1;w[S]=b[N],x[S]=b[N+1]}this.pooled=this.pooled.slice(b.byteLength)}let g=this.source();g.buffer=h,g.start(),this.iswait=!0}},preprocess(a){let c=a.byteLength>>3,l=this.cursor??0,h=i(this.left,l,c),g=i(this.right,l,c),d=new Float32Array(a.buffer,0,c*n);for(let w=0;w<c;++w,++l){let x=w<<1;h[l]=d[x],g[l]=d[x+1]}this.cursor=l,this.left=h,this.right=g,this.pooled=a.slice(d.byteLength)},prepareSourceNode(){let a=t.createBufferSource();return a.onended=()=>{this.iswait=!1,(this.pooled.byteLength>0||this.cursor)&&this.write(r,null)},a.connect(t.destination),a}})},Po=e=>new Promise(t=>{e.click(),e.onchange=()=>{let n=e.files[0];t(n)}}),Fo=e=>(()=>{var t=xo(),n=t.firstChild;return z(r=>{var i=e.class,s=`${e.percent.toFixed(3)}%`,a=e.color;return i!==r.e&&gt(t,r.e=i),s!==r.t&&((r.t=s)!=null?n.style.setProperty("width",s):n.style.removeProperty("width")),a!==r.a&&((r.a=a)!=null?n.style.setProperty("background",a):n.style.removeProperty("background")),r},{e:void 0,t:void 0,a:void 0}),t})(),br=e=>{let t=Kn(()=>e.selected);return(()=>{var n=It();return $(n,G(ft,{get each(){return e.options},children:r=>(()=>{var i=It();return i.$$click=()=>!r.disabled&&e.handler(r),$(i,()=>r.label),z(s=>{var a={[e.styled[1]]:!0,[e.styled[2]]:t(r.value)},c=r.label,l=r.disabled;return s.e=Lt(i,a,s.e),c!==s.t&&pe(i,"title",s.t=c),l!==s.a&&(i.disabled=s.a=l),s},{e:void 0,t:void 0,a:void 0}),i})()})),z(()=>gt(n,e.styled[0])),n})()},Oo=e=>{let t=j(()=>e.keyForText??"text"),n=j(()=>e.keyForValue??"value"),r=j(()=>e.placeholder??"---"),i=null,s=null,a=()=>{i?.open&&i.close(),s&&s()},c=d=>{a(),e.onChange&&e.onChange(d)},l=j(()=>{let d=e.options.find(w=>w[n()]===e.value);return d?d[t()]:null}),h=d=>{let w=d.currentTarget;if(i.open)a();else{let x=e.locate?e.locate(w):w.getBoundingClientRect();i.style.top=`${x.bottom+2}px`,i.style.left=`${x.left}px`,i.show(),setTimeout(()=>g(w))}},g=d=>{let w=x=>{!i.contains(x.target)&&!d.contains(x.target)&&a()};s&&s(),s=yr(()=>window.removeEventListener("mousedown",w)),window.addEventListener("mousedown",w)};return[(()=>{var d=_o(),w=d.firstChild;return d.$$click=h,$(w,G(ve,{get when(){return l()},get fallback(){return r()},get children(){return l()}})),z(()=>w.classList.toggle("common-select-empty",l()===null)),d})(),(()=>{var d=So(),w=i;return typeof w=="function"?Le(w,d):i=d,$(d,G(br,{styled:["common-select-list","common-select-item","common-select-value"],get selected(){return e.value},handler:c,get options(){return e.options.map(x=>({label:x[t()],value:x[n()]}))}})),d})()]},pr=e=>{let t=e-e%8;t<e&&(t+=8);let n=new ArrayBuffer(t>>2),r=new Uint8Array(n,0,t>>3),i=new Uint8Array(n,t>>3,t>>3),s=(l,h)=>{let g=l>>3;h[g]|=1<<(l&7)},a=(l,h)=>{let g=l>>3;h[g]&=~(1<<(l&7))},c=(l,h)=>{let g=l>>3;return!!(h[g]&1<<(l&7))};return{lock:(l,h)=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);if(c(l,i))throw new ReferenceError(`indexing ${l} is deleted before your action`);if(c(l,r)){if(h)return!0;throw new TypeError(`indexing ${l} is locking before your action`)}else s(l,r)},islock:l=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);return c(l,r)},unlock:l=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);a(l,r)},delete:l=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);s(l,i)},exist:l=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);return c(l,i)},lookup:()=>{for(let l=0;l<t;++l)if(i[l]!=255&&r[l]!=255)for(let h=0;h<8;++h){let g=1<<h;if(!(i[l]&g)&&!(r[l]&g)){let d=l*8+h;return d<e?d:-1}}return-1}}},$o=e=>{let t=new Array(e).fill(null),n=0,r=0;return{fifo_push:a=>{a!=null&&n+1!=r&&(t[n]=a,n=(n+1)%e)},fifo_pop:()=>{let a=t[r];return a&&(t[r]=null,r=(r+1)%e),a}}},Lo=e=>{let t=j(()=>e.duration??5e3),n=j(()=>e.type=="error"?"common-element-toast-error":"common-element-toast-info"),r=j(()=>20+e.order*100);return(()=>{var i=It();return $(i,()=>e.text),z(s=>{var a={"common-element-toast":!0,[n()]:!0},c=`bottom: ${r()}px; --aniduration: ${t()}ms;`;return s.e=Lt(i,a,s.e),s.t=un(i,c,s.t),s},{e:void 0,t:void 0}),i})()},bt=null,Mo=e=>{let r,i,s;if(typeof e=="string"?r=e:typeof e=="object"?(r=String(e.text),i=e.type,s=e.duration):r=String(e),!bt){let a=document.createElement("div");a.id="toast",a.className="common-layout-toast",document.body.appendChild(a);let c=pr(5),{fifo_push:l,fifo_pop:h}=$o(40),g=w=>{l(w),d()},d=()=>{let w=c.lookup();if(w<0)return;let x=h();if(!x)return;c.lock(w);let b=document.createElement("div");bt.container.appendChild(b);let{text:S,Target:N,type:V,duration:H}=x;setTimeout(()=>{c.unlock(w),bt.container.removeChild(b),requestAnimationFrame(d)},H??5e3),cn(()=>G(N,{order:w,text:S,type:V,duration:H}),b)};bt={container:a,exchanger:pr(5),schedule:g}}bt.schedule({Target:Lo,type:i,duration:s,text:r})};wr.exports={main:Ao,Loading:Co,Markdown:To,Progress:Fo,debounce:Eo,onlyonce:yr,selectFile:Po,Hex:e=>e.toString(16).padStart(8,"0"),Menu:br,Select:Oo,toast:Mo,DUMMY_HREF:"#!",isMobileDev:ko(),streamToAudio:Ro};ht(["click"])});var xr=Jt((Ut,hn)=>{var dn=function(){var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(t){t=t||{};var n=typeof t<"u"?t:{},r,i;n.ready=new Promise(function(o,u){r=o,i=u});var s={},a;for(a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);var c=[],l="./this.program",h=function(o,u){throw u},g=!0,d=!1,w=!1,x=!1,b="";function S(o){return n.locateFile?n.locateFile(o,b):b+o}var N,V,H,k;(g||d)&&(d?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),e&&(b=e),b.indexOf("blob:")!==0?b=b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):b="",N=function(o){var u=new XMLHttpRequest;return u.open("GET",o,!1),u.send(null),u.responseText},d&&(H=function(o){var u=new XMLHttpRequest;return u.open("GET",o,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}),V=function(o,u,f){var m=new XMLHttpRequest;m.open("GET",o,!0),m.responseType="arraybuffer",m.onload=function(){if(m.status==200||m.status==0&&m.response){u(m.response);return}f()},m.onerror=f,m.send(null)},k=function(o){document.title=o});var T=n.print||console.log.bind(console),R=n.printErr||console.warn.bind(console);for(a in s)s.hasOwnProperty(a)&&(n[a]=s[a]);s=null,n.arguments&&(c=n.arguments),n.thisProgram&&(l=n.thisProgram),n.quit&&(h=n.quit);var B=16;function K(){return 4}function ee(o){switch(o){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(o[o.length-1]==="*")return K();if(o[0]==="i"){var u=Number(o.substr(1));return Qe(u%8===0,"getNativeTypeSize invalid bits "+u+", type "+o),u/8}else return 0}}}function ie(o){ie.shown||(ie.shown={}),ie.shown[o]||(ie.shown[o]=1,R(o))}function O(o,u){if(typeof WebAssembly.Function=="function"){for(var f={i:"i32",j:"i64",f:"f32",d:"f64"},m={parameters:[],results:u[0]=="v"?[]:[f[u[0]]]},_=1;_<u.length;++_)m.parameters.push(f[u[_]]);return new WebAssembly.Function(m,o)}var A=[1,0,1,96],E=u.slice(0,1),C=u.slice(1),X={i:127,j:126,f:125,d:124};A.push(C.length);for(var _=0;_<C.length;++_)A.push(X[C[_]]);E=="v"?A.push(0):A=A.concat([1,X[E]]),A[1]=A.length-2;var be=new Uint8Array([0,97,115,109,1,0,0,0].concat(A,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),we=new WebAssembly.Module(be),kt=new WebAssembly.Instance(we,{e:{f:o}}),ot=kt.exports.f;return ot}var U=[],M;function se(){if(U.length)return U.pop();try{Ue.grow(1)}catch(o){throw o instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":o}return Ue.length-1}function fe(o,u){for(var f=o;f<o+u;f++){var m=St(f);m&&M.set(m,f)}}function y(o,u){if(M||(M=new WeakMap,fe(0,Ue.length)),M.has(o))return M.get(o);var f=se();try{Rn(f,o)}catch(_){if(!(_ instanceof TypeError))throw _;var m=O(o,u);Rn(f,m)}return M.set(o,f),f}function v(o){M.delete(St(o)),U.push(o)}var P=0,F=function(o){P=o},Q=function(){return P},te;n.wasmBinary&&(te=n.wasmBinary);var Ce=n.noExitRuntime||!1;typeof WebAssembly!="object"&&je("no native wasm support detected");function mn(o,u,f,m){switch(f=f||"i8",f.charAt(f.length-1)==="*"&&(f="i32"),f){case"i1":ue[o>>0]=u;break;case"i8":ue[o>>0]=u;break;case"i16":Ie[o>>1]=u;break;case"i32":J[o>>2]=u;break;case"i64":Gt=[u>>>0,(He=u,+Math.abs(He)>=1?He>0?(Math.min(+Math.floor(He/4294967296),4294967295)|0)>>>0:~~+Math.ceil((He-+(~~He>>>0))/4294967296)>>>0:0)],J[o>>2]=Gt[0],J[o+4>>2]=Gt[1];break;case"float":Bt[o>>2]=u;break;case"double":Wt[o>>3]=u;break;default:je("invalid type for setValue: "+f)}}function pn(o,u,f){switch(u=u||"i8",u.charAt(u.length-1)==="*"&&(u="i32"),u){case"i1":return ue[o>>0];case"i8":return ue[o>>0];case"i16":return Ie[o>>1];case"i32":return J[o>>2];case"i64":return J[o>>2];case"float":return Bt[o>>2];case"double":return Number(Wt[o>>3]);default:je("invalid type for getValue: "+u)}return null}var Je,Re=!1,Pe;function Qe(o,u){o||je("Assertion failed: "+u)}function wt(o){var u=n["_"+o];return Qe(u,"Cannot call unknown function "+o+", make sure it is exported"),u}function Me(o,u,f,m,_){var A={string:function(ae){var Be=0;if(ae!=null&&ae!==0){var Mn=(ae.length<<2)+1;Be=it(Mn),De(ae,Be,Mn)}return Be},array:function(ae){var Be=it(ae.length);return Lr(ae,Be),Be}};function E(ae){return u==="string"?_e(ae):u==="boolean"?!!ae:ae}var C=wt(o),X=[],be=0;if(m)for(var we=0;we<m.length;we++){var kt=A[f[we]];kt?(be===0&&(be=zt()),X[we]=kt(m[we])):X[we]=m[we]}var ot=C.apply(null,X);function Fi(ae){return be!==0&&Kt(be),E(ae)}return ot=Fi(ot),ot}function jt(o,u,f,m){f=f||[];var _=f.every(function(E){return E==="number"}),A=u!=="string";return A&&_&&!m?wt(o):function(){return Me(o,u,f,arguments,m)}}var Ht=0,vt=1;function Ze(o,u){var f;return u==vt?f=it(o.length):f=Yt(o.length),o.subarray||o.slice?Se.set(o,f):Se.set(new Uint8Array(o),f),f}var Ne=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function xt(o,u,f){for(var m=u+f,_=u;o[_]&&!(_>=m);)++_;if(_-u>16&&o.subarray&&Ne)return Ne.decode(o.subarray(u,_));for(var A="";u<_;){var E=o[u++];if(!(E&128)){A+=String.fromCharCode(E);continue}var C=o[u++]&63;if((E&224)==192){A+=String.fromCharCode((E&31)<<6|C);continue}var X=o[u++]&63;if((E&240)==224?E=(E&15)<<12|C<<6|X:E=(E&7)<<18|C<<12|X<<6|o[u++]&63,E<65536)A+=String.fromCharCode(E);else{var be=E-65536;A+=String.fromCharCode(55296|be>>10,56320|be&1023)}}return A}function _e(o,u){return o?xt(Se,o,u):""}function ye(o,u,f,m){if(!(m>0))return 0;for(var _=f,A=f+m-1,E=0;E<o.length;++E){var C=o.charCodeAt(E);if(C>=55296&&C<=57343){var X=o.charCodeAt(++E);C=65536+((C&1023)<<10)|X&1023}if(C<=127){if(f>=A)break;u[f++]=C}else if(C<=2047){if(f+1>=A)break;u[f++]=192|C>>6,u[f++]=128|C&63}else if(C<=65535){if(f+2>=A)break;u[f++]=224|C>>12,u[f++]=128|C>>6&63,u[f++]=128|C&63}else{if(f+3>=A)break;u[f++]=240|C>>18,u[f++]=128|C>>12&63,u[f++]=128|C>>6&63,u[f++]=128|C&63}}return u[f]=0,f-_}function De(o,u,f){return ye(o,Se,u,f)}function _t(o){for(var u=0,f=0;f<o.length;++f){var m=o.charCodeAt(f);m>=55296&&m<=57343&&(m=65536+((m&1023)<<10)|o.charCodeAt(++f)&1023),m<=127?++u:m<=2047?u+=2:m<=65535?u+=3:u+=4}return u}function rs(o){for(var u="";;){var f=Se[o++>>0];if(!f)return u;u+=String.fromCharCode(f)}}function is(o,u){return bn(o,u,!1)}var yn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function os(o,u){for(var f=o,m=f>>1,_=m+u/2;!(m>=_)&&wn[m];)++m;if(f=m<<1,f-o>32&&yn)return yn.decode(Se.subarray(o,f));for(var A="",E=0;!(E>=u/2);++E){var C=Ie[o+E*2>>1];if(C==0)break;A+=String.fromCharCode(C)}return A}function ss(o,u,f){if(f===void 0&&(f=2147483647),f<2)return 0;f-=2;for(var m=u,_=f<o.length*2?f/2:o.length,A=0;A<_;++A){var E=o.charCodeAt(A);Ie[u>>1]=E,u+=2}return Ie[u>>1]=0,u-m}function as(o){return o.length*2}function ls(o,u){for(var f=0,m="";!(f>=u/4);){var _=J[o+f*4>>2];if(_==0)break;if(++f,_>=65536){var A=_-65536;m+=String.fromCharCode(55296|A>>10,56320|A&1023)}else m+=String.fromCharCode(_)}return m}function cs(o,u,f){if(f===void 0&&(f=2147483647),f<4)return 0;for(var m=u,_=m+f-4,A=0;A<o.length;++A){var E=o.charCodeAt(A);if(E>=55296&&E<=57343){var C=o.charCodeAt(++A);E=65536+((E&1023)<<10)|C&1023}if(J[u>>2]=E,u+=4,u+4>_)break}return J[u>>2]=0,u-m}function us(o){for(var u=0,f=0;f<o.length;++f){var m=o.charCodeAt(f);m>=55296&&m<=57343&&++f,u+=4}return u}function fs(o){var u=_t(o)+1,f=Yt(u);return f&&ye(o,ue,f,u),f}function ds(o){var u=_t(o)+1,f=it(u);return ye(o,ue,f,u),f}function hs(o,u,f){ie("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var m,_;f&&(_=u+_t(o),m=ue[_]),De(o,u,1/0),f&&(ue[_]=m)}function Lr(o,u){ue.set(o,u)}function bn(o,u,f){for(var m=0;m<o.length;++m)ue[u++>>0]=o.charCodeAt(m);f||(ue[u>>0]=0)}function gs(o,u){return o%u>0&&(o+=u-o%u),o}var ms,Mr,ue,Se,Ie,wn,J,Nr,Bt,Wt;function vn(o){Mr=o,n.HEAP8=ue=new Int8Array(o),n.HEAP16=Ie=new Int16Array(o),n.HEAP32=J=new Int32Array(o),n.HEAPU8=Se=new Uint8Array(o),n.HEAPU16=wn=new Uint16Array(o),n.HEAPU32=Nr=new Uint32Array(o),n.HEAPF32=Bt=new Float32Array(o),n.HEAPF64=Wt=new Float64Array(o)}var ps=5242880,ys=n.INITIAL_MEMORY||16777216,Ue,xn=[],_n=[],Sn=[],An=[],kn=[],Dr=!1,Ir=!1,Ur=0;function En(){return Ce||Ur>0}function jr(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gr(n.preRun.shift());tt(xn)}function Hr(){Dr=!0,tt(_n)}function Br(){tt(Sn)}function Wr(){tt(An),ci(),Ir=!0}function Vr(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)qr(n.postRun.shift());tt(kn)}function Gr(o){xn.unshift(o)}function bs(o){_n.unshift(o)}function ws(o){Sn.unshift(o)}function vs(o){An.unshift(o)}function qr(o){kn.unshift(o)}var Fe=0,Vt=null,et=null;function xs(o){return o}function Yr(o){Fe++,n.monitorRunDependencies&&n.monitorRunDependencies(Fe)}function zr(o){if(Fe--,n.monitorRunDependencies&&n.monitorRunDependencies(Fe),Fe==0&&(Vt!==null&&(clearInterval(Vt),Vt=null),et)){var u=et;et=null,u()}}n.preloadedImages={},n.preloadedAudios={};function je(o){n.onAbort&&n.onAbort(o),o="Aborted("+o+")",R(o),Re=!0,Pe=1,o+=". Build with -s ASSERTIONS=1 for more info.";var u=new WebAssembly.RuntimeError(o);throw i(u),u}var Kr="data:application/octet-stream;base64,";function Tn(o){return o.startsWith(Kr)}function _s(o){return o.startsWith("file://")}var de;de="nba.wasm",Tn(de)||(de=S(de));function Cn(o){try{if(o==de&&te)return new Uint8Array(te);if(H)return H(o);throw"both async and sync fetching of the wasm failed"}catch(u){je(u)}}function Xr(){return!te&&(g||d)&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(o){if(!o.ok)throw"failed to load wasm binary file at '"+de+"'";return o.arrayBuffer()}).catch(function(){return Cn(de)}):Promise.resolve().then(function(){return Cn(de)})}function Jr(){var o={env:Fn,wasi_snapshot_preview1:Fn};function u(E,C){var X=E.exports;n.asm=X,Je=n.asm.memory,vn(Je.buffer),Ue=n.asm.__indirect_function_table,zr("wasm-instantiate")}Yr("wasm-instantiate");function f(E){u(E.instance)}function m(E){return Xr().then(function(C){return WebAssembly.instantiate(C,o)}).then(function(C){return C}).then(E,function(C){R("failed to asynchronously prepare wasm: "+C),je(C)})}function _(){return!te&&typeof WebAssembly.instantiateStreaming=="function"&&!Tn(de)&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(E){var C=WebAssembly.instantiateStreaming(E,o);return C.then(f,function(X){return R("wasm streaming compile failed: "+X),R("falling back to ArrayBuffer instantiation"),m(f)})}):m(f)}if(n.instantiateWasm)try{var A=n.instantiateWasm(o,u);return A}catch(E){return R("Module.instantiateWasm callback failed with error: "+E),!1}return _().catch(i),{}}var He,Gt,Ss={};function tt(o){for(;o.length>0;){var u=o.shift();if(typeof u=="function"){u(n);continue}var f=u.func;typeof f=="number"?u.arg===void 0?St(f)():St(f)(u.arg):f(u.arg===void 0?null:u.arg)}}function As(o){var u=zt(),f=o();return Kt(u),f}function ks(o){return o}function Qr(o){var u=/\b_Z[\w\d_]+/g;return o.replace(u,function(f){var m=f;return f===m?f:m+" ["+f+"]"})}var nt=[];function St(o){var u=nt[o];return u||(o>=nt.length&&(nt.length=o+1),nt[o]=u=Ue.get(o)),u}function Zr(o){if(o instanceof On||o=="unwind")return Pe;h(1,o)}function ei(){var o=new Error;if(!o.stack){try{throw new Error}catch(u){o=u}if(!o.stack)return"(no stack trace available)"}return o.stack.toString()}function Rn(o,u){Ue.set(o,u),nt[o]=u}function Es(){var o=ei();return n.extraStackTrace&&(o+=`
`+n.extraStackTrace()),Qr(o)}var Oe={mappings:{},buffers:[null,[],[]],printChar:function(o,u){var f=Oe.buffers[o];u===0||u===10?((o===1?T:R)(xt(f,0)),f.length=0):f.push(u)},varargs:void 0,get:function(){Oe.varargs+=4;var o=J[Oe.varargs-4>>2];return o},getStr:function(o){var u=_e(o);return u},get64:function(o,u){return o}};function ti(o,u){}var Pn;Pn=function(){return performance.now()};var ni=!0;function ri(o){return o==0||o==1||o==2||o==3}function ii(o,u,f,m){if(!ri(o))return 28;var _;if(o===0)_=Date.now();else if(ni)_=Pn();else return 52;var A=Math.round(_*1e3*1e3);return J[m>>2]=A>>>0,J[m+4>>2]=A/Math.pow(2,32)>>>0,0}function oi(o){vn(Je.buffer)}var qt={};function si(){return l||"./this.program"}function rt(){if(!rt.strings){var o=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",u={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:o,_:si()};for(var f in qt)qt[f]===void 0?delete u[f]:u[f]=qt[f];var m=[];for(var f in u)m.push(f+"="+u[f]);rt.strings=m}return rt.strings}function ai(o,u){var f=0;return rt().forEach(function(m,_){var A=u+f;J[o+_*4>>2]=A,bn(m,A),f+=m.length+1}),0}function li(o,u){var f=rt();J[o>>2]=f.length;var m=0;return f.forEach(function(_){m+=_.length+1}),J[u>>2]=m,0}function ci(){typeof _fflush<"u"&&_fflush(0);var o=Oe.buffers;o[1].length&&Oe.printChar(1,10),o[2].length&&Oe.printChar(2,10)}function ui(o,u,f,m){for(var _=0,A=0;A<f;A++){var E=J[u>>2],C=J[u+4>>2];u+=8;for(var X=0;X<C;X++)Oe.printChar(o,Se[E+X]);_+=C}return J[m>>2]=_,0}function fi(o){$n(o)}var di=!1;function Ts(o,u,f){var m=f>0?f:_t(o)+1,_=new Array(m),A=ye(o,_,0,_.length);return u&&(_.length=A),_}function Cs(o){for(var u=[],f=0;f<o.length;f++){var m=o[f];m>255&&(di&&Qe(!1,"Character code "+m+" ("+String.fromCharCode(m)+")  at offset "+f+" not in 0x00-0xFF."),m&=255),u.push(String.fromCharCode(m))}return u.join("")}var Fn={__syscall_stat64:ti,clock_time_get:ii,emscripten_notify_memory_growth:oi,environ_get:ai,environ_sizes_get:li,fd_write:ui,proc_exit:fi},Rs=Jr(),hi=n._getRom=function(){return(hi=n._getRom=n.asm.getRom).apply(null,arguments)},Yt=n._malloc=function(){return(Yt=n._malloc=n.asm.malloc).apply(null,arguments)},gi=n._getIRam=function(){return(gi=n._getIRam=n.asm.getIRam).apply(null,arguments)},mi=n._getWRam=function(){return(mi=n._getWRam=n.asm.getWRam).apply(null,arguments)},pi=n._cyclePerFrame=function(){return(pi=n._cyclePerFrame=n.asm.cyclePerFrame).apply(null,arguments)},yi=n._getOutput=function(){return(yi=n._getOutput=n.asm.getOutput).apply(null,arguments)},bi=n._run=function(){return(bi=n._run=n.asm.run).apply(null,arguments)},wi=n._go=function(){return(wi=n._go=n.asm.go).apply(null,arguments)},vi=n._replay=function(){return(vi=n._replay=n.asm.replay).apply(null,arguments)},xi=n._main=function(){return(xi=n._main=n.asm.main).apply(null,arguments)},_i=n.__start=function(){return(_i=n.__start=n.asm._start).apply(null,arguments)},Si=n.___errno_location=function(){return(Si=n.___errno_location=n.asm.__errno_location).apply(null,arguments)},Ai=n.__get_tzname=function(){return(Ai=n.__get_tzname=n.asm._get_tzname).apply(null,arguments)},ki=n.__get_daylight=function(){return(ki=n.__get_daylight=n.asm._get_daylight).apply(null,arguments)},Ei=n.__get_timezone=function(){return(Ei=n.__get_timezone=n.asm._get_timezone).apply(null,arguments)},zt=n.stackSave=function(){return(zt=n.stackSave=n.asm.stackSave).apply(null,arguments)},Kt=n.stackRestore=function(){return(Kt=n.stackRestore=n.asm.stackRestore).apply(null,arguments)},it=n.stackAlloc=function(){return(it=n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)},At;function On(o){this.name="ExitStatus",this.message="Program terminated with exit("+o+")",this.status=o}var Ti=!1,Ci=void 0;et=function o(){At||Xt(),At||(et=o)};function Ri(o){var u=n.__start;Ci=[l].concat(o);try{u();var f=0;return Pi(f,!0),f}catch(m){return Zr(m)}finally{Ti=!0}}function Xt(o){if(o=o||c,Fe>0||(jr(),Fe>0))return;function u(){At||(At=!0,n.calledRun=!0,!Re&&(Hr(),Br(),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),Ln&&Ri(o),Vr()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),u()},1)):u()}n.run=Xt;function Pi(o,u){Pe=o,En()||Wr(),$n(o)}function $n(o){Pe=o,En()||(n.onExit&&n.onExit(o),Re=!0),h(o,new On(o))}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();var Ln=!0;return n.noInitialRun&&(Ln=!1),Xt(),t.ready}}();typeof Ut=="object"&&typeof hn=="object"?hn.exports=dn:typeof define=="function"&&define.amd?define([],function(){return dn}):typeof Ut=="object"&&(Ut.createNanoBA=dn)});var Tr=Jt((ua,Er)=>{var _r=Qt(xr()),Sr=()=>{let e=null,t=new WritableStream({start(n){this.buffer=new Uint8Array(1024),this.pos=0},write(n,r){if(this.buffer.byteLength-this.pos<n.byteLength){let s=this.buffer;this.buffer=new Uint8Array(Math.max(s.byteLength*2,n.byteLength*2)),this.buffer.set(s,0)}this.buffer.set(n,this.pos),this.pos+=n.byteLength},close(){e=this.buffer=this.buffer.slice(0,this.pos)}});return Object.defineProperty(t,"bytes",{get:()=>e}),t},No=async e=>{let t=await fetch(e),n=Sr();return await t.body.pipeThrough(new DecompressionStream("gzip")).pipeTo(n),n.bytes},Ee=async()=>{if(Ee[Symbol.for("vm")])return Ee[Symbol.for("vm")];if(Ee[Symbol.for("pending")])return Ee[Symbol.for("pending")];let e,t,n=async()=>{try{let i=await(await fetch("/r/nba.js")).text(),s=await No("https://oafcdn.anod.cc/nba.hex"),a={};await(()=>new Promise(b=>{a.wasmBinary=s.buffer,a.onRuntimeInitialized=b,(0,_r.default)(a)}))();let[c,l,h,g]=[a._getIRam(),a._getWRam(),a._cyclePerFrame(),a._getOutput()],d=0,w=0,x=!1;Ee[Symbol.for("vm")]={setRom(b){w=b.byteLength,d=a._getRom(w),a.HEAPU8.set(new Uint8Array(b),d)},go(b,S){x?a._run(Math.round(b*h),S??0):(x=!0,a._go(b,S??0))},output(b){let S=g>>2;return S?a.HEAPU32[S+b]:0},raw(){return a.HEAPU8.buffer},replay(){return a._replay()},u8At(b){return 33554432<=b&&b<=33816575?a.HEAPU8[b-33554432+l]:50331648<=b&&b<=50364415?a.HEAPU8[b-50331648+c]:134217728<=b&&b<134217728+w?a.HEAPU8[b-134217728+d]:null},u32At(b){let S=N=>N>>2;return 33554432<=b&&b<=33816575?a.HEAPU32[S(b-33554432+l)]:50331648<=b&&b<=50364415?a.HEAPU32[S(b-50331648+c)]:134217728<=b&&b<134217728+w?a.HEAPU32[S(b-134217728+d)]:null}},e(Ee[Symbol.for("vm")])}catch(r){console.error("load nano boy adv error",r.stack),t(r)}};return Ee[Symbol.for("pending")]=new Promise((r,i)=>{e=r,t=i,n()})},Ar=(e,t)=>t?{type:e,payloads:t}:{type:e},Do=(e,...t)=>Ar(kr.NANOBOY_RPC,[e,t]),kr={NANOBOY_READY:0,NANOBOY_RPC:1};Er.exports={loadNanoBA:Ee,makeMessage:Ar,makeRPC:Do,MessageType:kr,streamToMemory:Sr}});W();W();W();W();W();W();W();W();W();qe();qe();var fn=Symbol("store-raw"),Xe=Symbol("store-node"),xe=Symbol("store-has"),fr=Symbol("store-self");function dr(e){let t=e[he];if(!t&&(Object.defineProperty(e,he,{value:t=new Proxy(e,bo)}),!Array.isArray(e))){let n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=n.length;i<s;i++){let a=n[i];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function Mt(e){let t;return e!=null&&typeof e=="object"&&(e[he]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function pt(e,t=new Set){let n,r,i,s;if(n=e!=null&&e[fn])return n;if(!Mt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,c=e.length;a<c;a++)i=e[a],(r=pt(i,t))!==i&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);let a=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let l=0,h=a.length;l<h;l++)s=a[l],!c[s].get&&(i=e[s],(r=pt(i,t))!==i&&(e[s]=r))}return e}function Nt(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function yt(e,t,n){if(e[t])return e[t];let[r,i]=ce(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function po(e,t){let n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===he||t===Xe||(delete n.value,delete n.writable,n.get=()=>e[he][t]),n}function hr(e){Ft()&&yt(Nt(e,Xe),fr)()}function yo(e){return hr(e),Reflect.ownKeys(e)}var bo={get(e,t,n){if(t===fn)return e;if(t===he)return n;if(t===Rt)return hr(e),n;let r=Nt(e,Xe),i=r[t],s=i?i():e[t];if(t===Xe||t===xe||t==="__proto__")return s;if(!i){let a=Object.getOwnPropertyDescriptor(e,t);Ft()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=yt(r,t,s)())}return Mt(s)?dr(s):s},has(e,t){return t===fn||t===he||t===Rt||t===Xe||t===xe||t==="__proto__"?!0:(Ft()&&yt(Nt(e,xe),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:yo,getOwnPropertyDescriptor:po};function Dt(e,t,n,r=!1){if(!r&&e[t]===n)return;let i=e[t],s=e.length;n===void 0?(delete e[t],e[xe]&&e[xe][t]&&i!==void 0&&e[xe][t].$()):(e[t]=n,e[xe]&&e[xe][t]&&i===void 0&&e[xe][t].$());let a=Nt(e,Xe),c;if((c=yt(a,t,i))&&c.$(()=>n),Array.isArray(e)&&e.length!==s){for(let l=e.length;l<s;l++)(c=a[l])&&c.$();(c=yt(a,"length",s))&&c.$(e.length)}(c=a[fr])&&c.$()}function gr(e,t){let n=Object.keys(t);for(let r=0;r<n.length;r+=1){let i=n[r];Dt(e,i,t[i])}}function wo(e,t){if(typeof t=="function"&&(t=t(e)),t=pt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){let i=t[n];e[n]!==i&&Dt(e,n,i)}Dt(e,"length",r)}else gr(e,t)}function mt(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();let a=typeof r,c=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)mt(e,[r[l]].concat(t),n);return}else if(c&&a==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&mt(e,[l].concat(t),n);return}else if(c&&a==="object"){let{from:l=0,to:h=e.length-1,by:g=1}=r;for(let d=l;d<=h;d+=g)mt(e,[d].concat(t),n);return}else if(t.length>1){mt(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(i,n),s===i)||r===void 0&&s==null||(s=pt(s),r===void 0||Mt(i)&&Mt(s)&&!Array.isArray(s)?gr(i,s):Dt(e,r,s))}function mr(...[e,t]){let n=pt(e||{}),r=Array.isArray(n),i=dr(n);function s(...a){Xn(()=>{r&&a.length===1?wo(n,a[0]):mt(n,a)})}return[i,s]}var Gs=Symbol("store-root");var re=Qt(vr()),Te=Qt(Tr());var Pr=q("<span class=keyin><input>"),Cr=q("<div class=error>"),Io=q("<h4>"),Uo=q("<canvas>"),jo=q("<div class=state>"),Ho=q("<div class=lines><button class=opt></button><button class=opt>"),Rr=q("<span>"),Bo=q("<span>Kb"),Wo=q('<button><svg viewBox="0 0 1024 1024"version=1.1 xmlns=http://www.w3.org/2000/svg width=1em height=1em><path d="M768 576c0 141.248-114.752 256-256 256s-256-114.752-256-256 114.752-256 256-256l128 0 0.736 128.64L833.12 256l-192.384-192 0 128L512 192C300 192 128 364 128 576s172 384 384 384 384-172 384-384L768 576z"fill=currentColor>'),Vo=q('<button type=submit><svg viewBox="0 0 1024 1024"version=1.1 xmlns=http://www.w3.org/2000/svg width=1em height=1em><path d="M47.234 979.775v-210.45h102.303v70.151h724.874v-70.15h102.3v210.45H47.233zM149.54 359.948l242.595 0.175V44.451h242.6v309.827h242.6L517.821 734.253 149.539 359.948z"fill=currentColor>'),Go=q('<div class=" type ">'),qo=q('<div class=" thanks ">Powered by <a href=https://github.com/nba-emu/NanoBoyAdvance rel="noopener noreferer">NanoBoyAdvance'),Yo=q('<dialog class=input-setting><div class=" incfg "><h3></h3><div class=" keymap "><div class=" row head "><span><strong></strong></span><span><strong></strong></span></div></div><div class=" option "><div class=" pads "><span>&nbsp;</span></div><div class=" exit "><button type=button></button><button type=button>'),gn=q("<span disabled>"),zo=q('<div class=" row "><span>'),Ko=[1370423076,564304489,176325693,2903106692,2559255569,562004416,431903395,550373779,1246381584,3962644472,870893400,3218006914,2497705093,3238611918,3230291604,4238832147,1934460063,1637534371,665032536,1989673980,1640439075,1454244867,8665279,4245595968,66999039,4046493039,2244017047,629200480,62809001,3795340801,4281639673,1141063355,3415212152,2486833544,1669120101,2940006535,2346984918,1923877432,133747745],Fr=`
attribute vec2 texcoord;
varying vec2 uv;

void main()
{
	vec2 norm = texcoord - vec2(0.5, 0.5);
	gl_Position = vec4(2.0*norm.x, -2.0*norm.y, 1.0, 1.0);
	uv = texcoord;
}
`,Or=`
precision mediump float;
uniform sampler2D gbapic;
varying vec2 uv;

void main()
{
	gl_FragColor = texture2D(gbapic, uv);
}
`,$r=Float32Array.from([0,1,0,0,1,1,1,0]),ge={UP:1,DOWN:2,LEFT:4,RIGHT:8,START:16,SELECT:32,A:64,B:128,L:256,R:512,NONE:63},me={Button:0,Stick:1,"D-Pad":2},Xo=["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","ENTER","SPACE","KEYA","KEYB","KEYL","KEYR"];var Jo=[window.ArrayBuffer,window.MessagePort,window.ReadableStream,window.WritableStream,window.TransformStream,window.ImageBitmap,window.AudioData,window.VideoFrame,window.OffscreenCanvas,window.RTCDataChannel].filter(e=>!!e),Qo=async()=>{let e=document.createElement("input");e.type="file";let t=await(0,re.selectFile)(e);if(t){let n=await t.arrayBuffer(),r=new Uint32Array(n,4,39);if(Ko.every((i,s)=>i===r[s]))return[n,t.name];throw new TypeError("invalid_rom")}else throw new ReferenceError("no_selected_file")},Zo=e=>{let t=null,n={},r=()=>{let k=e.pads(),T=0;if(k){let R=[ge.UP,ge.DOWN,ge.LEFT,ge.RIGHT,ge.START,ge.SELECT,ge.A,ge.B,ge.L,ge.R],B=e.gpin,K=me.Button,ee=me.Stick,ie=me["D-Pad"];for(let O=0;O<B.length;++O){let[U,M,se]=B[O];if(U==K)k.buttons[M].value>0&&(T|=R[O]);else if(U==ie){let fe=Math.round(k.axes[M]*100)-se;(fe<0?-fe:fe)<2&&(T|=R[O])}else if(U==ee){let fe=k.axes[M],y=Math.round(fe*100);(y<0?-y:y)>20&&(se>0&&fe>0||se<0&&fe<0)&&(T|=R[O])}}}return T},i=()=>{n.program&&t.deleteProgram(n.program),n.buffer&&t.deleteBuffer(buffer),n.texture&&t.deleteTexture(n.texture),n={}},s=(k,T)=>{let R=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(R,k),t.compileShader(R),!t.getShaderParameter(R,t.COMPILE_STATUS)){let ee=t.getShaderInfoLog(R);throw t.deleteShader(R),new Error(`Compile vs: ${ee}`)}let B=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(B,T),t.compileShader(B),!t.getShaderParameter(B,t.COMPILE_STATUS)){let ee=t.getShaderInfoLog(B);throw t.deleteShader(B),new Error(`Compile fs: ${ee}`)}let K=t.createProgram();if(t.attachShader(K,R),t.attachShader(K,B),t.linkProgram(K),t.detachShader(K,R),t.detachShader(K,B),t.deleteShader(R),t.deleteShader(B),t.getProgramParameter(K,t.LINK_STATUS))return K;{let ee=t.getProgramInfoLog(K);throw t.deleteProgram(K),new Error(`Link shader: ${ee}`)}},a=()=>{t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),n.program=s(Fr,Or),t.useProgram(n.program),n.buffer=n.buffer??t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n.buffer);let k=t.getAttribLocation(n.program,"texcoord");t.vertexAttribPointer(k,2,t.FLOAT,!0,8,0),t.enableVertexAttribArray(k),n.texture=n.texture??t.createTexture(),t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,240,160,0,t.RGBA,t.UNSIGNED_BYTE,null)},c=()=>{},l=()=>{t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,240,160,t.RGBA,t.UNSIGNED_BYTE,n.data);let k=t.getUniformLocation(n.program,"gbapic");t.uniform1i(k,0)},h=()=>{t.bufferData(t.ARRAY_BUFFER,$r,t.STATIC_DRAW)},g=()=>{t.drawArrays(t.TRIANGLE_STRIP,0,4)},d=[],w=k=>{let T=n.now;n.now=k;let K=1*((n.now-T)/16.75),ee=e.pad?r():0;n.replay&&(n.replay=!1,e.replay());let ie=performance.now();e.go(K,ee|n.keyboard),d.push(performance.now()-ie);let O=e.output(0);O&&(n.data=new Uint8Array(e.raw(),O,4*240*160),l(),g()),V(),H(),e.stop||(e.fps(1e3/(k-n.prev)),requestAnimationFrame(w)),n.prev=k},x=()=>{e.stop=!0,n.stop=performance.now(),console.log(`\u603B\u5171\u8FD0\u884C${d.length}\u5E27`),d.sort((T,R)=>T-R),console.log(`\u6700\u6162\u5E27${d.at(-1)}ms`);let k=d.filter(T=>T>16.6);console.log(`\u8D85\u8FC716.6\u5171\u8BA1${k.length}\u5E27`)},b=()=>{e.stop&&(e.stop=!1,n.now=performance.now(),delete n.stop,requestAnimationFrame(w))},S=()=>{n.replay=!0},N=(k,T)=>{k=e.keys.indexOf(k.toUpperCase()),k>=0&&(T?n.keyboard|=1<<k:n.keyboard&=ge.NONE&~(1<<k))},V=()=>{let k=e.output(1),T=e.output(2);if(k>0&&!e.stop){let R=new Float32Array(e.raw(),T,k);e.pushaudio(R)}},H=()=>{let k=e.output(3),T=new Uint32Array(e.raw(),k,3);n.chip==null?(n.chip=[T[0],T[1],T[2]],e.chip(n.chip)):(T[0]!=n.chip[0]||T[1]!=n.chip[1]||T[2]!=n.chip[2])&&(n.chip=[T[0],T[1],T[2]],e.chip(n.chip))};return k=>{t!=null&&t!=k&&i();let T=e.output();n.data=new Uint8Array(e.raw(),T,4*240*160),n.prev=n.now=performance.now(),n.keyboard=0,t=k;try{a(),c(),l(),h(),g()}catch(R){throw console.error(R.stack),R}return requestAnimationFrame(w),[x,b,S,N]}},es=e=>{let t=new Worker("./vm.js"),n={fps(l){e.fps(l)}},r=(...l)=>{let h=l.filter(g=>Jo.includes(Object.getPrototypeOf(g)?.constructor));h.length>0?t.postMessage((0,Te.makeRPC)(...l),h):t.postMessage((0,Te.makeRPC)(...l))};return t.onmessage=l=>{let h=l.data;switch(h.type){case Te.MessageType.NANOBOY_READY:{let g=$r.slice();r("scene",e.canvas,Fr,Or,g.buffer),r("setRom",e.rom),setTimeout(()=>r("start"));break}case Te.MessageType.NANOBOY_RPC:{let[g,d]=h.payloads;g in n&&n[g].apply(n,d);break}default:}},[()=>r("pause"),()=>r("resume"),()=>r("replay"),(l,h)=>{let g=e.keys.indexOf(l.toUpperCase());g>=0&&r("input",g,h)}]},ts=e=>{let{onFocus:t,pad:n,onPadInput:r}=e,[i,s]=ce(!1),a=null,c=!1;on(()=>{let x=navigator.getGamepads()[n];x?(a==null&&(a=x.axes.slice()),s(!1)):s(!0)});let l=j(()=>{let x=e.config;if(x==null)return"";{let[b,S,N]=x,V="";return b==me.Stick?V=N>0?" (+)":" (-)":b==me["D-Pad"]&&(V=` ${N.toFixed(2)}`),`${Object.keys(me)[b]} ${S}${V}`}}),h=(x,b,S)=>{r&&r(x,b,S)},g=()=>{let x=navigator.getGamepads()[n];if(x){let b=x.buttons.map((S,N)=>({idx:N,val:S.value})).find(S=>S.val>.8);if(b)h(me.Button,b.idx);else{let S=x.axes.map((N,V)=>({val:N,idx:V})).find(N=>Math.abs(N.val-a[N.idx])>.2);S&&(Math.abs(a[S.idx])-1>1e-5?h(me["D-Pad"],S.idx,S.val):h(me.Stick,S.idx,S.val))}}else s(!0);c&&requestAnimationFrame(g)},d=()=>{c=!1},w=x=>{c=!0,x.target.addEventListener("blur",d,{once:!0}),t&&t(x),g()};return(()=>{var x=Pr(),b=x.firstChild;return b.$$input=S=>S.preventDefault(),b.addEventListener("focus",w),cr(b,sn({get disabled(){return i()},get value(){return l()}},e),!1,!1),z(()=>x.classList.toggle("empty",l()=="")),x})()},ns=()=>{let[e]=zn(()=>fetch("/r/document.json").then(y=>y.json())),[t,n]=mr({scale:2,worker:window.location.hash=="#worker"?1:0,error:0,chiptype:0,chipsize:0,usingrtc:0,newcfg:0,keys:Xo.slice(),edit:[],joys:[],editj:[],indevs:[],padidx:-1}),r=null,i=null,s=null,a=null,c=null,l="",h=null,g=null,d=null,w=null,x=()=>{if(s){let y=r.getContext("webgl");[h,g,w,d]=s(y)}};ct(()=>{e.state=="ready"&&e().document&&(document.title=e().document)}),on(()=>{i=(0,Te.loadNanoBA)().then(y=>i=y)});let b=j(()=>{let y=t.editj.length,v=t.padidx;return t.newcfg===0?!1:v<0&&t.edit.includes("")===!1||y===10&&t.editj.every(P=>!!P)}),S=y=>{r=y;let v=new ResizeObserver(x);v.observe(r),ke(()=>v.disconnect())},N=j(()=>[240*t.scale,160*t.scale]),V={start(y){this.controller=y},pull(){return new Promise(()=>{})},push(y){this.controller?.enqueue(y)}},H=()=>{i.pad=navigator.getGamepads().find(y=>!!y),i.pad?(0,re.toast)(e().forpadin):(0,re.toast)({text:e().forpadout,type:"error"})},k=y=>{let P=navigator.getGamepads().findIndex(F=>y==F?.index);return P<0?()=>null:()=>navigator.getGamepads()[P]},T=()=>Qo().then(t.worker?R:B,y=>(0,re.toast)({type:"error",text:e().error[y.message]??y.message})).catch(y=>(console.error(y.stack),a.innerHTML=e().error[y.message]??y.message)),R=([y,v])=>{let P=r.transferControlToOffscreen(),F={rom:y,canvas:P,keys:t.keys.slice(),fps:Q=>a.innerHTML=`FPS: ${Q.toFixed(1)}`};l=v,window.onkeydown=Q=>d(Q.code,!0),window.onkeyup=Q=>d(Q.code,!1),window.onmousedown=Q=>Q.target!=r?h(a.innerHTML=e().forpause):g(),[h,g,w,d]=es(F)},B=async([y,v])=>{try{i.then&&await i,i.setRom(y)}catch(F){console.error(F.stack),a.innerHTML=e().error[F.message]??F.message;return}l=v,i.fps=F=>a.innerHTML=`FPS: ${F.toFixed(1)}`,i.chip=F=>{n("chiptype",F[0]),n("chipsize",F[1]),n("usingrtc",F[2])},i.pushaudio=V.push.bind(V),i.keys=t.keys.slice(),i.pads=k(0),window.onmousedown=F=>F.target!=r?h(a.innerHTML=e().forpause):g(),window.onkeydown=F=>d(F.code,!0),window.onkeyup=F=>d(F.code,!1),window.addEventListener("gamepadconnected",H),window.addEventListener("gamepaddisconnected",H),s=Zo(i),new ReadableStream(V).pipeTo((0,re.streamToAudio)(33e3));let P=r.getContext("webgl");try{i.go(1),[h,g,w,d]=s(P)}catch(F){console.error(F.stack),n("error",F.message)}},K=()=>{let y=[{text:e().inputing.kbdev,value:-1}];for(let v of navigator.getGamepads())v?.connected&&y.push({text:v.id,value:v.index});n("edit",t.keys.slice()),n("indevs",y),n("newcfg",0),c.showModal()},ee=(y,v)=>{let P=y.code.toUpperCase(),F=t.edit.findIndex(Q=>Q===P);F>-1&&n("edit",F,""),n("edit",v,P),n("newcfg",1)},ie=(y,v,P,F)=>{y==me.Stick?P=P>0?1:-1:y==me["D-Pad"]?P=Math.round(P*100):P=0;let Q=t.editj.findIndex(te=>te&&te[0]==y&&te[1]==v&&te[2]==P);Q>-1&&n("editj",Q,null),n("editj",F,[y,v,P]),n("newcfg",1)},O=y=>{n("padidx",y.value),y.value<0?n("edit",t.edit.slice()):n("editj",[])},U=()=>{i.keys&&(i.keys=t.edit.slice()),i.pads=k(t.padidx),i.gpin=t.editj.slice(),n("keys",t.edit.slice()),n("joys",t.editj.slice()),n("padidx",-1),n("edit",[]),n("editj",[]),c.close()},M=y=>{let v=y.getBoundingClientRect(),P=c.getBoundingClientRect();return new DOMRect(v.left-P.left,v.top-P.top,v.width,v.height)},se=()=>{w(),setTimeout(()=>g(),100)},fe=y=>{y.currentTarget.type="button";let v=15;t.chiptype==1?v=14:t.chiptype==2?t.chipsize>512*1024?v=t.usingrtc?12:13:v=t.usingrtc?8:9:t.chiptype==3&&(v=t.chipsize>8*1024?2:0);let P=new Uint8Array(8);P[0]=v;let F=l.lastIndexOf("."),Q=new Blob([P.buffer],{type:"image/octet-stream"}),te=URL.createObjectURL(Q),Ce=document.createElement("a");Ce.href=te,Ce.download=`${F>=0?l.slice(0,F):l}.stc`,Ce.click(),setTimeout(()=>URL.revokeObjectURL(te))};return G(an,{get fallback(){return G(re.Loading,{})},get children(){return[G(dt,{get when(){return e.state=="errored"},get children(){var y=Cr();return $(y,()=>e.error.message),y}}),G(dt,{get when(){return!!t.error},get children(){var y=Cr();return $(y,()=>t.error),y}}),G(dt,{get when(){return e.state=="ready"},get children(){return[(()=>{var y=Io();return $(y,()=>e().forsize),y})(),G(re.Menu,{styled:["lines","normal","selected"],get options(){return e().scale},get selected(){return t.scale},handler:y=>n("scale",y.value)}),(()=>{var y=Uo();return Le(S,y),z(v=>{var P=N()[0],F=N()[1];return P!==v.e&&pe(y,"width",v.e=P),F!==v.t&&pe(y,"height",v.t=F),v},{e:void 0,t:void 0}),y})(),(()=>{var y=jo(),v=a;return typeof v=="function"?Le(v,y):a=y,$(y,()=>e().state),y})(),(()=>{var y=Ho(),v=y.firstChild,P=v.nextSibling;return v.$$click=T,$(v,()=>e().forload),P.$$click=K,$(P,()=>e().forinput),y})(),(()=>{var y=Go();return $(y,G(ve,{get when(){return t.chiptype},get fallback(){return(()=>{var v=gn();return $(v,()=>e().savetype.chip[0]),v})()},get children(){var v=Rr();return $(v,()=>e().savetype.chip[t.chiptype]),v}}),null),$(y,G(ve,{get when(){return t.chipsize},get fallback(){return(()=>{var v=gn();return $(v,()=>e().savetype.empty),v})()},get children(){var v=Bo(),P=v.firstChild;return $(v,()=>t.chipsize>>10,P),v}}),null),$(y,G(ve,{get when(){return t.usingrtc},get fallback(){return(()=>{var v=gn();return $(v,()=>e().savetype.rtc),v})()},get children(){var v=Rr();return $(v,()=>e().savetype.rtc),v}}),null),$(y,G(ve,{get when(){return t.chipsize*t.chiptype>0},get children(){return[(()=>{var v=Wo();return v.$$click=se,z(()=>pe(v,"title",e().forreplay)),v})(),(()=>{var v=Vo();return v.$$click=fe,z(()=>pe(v,"title",e().fordownload)),v})()]}}),null),y})(),qo(),(()=>{var y=Yo(),v=y.firstChild,P=v.firstChild,F=P.nextSibling,Q=F.firstChild,te=Q.firstChild,Ce=te.firstChild,mn=te.nextSibling,pn=mn.firstChild,Je=F.nextSibling,Re=Je.firstChild,Pe=Re.firstChild,Qe=Pe.firstChild,wt=Re.nextSibling,Me=wt.firstChild,jt=Me.nextSibling,Ht=c;return typeof Ht=="function"?Le(Ht,y):c=y,$(P,()=>e().forinput),$(Ce,()=>e().inputing.vmsource),$(pn,()=>e().inputing.kbsource),$(F,G(ft,{get each(){return t.edit},children:(vt,Ze)=>(()=>{var Ne=zo(),xt=Ne.firstChild;return $(xt,()=>e().inputing.keys[Ze()]),$(Ne,G(ve,{get when(){return t.padidx<0},get fallback(){return G(ts,{get pad(){return t.padidx},get config(){return t.editj[Ze()]},onPadInput:(_e,ye,De)=>ie(_e,ye,De,Ze())})},get children(){var _e=Pr(),ye=_e.firstChild;return _e.classList.toggle("empty",vt==""),ye.$$keydown=De=>ee(De,Ze()),ye.value=vt,_e}}),null),Ne})()}),null),$(Pe,()=>e().inputing.fordev,Qe),$(Re,G(re.Select,{get value(){return t.padidx},get options(){return t.indevs},locate:M,onChange:O}),null),Me.$$click=U,$(Me,()=>e().inputing.yes),jt.$$click=()=>c.close(),$(jt,()=>e().inputing.no),z(()=>Me.disabled=!b()),y})()]}})]}})};(0,re.main)(ns);ht(["input","click","keydown"]);})();
