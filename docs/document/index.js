"use strict";(()=>{var Oi=Object.create;var Dn=Object.defineProperty;var $i=Object.getOwnPropertyDescriptor;var Li=Object.getOwnPropertyNames;var Mi=Object.getPrototypeOf,Ni=Object.prototype.hasOwnProperty;var In=(e,t)=>()=>(e&&(t=e(e=0)),t);var Jt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Di=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Li(t))!Ni.call(e,i)&&i!==n&&Dn(e,i,{get:()=>t[i],enumerable:!(r=$i(t,i))||r.enumerable});return e};var Qt=(e,t,n)=>(n=e!=null?Oi(Mi(e)):{},Di(t||!e||!e.__esModule?Dn(n,"default",{value:e,enumerable:!0}):n,e));function Un(e){let t=String(e),n=t.length-1;return N.context.id+(n?String.fromCharCode(96+n):"")+t}function tn(e){N.context=e}function Ii(){return{...N.context,id:N.getNextContextId(),count:0}}function We(e,t){let n=D,r=O,i=e.length===0,s=t===void 0?r:t,a=i?zn:{owned:null,cleanups:null,context:s?s.context:null,owner:s},c=i?e:()=>e(()=>ie(()=>Ae(a)));O=a,D=null;try{return ce(c,!0)}finally{D=n,O=r}}function ue(e,t){t=t?Object.assign({},Tt,t):Tt;let n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(y&&y.running&&y.sources.has(n)?i=i(n.tValue):i=i(n.value)),er(n,i));return[Zn.bind(n),r]}function Hn(e,t,n){let r=ut(e,t,!0,ae);Ge&&y&&y.running?Y.push(r):$e(r)}function z(e,t,n){let r=ut(e,t,!1,ae);Ge&&y&&y.running?Y.push(r):$e(r)}function ct(e,t,n){Yn=qi;let r=ut(e,t,!1,ae),i=at&&Qn(at);i&&(r.suspense=i),(!n||!n.render)&&(r.user=!0),te?te.push(r):$e(r)}function j(e,t,n){n=n?Object.assign({},Tt,n):Tt;let r=ut(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ge&&y&&y.running?(r.tState=ae,Y.push(r)):$e(r),Zn.bind(r)}function Hi(e){return e&&typeof e=="object"&&"then"in e}function Kn(e,t,n){let r,i,s;typeof t=="function"?(r=e,i=t,s=n||{}):(r=!0,i=e,s=t||{});let a=null,c=Zt,l=null,h=!1,g=!1,d="initialValue"in s,m=typeof r=="function"&&j(r),w=new Set,[_,C]=(s.storage||ue)(s.initialValue),[I,W]=ue(void 0),[H,A]=ue(void 0,{equals:!1}),[E,R]=ue(d?"ready":"unresolved");N.context&&(l=N.getNextContextId(),s.ssrLoadFrom==="initial"?c=s.initialValue:N.load&&N.has(l)&&(c=N.load(l)));function B(M,L,U,J){return a===M&&(a=null,J!==void 0&&(d=!0),(M===c||L===c)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(J,{value:L})),c=Zt,y&&M&&h?(y.promises.delete(M),h=!1,ce(()=>{y.running=!0,K(L,U)},!1)):K(L,U)),L}function K(M,L){ce(()=>{L===void 0&&C(()=>M),R(L!==void 0?"errored":d?"ready":"unresolved"),W(L);for(let U of w.keys())U.decrement();w.clear()},!1)}function ne(){let M=at&&Qn(at),L=_(),U=I();if(U!==void 0&&!a)throw U;return D&&!D.user&&M&&Hn(()=>{H(),a&&(M.resolved&&y&&h?y.promises.add(a):w.has(M)||(M.increment(),w.add(M)))}),L}function se(M=!0){if(M!==!1&&g)return;g=!1;let L=m?m():r;if(h=y&&y.running,L==null||L===!1){B(a,ie(_));return}y&&a&&y.promises.delete(a);let U=c!==Zt?c:ie(()=>i(L,{value:_(),refetching:M}));return Hi(U)?(a=U,"value"in U?(U.status==="success"?B(a,U.value,void 0,L):B(a,void 0,nn(U.value),L),U):(g=!0,queueMicrotask(()=>g=!1),ce(()=>{R(d?"refreshing":"pending"),A()},!1),U.then(J=>B(U,J,void 0,L),J=>B(U,void 0,nn(J),L)))):(B(a,U,void 0,L),U)}Object.defineProperties(ne,{state:{get:()=>E()},error:{get:()=>I()},loading:{get(){let M=E();return M==="pending"||M==="refreshing"}},latest:{get(){if(!d)return ne();let M=I();if(M&&!a)throw M;return _()}}});let Z=O;return m?Hn(()=>(Z=O,se(!1))):se(!1),[ne,{refetch:M=>sn(Z,()=>se(M)),mutate:C}]}function Xn(e,t=qn,n){let r=new Map,i=ut(s=>{let a=e();for(let[c,l]of r.entries())if(t(c,a)!==t(c,s))for(let h of l.values())h.state=ae,h.pure?Y.push(h):te.push(h);return a},void 0,!0,ae);return $e(i),s=>{let a=D;if(a){let c;(c=r.get(s))?c.add(a):r.set(s,c=new Set([a])),ke(()=>{c.delete(a),!c.size&&r.delete(s)})}return t(s,y&&y.running&&y.sources.has(i)?i.tValue:i.value)}}function Jn(e){return ce(e,!1)}function ie(e){if(!Ve&&D===null)return e();let t=D;D=null;try{return Ve?Ve.untrack(e):e()}finally{D=t}}function on(e){ct(()=>ie(e))}function ke(e){return O===null||(O.cleanups===null?O.cleanups=[e]:O.cleanups.push(e)),e}function Pt(){return D}function Ot(){return O}function sn(e,t){let n=O,r=D;O=e,D=null;try{return ce(t,!0)}catch(i){$t(i)}finally{O=n,D=r}}function Bi(e){if(y&&y.running)return e(),y.done;let t=D,n=O;return Promise.resolve().then(()=>{D=t,O=n;let r;return(Ge||at)&&(r=y||(y={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(i=>r.resolve=i)),r.running=!0),ce(e,!1),D=O=null,r?r.done:void 0})}function Qn(e){let t;return O&&O.context&&(t=O.context[e.id])!==void 0?t:e.defaultValue}function Vi(e){let t=j(e),n=j(()=>rn(t()));return n.toArray=()=>{let r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Zn(){let e=y&&y.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===ae)$e(this);else{let t=Y;Y=null,ce(()=>Ct(this),!1),Y=t}if(D){let t=this.observers?this.observers.length:0;D.sources?(D.sources.push(this),D.sourceSlots.push(t)):(D.sources=[this],D.sourceSlots=[t]),this.observers?(this.observers.push(D),this.observerSlots.push(D.sources.length-1)):(this.observers=[D],this.observerSlots=[D.sources.length-1])}return e&&y.sources.has(this)?this.tValue:this.value}function er(e,t,n){let r=y&&y.running&&y.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if(y){let i=y.running;(i||!n&&y.sources.has(e))&&(y.sources.add(e),e.tValue=t),i||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&ce(()=>{for(let i=0;i<e.observers.length;i+=1){let s=e.observers[i],a=y&&y.running;a&&y.disposed.has(s)||((a?!s.tState:!s.state)&&(s.pure?Y.push(s):te.push(s),s.observers&&nr(s)),a?s.tState=ae:s.state=ae)}if(Y.length>1e6)throw Y=[],new Error},!1)}return t}function $e(e){if(!e.fn)return;Ae(e);let t=Ft;Vn(e,y&&y.running&&y.sources.has(e)?e.tValue:e.value,t),y&&!y.running&&y.sources.has(e)&&queueMicrotask(()=>{ce(()=>{y&&(y.running=!0),D=O=e,Vn(e,e.tValue,t),D=O=null},!1)})}function Vn(e,t,n){let r,i=O,s=D;D=O=e;try{r=e.fn(t)}catch(a){return e.pure&&(y&&y.running?(e.tState=ae,e.tOwned&&e.tOwned.forEach(Ae),e.tOwned=void 0):(e.state=ae,e.owned&&e.owned.forEach(Ae),e.owned=null)),e.updatedAt=n+1,$t(a)}finally{D=s,O=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?er(e,r,!0):y&&y.running&&e.pure?(y.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function ut(e,t,n,r=ae,i){let s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:O,context:O?O.context:null,pure:n};if(y&&y.running&&(s.state=0,s.tState=r),O===null||O!==zn&&(y&&y.running&&O.pure?O.tOwned?O.tOwned.push(s):O.tOwned=[s]:O.owned?O.owned.push(s):O.owned=[s]),Ve&&s.fn){let[a,c]=ue(void 0,{equals:!1}),l=Ve.factory(s.fn,c);ke(()=>l.dispose());let h=()=>Bi(c).then(()=>g.dispose()),g=Ve.factory(s.fn,h);s.fn=d=>(a(),y&&y.running?g.track(d):l.track(d))}return s}function lt(e){let t=y&&y.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===st)return Ct(e);if(e.suspense&&ie(e.suspense.inFallback))return e.suspense.effects.push(e);let n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ft);){if(t&&y.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let i=e,s=n[r+1];for(;(i=i.owner)&&i!==s;)if(y.disposed.has(i))return}if((t?e.tState:e.state)===ae)$e(e);else if((t?e.tState:e.state)===st){let i=Y;Y=null,ce(()=>Ct(e,n[0]),!1),Y=i}}}function ce(e,t){if(Y)return e();let n=!1;t||(Y=[]),te?n=!0:te=[],Ft++;try{let r=e();return Wi(n),r}catch(r){n||(te=null),Y=null,$t(r)}}function Wi(e){if(Y&&(Ge&&y&&y.running?Gi(Y):tr(Y),Y=null),e)return;let t;if(y){if(!y.promises.size&&!y.queue.size){let r=y.sources,i=y.disposed;te.push.apply(te,y.effects),t=y.resolve;for(let s of te)"tState"in s&&(s.state=s.tState),delete s.tState;y=null,ce(()=>{for(let s of i)Ae(s);for(let s of r){if(s.value=s.tValue,s.owned)for(let a=0,c=s.owned.length;a<c;a++)Ae(s.owned[a]);s.tOwned&&(s.owned=s.tOwned),delete s.tValue,delete s.tOwned,s.tState=0}Bn(!1)},!1)}else if(y.running){y.running=!1,y.effects.push.apply(y.effects,te),te=null,Bn(!0);return}}let n=te;te=null,n.length&&ce(()=>Yn(n),!1),t&&t()}function tr(e){for(let t=0;t<e.length;t++)lt(e[t])}function Gi(e){for(let t=0;t<e.length;t++){let n=e[t],r=y.queue;r.has(n)||(r.add(n),Ge(()=>{r.delete(n),ce(()=>{y.running=!0,lt(n)},!1),y&&(y.running=!1)}))}}function qi(e){let t,n=0;for(t=0;t<e.length;t++){let r=e[t];r.user?e[n++]=r:lt(r)}if(N.context){if(N.count){N.effects||(N.effects=[]),N.effects.push(...e.slice(0,n));return}tn()}for(N.effects&&(N.done||!N.count)&&(e=[...N.effects,...e],n+=N.effects.length,delete N.effects),t=0;t<n;t++)lt(e[t])}function Ct(e,t){let n=y&&y.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){let i=e.sources[r];if(i.sources){let s=n?i.tState:i.state;s===ae?i!==t&&(!i.updatedAt||i.updatedAt<Ft)&&lt(i):s===st&&Ct(i,t)}}}function nr(e){let t=y&&y.running;for(let n=0;n<e.observers.length;n+=1){let r=e.observers[n];(t?!r.tState:!r.state)&&(t?r.tState=st:r.state=st,r.pure?Y.push(r):te.push(r),r.observers&&nr(r))}}function Ae(e){let t;if(e.sources)for(;e.sources.length;){let n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){let s=i.pop(),a=n.observerSlots.pop();r<i.length&&(s.sourceSlots[a]=r,i[r]=s,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Ae(e.tOwned[t]);delete e.tOwned}if(y&&y.running&&e.pure)rr(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ae(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}y&&y.running?e.tState=0:e.state=0}function rr(e,t){if(t||(e.tState=0,y.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)rr(e.owned[n])}function nn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Wn(e,t,n){try{for(let r of t)r(e)}catch(r){$t(r,n&&n.owner||null)}}function $t(e,t=O){let n=jn&&t&&t.context&&t.context[jn],r=nn(e);if(!n)throw r;te?te.push({fn(){Wn(r,n,t)},state:ae}):Wn(r,n,t)}function rn(e){if(typeof e=="function"&&!e.length)return rn(e());if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let r=rn(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Gn(e){for(let t=0;t<e.length;t++)e[t]()}function zi(e,t,n={}){let r=[],i=[],s=[],a=0,c=t.length>1?[]:null;return ke(()=>Gn(s)),()=>{let l=e()||[],h=l.length,g,d;return l[Rt],ie(()=>{let w,_,C,I,W,H,A,E,R;if(h===0)a!==0&&(Gn(s),s=[],r=[],i=[],a=0,c&&(c=[])),n.fallback&&(r=[Yi],i[0]=We(B=>(s[0]=B,n.fallback())),a=1);else if(a===0){for(i=new Array(h),d=0;d<h;d++)r[d]=l[d],i[d]=We(m);a=h}else{for(C=new Array(h),I=new Array(h),c&&(W=new Array(h)),H=0,A=Math.min(a,h);H<A&&r[H]===l[H];H++);for(A=a-1,E=h-1;A>=H&&E>=H&&r[A]===l[E];A--,E--)C[E]=i[A],I[E]=s[A],c&&(W[E]=c[A]);for(w=new Map,_=new Array(E+1),d=E;d>=H;d--)R=l[d],g=w.get(R),_[d]=g===void 0?-1:g,w.set(R,d);for(g=H;g<=A;g++)R=r[g],d=w.get(R),d!==void 0&&d!==-1?(C[d]=i[g],I[d]=s[g],c&&(W[d]=c[g]),d=_[d],w.set(R,d)):s[g]();for(d=H;d<h;d++)d in C?(i[d]=C[d],s[d]=I[d],c&&(c[d]=W[d],c[d](d))):i[d]=We(m);i=i.slice(0,a=h),r=l.slice(0)}return i});function m(w){if(s[d]=w,c){let[_,C]=ue(d);return c[d]=C,t(l[d],_)}return t(l[d])}}}function G(e,t){if(Ki&&N.context){let n=N.context;tn(Ii());let r=ie(()=>e(t||{}));return tn(n),r}return ie(()=>e(t||{}))}function Et(){return!0}function en(e){return(e=typeof e=="function"?e():e)?e:{}}function Ji(){for(let e=0,t=this.length;e<t;++e){let n=this[e]();if(n!==void 0)return n}}function an(...e){let t=!1;for(let a=0;a<e.length;a++){let c=e[a];t=t||!!c&&he in c,e[a]=typeof c=="function"?(t=!0,j(c)):c}if(ji&&t)return new Proxy({get(a){for(let c=e.length-1;c>=0;c--){let l=en(e[c])[a];if(l!==void 0)return l}},has(a){for(let c=e.length-1;c>=0;c--)if(a in en(e[c]))return!0;return!1},keys(){let a=[];for(let c=0;c<e.length;c++)a.push(...Object.keys(en(e[c])));return[...new Set(a)]}},Xi);let n={},r=Object.create(null);for(let a=e.length-1;a>=0;a--){let c=e[a];if(!c)continue;let l=Object.getOwnPropertyNames(c);for(let h=l.length-1;h>=0;h--){let g=l[h];if(g==="__proto__"||g==="constructor")continue;let d=Object.getOwnPropertyDescriptor(c,g);if(!r[g])r[g]=d.get?{enumerable:!0,configurable:!0,get:Ji.bind(n[g]=[d.get.bind(c)])}:d.value!==void 0?d:void 0;else{let m=n[g];m&&(d.get?m.push(d.get.bind(c)):d.value!==void 0&&m.push(()=>d.value))}}}let i={},s=Object.keys(r);for(let a=s.length-1;a>=0;a--){let c=s[a],l=r[c];l&&l.get?Object.defineProperty(i,c,l):i[c]=l?l.value:void 0}return i}function ft(e){let t="fallback"in e&&{fallback:()=>e.fallback};return j(zi(()=>e.each,e.children,t||void 0))}function ve(e){let t=e.keyed,n=j(()=>e.when,void 0,void 0),r=t?n:j(n,void 0,{equals:(i,s)=>!i==!s});return j(()=>{let i=r();if(i){let s=e.children;return typeof s=="function"&&s.length>0?ie(()=>s(t?i:()=>{if(!ie(r))throw ir("Show");return n()})):s}return e.fallback},void 0,void 0)}function ln(e){let t=Vi(()=>e.children),n=j(()=>{let r=t(),i=Array.isArray(r)?r:[r],s=()=>{};for(let a=0;a<i.length;a++){let c=a,l=i[a],h=s,g=j(()=>h()?void 0:l.when,void 0,void 0),d=l.keyed?g:j(g,void 0,{equals:(m,w)=>!m==!w});s=()=>h()||(d()?[c,g,l]:void 0)}return s});return j(()=>{let r=n()();if(!r)return e.fallback;let[i,s,a]=r,c=a.children;return typeof c=="function"&&c.length>0?ie(()=>c(a.keyed?s():()=>{if(ie(n)()?.[0]!==i)throw ir("Match");return s()})):c},void 0,void 0)}function dt(e){return e}var N,Ui,qn,he,ji,Rt,Ps,Tt,jn,Yn,ae,st,zn,Zt,O,y,Ge,Ve,D,Y,te,Ft,Os,Bn,at,Yi,Ki,Xi,ir,qe=In(()=>{N={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Un(this.context.count)},getNextContextId(){return Un(this.context.count++)}};Ui=!1,qn=(e,t)=>e===t,he=Symbol("solid-proxy"),ji=typeof Proxy=="function",Rt=Symbol("solid-track"),Ps=Symbol("solid-dev-component"),Tt={equals:qn},jn=null,Yn=tr,ae=1,st=2,zn={owned:null,cleanups:null,context:null,owner:null},Zt={},O=null,y=null,Ge=null,Ve=null,D=null,Y=null,te=null,Ft=0;[Os,Bn]=ue(!1);Yi=Symbol("fallback");Ki=!1;Xi={get(e,t,n){return t===he?n:e.get(t)},has(e,t){return t===he?!0:e.has(t)},set:Et,deleteProperty:Et,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Et,deleteProperty:Et}},ownKeys(e){return e.keys()}};ir=e=>`Stale read from <${e}>.`});function ro(e,t){let n=no[e];return typeof n=="object"?n[t]?n.$:void 0:n}function so(e,t,n){let r=n.length,i=t.length,s=r,a=0,c=0,l=t[i-1].nextSibling,h=null;for(;a<i||c<s;){if(t[a]===n[c]){a++,c++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===a){let g=s<r?c?n[c-1].nextSibling:n[s-c]:l;for(;c<s;)e.insertBefore(n[c++],g)}else if(s===c)for(;a<i;)(!h||!h.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[s-1]&&n[c]===t[i-1]){let g=t[--i].nextSibling;e.insertBefore(n[c++],t[a++].nextSibling),e.insertBefore(n[--s],g),t[i]=n[s]}else{if(!h){h=new Map;let d=c;for(;d<s;)h.set(n[d],d++)}let g=h.get(t[a]);if(g!=null)if(c<g&&g<s){let d=a,m=1,w;for(;++d<i&&d<s&&!((w=h.get(t[d]))==null||w!==g+m);)m++;if(m>g-c){let _=t[a];for(;c<g;)e.insertBefore(n[c++],_)}else e.replaceChild(n[c++],t[a++])}else a++;else t[a++].remove()}}}function un(e,t,n,r={}){let i;return We(s=>{i=s,t===document?e():$(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function q(e,t,n,r){let i,s=()=>{let c=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return c.innerHTML=e,n?c.content.firstChild.firstChild:r?c.firstChild:c.content.firstChild},a=t?()=>ie(()=>document.importNode(i||(i=s()),!0)):()=>(i||(i=s())).cloneNode(!0);return a.cloneNode=a,a}function ht(e,t=window.document){let n=t[or]||(t[or]=new Set);for(let r=0,i=e.length;r<i;r++){let s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,ho))}}function pe(e,t,n){Ke(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function ao(e,t,n,r){Ke(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function lo(e,t,n){Ke(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function gt(e,t){Ke(e)||(t==null?e.removeAttribute("class"):e.className=t)}function co(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){let i=n[0];e.addEventListener(t,n[0]=s=>i.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Lt(e,t,n={}){let r=Object.keys(t||{}),i=Object.keys(n),s,a;for(s=0,a=i.length;s<a;s++){let c=i[s];!c||c==="undefined"||t[c]||(sr(e,c,!1),delete n[c])}for(s=0,a=r.length;s<a;s++){let c=r[s],l=!!t[c];!c||c==="undefined"||n[c]===l||!l||(sr(e,c,!0),n[c]=l)}return n}function fn(e,t,n){if(!t)return n?pe(e,"style"):t;let r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)i=t[s],i!==n[s]&&(r.setProperty(s,i),n[s]=i);return n}function cr(e,t={},n,r){let i={};return r||z(()=>i.children=ze(e,t.children,i.children)),z(()=>typeof t.ref=="function"&&Le(t.ref,e)),z(()=>uo(e,t,n,!0,i,!0)),i}function Le(e,t,n){return ie(()=>e(t,n))}function $(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return ze(e,t,r,n);z(i=>ze(e,t(),i,n),r)}function uo(e,t,n,r,i={},s=!1){t||(t={});for(let a in i)if(!(a in t)){if(a==="children")continue;i[a]=ar(e,a,null,i[a],n,s,t)}for(let a in t){if(a==="children"){r||ze(e,t.children);continue}let c=t[a];i[a]=ar(e,a,c,i[a],n,s,t)}}function Ke(e){return!!N.context&&!N.done&&(!e||e.isConnected)}function fo(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function sr(e,t,n){let r=t.trim().split(/\s+/);for(let i=0,s=r.length;i<s;i++)e.classList.toggle(r[i],n)}function ar(e,t,n,r,i,s,a){let c,l,h,g,d;if(t==="style")return fn(e,n,r);if(t==="classList")return Lt(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){let m=t.slice(3);r&&e.removeEventListener(m,r,typeof r!="function"&&r),n&&e.addEventListener(m,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){let m=t.slice(10);r&&e.removeEventListener(m,r,!0),n&&e.addEventListener(m,n,!0)}else if(t.slice(0,2)==="on"){let m=t.slice(2).toLowerCase(),w=io.has(m);if(!w&&r){let _=Array.isArray(r)?r[0]:r;e.removeEventListener(m,_)}(w||n)&&(co(e,m,n,w),w&&ht([m]))}else if(t.slice(0,5)==="attr:")pe(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")lo(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(h=eo.has(t))||!i&&((g=ro(t,e.tagName))||(l=Zi.has(t)))||(c=e.nodeName.includes("-")||"is"in a)){if(d)t=t.slice(5),l=!0;else if(Ke(e))return n;t==="class"||t==="className"?gt(e,n):c&&!l&&!h?e[fo(t)]=n:e[g||t]=n}else{let m=i&&t.indexOf(":")>-1&&oo[t.split(":")[0]];m?ao(e,m,t,n):pe(e,to[t]||t,n)}return n}function ho(e){if(N.registry&&N.events&&N.events.find(([l,h])=>h===e))return;let t=e.target,n=`$$${e.type}`,r=e.target,i=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),a=()=>{let l=t[n];if(l&&!t.disabled){let h=t[`${n}Data`];if(h!==void 0?l.call(t,h,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},c=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),N.registry&&!N.done&&(N.done=_$HY.done=!0),e.composedPath){let l=e.composedPath();s(l[0]);for(let h=0;h<l.length-2&&(t=l[h],!!a());h++){if(t._$host){t=t._$host,c();break}if(t.parentNode===i)break}}else c();s(r)}function ze(e,t,n,r,i){let s=Ke(e);if(s){!n&&(n=[...e.childNodes]);let l=[];for(let h=0;h<n.length;h++){let g=n[h];g.nodeType===8&&g.data.slice(0,2)==="!$"?g.remove():l.push(g)}n=l}for(;typeof n=="function";)n=n();if(t===n)return n;let a=typeof t,c=r!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,a==="string"||a==="number"){if(s||a==="number"&&(t=t.toString(),t===n))return n;if(c){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=Ye(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||a==="boolean"){if(s)return n;n=Ye(e,n,r)}else{if(a==="function")return z(()=>{let l=t();for(;typeof l=="function";)l=l();n=ze(e,l,n,r)}),()=>n;if(Array.isArray(t)){let l=[],h=n&&Array.isArray(n);if(cn(l,t,n,i))return z(()=>n=ze(e,l,n,r,!0)),()=>n;if(s){if(!l.length)return n;if(r===void 0)return n=[...e.childNodes];let g=l[0];if(g.parentNode!==e)return n;let d=[g];for(;(g=g.nextSibling)!==r;)d.push(g);return n=d}if(l.length===0){if(n=Ye(e,n,r),c)return n}else h?n.length===0?lr(e,l,r):so(e,n,l):(n&&Ye(e),lr(e,l));n=l}else if(t.nodeType){if(s&&t.parentNode)return n=c?[t]:t;if(Array.isArray(n)){if(c)return n=Ye(e,n,r,t);Ye(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function cn(e,t,n,r){let i=!1;for(let s=0,a=t.length;s<a;s++){let c=t[s],l=n&&n[e.length],h;if(!(c==null||c===!0||c===!1))if((h=typeof c)=="object"&&c.nodeType)e.push(c);else if(Array.isArray(c))i=cn(e,c,l)||i;else if(h==="function")if(r){for(;typeof c=="function";)c=c();i=cn(e,Array.isArray(c)?c:[c],Array.isArray(l)?l:[l])||i}else e.push(c),i=!0;else{let g=String(c);l&&l.nodeType===3&&l.data===g?e.push(l):e.push(document.createTextNode(g))}}return i}function lr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Ye(e,t,n,r){if(n===void 0)return e.textContent="";let i=r||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){let c=t[a];if(i!==c){let l=c.parentNode===e;!s&&!a?l?e.replaceChild(i,c):e.insertBefore(i,n):l&&c.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}function mo(e,t=!1){return t?document.createElementNS(go,e):document.createElement(e)}function ur(e){let{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,i=Ot(),s,a=!!N.context;return ct(()=>{a&&(Ot().user=a=!1),s||(s=sn(i,()=>j(()=>e.children)));let c=r();if(c instanceof HTMLHeadElement){let[l,h]=ue(!1),g=()=>h(!0);We(d=>$(c,()=>l()?d():s(),null)),ke(g)}else{let l=mo(e.isSVG?"g":"div",e.isSVG),h=t&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),$(h,s),c.appendChild(l),e.ref&&e.ref(l),ke(()=>c.removeChild(l))}},void 0,{render:!a}),n}var Qi,Zi,eo,to,no,io,oo,or,Hs,go,V=In(()=>{qe();qe();Qi=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Zi=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...Qi]),eo=new Set(["innerHTML","textContent","innerText","children"]),to=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),no=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});io=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),oo={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};or="_$DX_DELEGATE";Hs=Symbol(),go="http://www.w3.org/2000/svg"});var vr=Jt((ca,wr)=>{V();V();V();V();V();V();V();V();V();V();V();V();V();qe();var It=q("<div>"),vo=q("<div class=loading>LOADING"),xo=q("<div><div>"),_o=q('<button class=common-select-button><span class=common-select-text></span><span class=" common-select-icon "><svg viewBox="0 0 1024 1024"version=1.1 xmlns=http://www.w3.org/2000/svg width=1em height=1em><path d="M908.7 363.7L554 751.6c-10.6 12.1-25.9 19-41.9 19-16.1 0-31.3-6.9-41.9-19L115.4 363.7c-17.3-18.3-22.7-44.9-13.7-68.5 8.9-23.5 30.6-40 55.7-42.2h709.1c25.2 2.1 46.9 18.5 55.8 42.1 9 23.7 3.7 50.2-13.6 68.6z m0 0"fill=currentColor>'),So=q('<dialog class=" common-select-popover ">'),Ao=async e=>{let t=document.getElementById("app");(()=>{try{return window.WebAssembly!=null&&window.HTMLCanvasElement!=null&&window.HTMLDialogElement!=null&&typeof HTMLDialogElement.prototype.showModal=="function"&&window.OffscreenCanvas!=null&&navigator.getGamepads!=null}catch{return!1}})()?un(e,t):open("/nomaintenace.html","self")},ko=()=>window.navigator.userAgent.toLowerCase().includes("mobile"),Eo=e=>t=>{let n,r=clearTimeout,i=setTimeout;return(...s)=>{n=(n&&r(n),i(()=>t(...s),e))}},yr=e=>{let t=!1;return(...n)=>{t=(!t&&e(...n),!0)}},To=e=>(()=>{var t=It();return z(n=>{var r=e.class??"markdown",i=e.body;return r!==n.e&&gt(t,n.e=r),i!==n.t&&(t.innerHTML=n.t=i),n},{e:void 0,t:void 0}),t})(),Co=()=>G(ur,{get children(){return vo()}}),Ro=e=>{let t=new AudioContext({latencyHint:0}),n=2,r=new Uint8Array(0),i=(a,c,l)=>{if(a)if(c+l>a.length){let h=new Float32Array(2*(c+l));return h.set(a,0),h}else return a;else return new Float32Array(l*6)};return new WritableStream({start(a){this.pooled=r,this.srcnode=this.prepareSourceNode(),this.iswait=!1},source(){let a=this.srcnode;return a||(a=this.prepareSourceNode()),this.srcnode=null,a},write(a,c){let l;if(a.byteLength?(l=new Uint8Array(this.pooled.byteLength+a.byteLength),this.pooled.byteLength>0&&l.set(this.pooled,0),l.set(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),this.pooled.byteLength)):l=this.pooled,this.iswait)this.srcnode||(this.srcnode=this.prepareSourceNode()),this.preprocess(l);else{let h;if(this.cursor)l.byteLength>200&&this.preprocess(l),h=t.createBuffer(n,this.cursor,e),h.copyToChannel(this.left,0,0),h.copyToChannel(this.right,1,0),this.left=this.right=this.cursor=void 0;else{let d=l.byteLength>>3;h=t.createBuffer(n,d,e);let m=h.getChannelData(0),w=h.getChannelData(1),_=new Float32Array(l.buffer,0,d*n);for(let C=0;C<d;++C){let I=C<<1;m[C]=_[I],w[C]=_[I+1]}this.pooled=this.pooled.slice(_.byteLength)}let g=this.source();g.buffer=h,g.start(),this.iswait=!0}},preprocess(a){let c=a.byteLength>>3,l=this.cursor??0,h=i(this.left,l,c),g=i(this.right,l,c),d=new Float32Array(a.buffer,0,c*n);for(let m=0;m<c;++m,++l){let w=m<<1;h[l]=d[w],g[l]=d[w+1]}this.cursor=l,this.left=h,this.right=g,this.pooled=a.slice(d.byteLength)},prepareSourceNode(){let a=t.createBufferSource();return a.onended=()=>{this.iswait=!1,(this.pooled.byteLength>0||this.cursor)&&this.write(r,null)},a.connect(t.destination),a}})},Fo=e=>new Promise(t=>{e.click(),e.onchange=()=>{let n=e.files[0];t(n)}}),Po=e=>(()=>{var t=xo(),n=t.firstChild;return z(r=>{var i=e.class,s=`${e.percent.toFixed(3)}%`,a=e.color;return i!==r.e&&gt(t,r.e=i),s!==r.t&&((r.t=s)!=null?n.style.setProperty("width",s):n.style.removeProperty("width")),a!==r.a&&((r.a=a)!=null?n.style.setProperty("background",a):n.style.removeProperty("background")),r},{e:void 0,t:void 0,a:void 0}),t})(),br=e=>{let t=Xn(()=>e.selected);return(()=>{var n=It();return $(n,G(ft,{get each(){return e.options},children:r=>(()=>{var i=It();return i.$$click=()=>!r.disabled&&e.handler(r),$(i,()=>r.label),z(s=>{var a={[e.styled[1]]:!0,[e.styled[2]]:t(r.value)},c=r.label,l=r.disabled;return s.e=Lt(i,a,s.e),c!==s.t&&pe(i,"title",s.t=c),l!==s.a&&(i.disabled=s.a=l),s},{e:void 0,t:void 0,a:void 0}),i})()})),z(()=>gt(n,e.styled[0])),n})()},Oo=e=>{let t=j(()=>e.keyForText??"text"),n=j(()=>e.keyForValue??"value"),r=j(()=>e.placeholder??"---"),i=null,s=null,a=()=>{i?.open&&i.close(),s&&s()},c=d=>{a(),e.onChange&&e.onChange(d)},l=j(()=>{let d=e.options.find(m=>m[n()]===e.value);return d?d[t()]:null}),h=d=>{let m=d.currentTarget;if(i.open)a();else{let w=e.locate?e.locate(m):m.getBoundingClientRect();i.style.top=`${w.bottom+2}px`,i.style.left=`${w.left}px`,i.show(),setTimeout(()=>g(m))}},g=d=>{let m=w=>{!i.contains(w.target)&&!d.contains(w.target)&&a()};s&&s(),s=yr(()=>window.removeEventListener("mousedown",m)),window.addEventListener("mousedown",m)};return[(()=>{var d=_o(),m=d.firstChild;return d.$$click=h,$(m,G(ve,{get when(){return l()},get fallback(){return r()},get children(){return l()}})),z(()=>m.classList.toggle("common-select-empty",l()===null)),d})(),(()=>{var d=So(),m=i;return typeof m=="function"?Le(m,d):i=d,$(d,G(br,{styled:["common-select-list","common-select-item","common-select-value"],get selected(){return e.value},handler:c,get options(){return e.options.map(w=>({label:w[t()],value:w[n()]}))}})),d})()]},pr=e=>{let t=e-e%8;t<e&&(t+=8);let n=new ArrayBuffer(t>>2),r=new Uint8Array(n,0,t>>3),i=new Uint8Array(n,t>>3,t>>3),s=(l,h)=>{let g=l>>3;h[g]|=1<<(l&7)},a=(l,h)=>{let g=l>>3;h[g]&=~(1<<(l&7))},c=(l,h)=>{let g=l>>3;return!!(h[g]&1<<(l&7))};return{lock:(l,h)=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);if(c(l,i))throw new ReferenceError(`indexing ${l} is deleted before your action`);if(c(l,r)){if(h)return!0;throw new TypeError(`indexing ${l} is locking before your action`)}else s(l,r)},islock:l=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);return c(l,r)},unlock:l=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);a(l,r)},delete:l=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);s(l,i)},exist:l=>{if(l>e)throw new RangeError(`indexing ${l} is out of range ${e}`);return c(l,i)},lookup:()=>{for(let l=0;l<t;++l)if(i[l]!=255&&r[l]!=255)for(let h=0;h<8;++h){let g=1<<h;if(!(i[l]&g)&&!(r[l]&g)){let d=l*8+h;return d<e?d:-1}}return-1}}},$o=e=>{let t=new Array(e).fill(null),n=0,r=0;return{fifo_push:a=>{a!=null&&n+1!=r&&(t[n]=a,n=(n+1)%e)},fifo_pop:()=>{let a=t[r];return a&&(t[r]=null,r=(r+1)%e),a}}},Lo=e=>{let t=j(()=>e.duration??5e3),n=j(()=>e.type=="error"?"common-element-toast-error":"common-element-toast-info"),r=j(()=>20+e.order*100);return(()=>{var i=It();return $(i,()=>e.text),z(s=>{var a={"common-element-toast":!0,[n()]:!0},c=`bottom: ${r()}px; --aniduration: ${t()}ms;`;return s.e=Lt(i,a,s.e),s.t=fn(i,c,s.t),s},{e:void 0,t:void 0}),i})()},bt=null,Mo=e=>{let r,i,s;if(typeof e=="string"?r=e:typeof e=="object"?(r=String(e.text),i=e.type,s=e.duration):r=String(e),!bt){let a=document.createElement("div");a.id="toast",a.className="common-layout-toast",document.body.appendChild(a);let c=pr(5),{fifo_push:l,fifo_pop:h}=$o(40),g=m=>{l(m),d()},d=()=>{let m=c.lookup();if(m<0)return;let w=h();if(!w)return;c.lock(m);let _=document.createElement("div");bt.container.appendChild(_);let{text:C,Target:I,type:W,duration:H}=w;setTimeout(()=>{c.unlock(m),bt.container.removeChild(_),requestAnimationFrame(d)},H??5e3),un(()=>G(I,{order:m,text:C,type:W,duration:H}),_)};bt={container:a,exchanger:pr(5),schedule:g}}bt.schedule({Target:Lo,type:i,duration:s,text:r})};wr.exports={main:Ao,Loading:Co,Markdown:To,Progress:Po,debounce:Eo,onlyonce:yr,selectFile:Fo,Hex:e=>e.toString(16).padStart(8,"0"),Menu:br,Select:Oo,toast:Mo,DUMMY_HREF:"#!",isMobileDev:ko(),streamToAudio:Ro};ht(["click"])});var xr=Jt((Ut,gn)=>{var hn=function(){var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(t){t=t||{};var n=typeof t<"u"?t:{},r,i;n.ready=new Promise(function(o,u){r=o,i=u});var s={},a;for(a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);var c=[],l="./this.program",h=function(o,u){throw u},g=!0,d=!1,m=!1,w=!1,_="";function C(o){return n.locateFile?n.locateFile(o,_):_+o}var I,W,H,A;(g||d)&&(d?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),e&&(_=e),_.indexOf("blob:")!==0?_=_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1):_="",I=function(o){var u=new XMLHttpRequest;return u.open("GET",o,!1),u.send(null),u.responseText},d&&(H=function(o){var u=new XMLHttpRequest;return u.open("GET",o,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}),W=function(o,u,f){var p=new XMLHttpRequest;p.open("GET",o,!0),p.responseType="arraybuffer",p.onload=function(){if(p.status==200||p.status==0&&p.response){u(p.response);return}f()},p.onerror=f,p.send(null)},A=function(o){document.title=o});var E=n.print||console.log.bind(console),R=n.printErr||console.warn.bind(console);for(a in s)s.hasOwnProperty(a)&&(n[a]=s[a]);s=null,n.arguments&&(c=n.arguments),n.thisProgram&&(l=n.thisProgram),n.quit&&(h=n.quit);var B=16;function K(){return 4}function ne(o){switch(o){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(o[o.length-1]==="*")return K();if(o[0]==="i"){var u=Number(o.substr(1));return Qe(u%8===0,"getNativeTypeSize invalid bits "+u+", type "+o),u/8}else return 0}}}function se(o){se.shown||(se.shown={}),se.shown[o]||(se.shown[o]=1,R(o))}function Z(o,u){if(typeof WebAssembly.Function=="function"){for(var f={i:"i32",j:"i64",f:"f32",d:"f64"},p={parameters:[],results:u[0]=="v"?[]:[f[u[0]]]},x=1;x<u.length;++x)p.parameters.push(f[u[x]]);return new WebAssembly.Function(p,o)}var S=[1,0,1,96],k=u.slice(0,1),T=u.slice(1),X={i:127,j:126,f:125,d:124};S.push(T.length);for(var x=0;x<T.length;++x)S.push(X[T[x]]);k=="v"?S.push(0):S=S.concat([1,X[k]]),S[1]=S.length-2;var be=new Uint8Array([0,97,115,109,1,0,0,0].concat(S,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),we=new WebAssembly.Module(be),kt=new WebAssembly.Instance(we,{e:{f:o}}),ot=kt.exports.f;return ot}var M=[],L;function U(){if(M.length)return M.pop();try{Ue.grow(1)}catch(o){throw o instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":o}return Ue.length-1}function J(o,u){for(var f=o;f<o+u;f++){var p=St(f);p&&L.set(p,f)}}function b(o,u){if(L||(L=new WeakMap,J(0,Ue.length)),L.has(o))return L.get(o);var f=U();try{Fn(f,o)}catch(x){if(!(x instanceof TypeError))throw x;var p=Z(o,u);Fn(f,p)}return L.set(o,f),f}function v(o){L.delete(St(o)),M.push(o)}var F=0,P=function(o){F=o},ee=function(){return F},re;n.wasmBinary&&(re=n.wasmBinary);var Ce=n.noExitRuntime||!1;typeof WebAssembly!="object"&&je("no native wasm support detected");function pn(o,u,f,p){switch(f=f||"i8",f.charAt(f.length-1)==="*"&&(f="i32"),f){case"i1":fe[o>>0]=u;break;case"i8":fe[o>>0]=u;break;case"i16":Ie[o>>1]=u;break;case"i32":Q[o>>2]=u;break;case"i64":Gt=[u>>>0,(He=u,+Math.abs(He)>=1?He>0?(Math.min(+Math.floor(He/4294967296),4294967295)|0)>>>0:~~+Math.ceil((He-+(~~He>>>0))/4294967296)>>>0:0)],Q[o>>2]=Gt[0],Q[o+4>>2]=Gt[1];break;case"float":Bt[o>>2]=u;break;case"double":Vt[o>>3]=u;break;default:je("invalid type for setValue: "+f)}}function yn(o,u,f){switch(u=u||"i8",u.charAt(u.length-1)==="*"&&(u="i32"),u){case"i1":return fe[o>>0];case"i8":return fe[o>>0];case"i16":return Ie[o>>1];case"i32":return Q[o>>2];case"i64":return Q[o>>2];case"float":return Bt[o>>2];case"double":return Number(Vt[o>>3]);default:je("invalid type for getValue: "+u)}return null}var Je,Re=!1,Fe;function Qe(o,u){o||je("Assertion failed: "+u)}function wt(o){var u=n["_"+o];return Qe(u,"Cannot call unknown function "+o+", make sure it is exported"),u}function Me(o,u,f,p,x){var S={string:function(le){var Be=0;if(le!=null&&le!==0){var Nn=(le.length<<2)+1;Be=it(Nn),De(le,Be,Nn)}return Be},array:function(le){var Be=it(le.length);return Lr(le,Be),Be}};function k(le){return u==="string"?_e(le):u==="boolean"?!!le:le}var T=wt(o),X=[],be=0;if(p)for(var we=0;we<p.length;we++){var kt=S[f[we]];kt?(be===0&&(be=zt()),X[we]=kt(p[we])):X[we]=p[we]}var ot=T.apply(null,X);function Pi(le){return be!==0&&Kt(be),k(le)}return ot=Pi(ot),ot}function jt(o,u,f,p){f=f||[];var x=f.every(function(k){return k==="number"}),S=u!=="string";return S&&x&&!p?wt(o):function(){return Me(o,u,f,arguments,p)}}var Ht=0,vt=1;function Ze(o,u){var f;return u==vt?f=it(o.length):f=Yt(o.length),o.subarray||o.slice?Se.set(o,f):Se.set(new Uint8Array(o),f),f}var Ne=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function xt(o,u,f){for(var p=u+f,x=u;o[x]&&!(x>=p);)++x;if(x-u>16&&o.subarray&&Ne)return Ne.decode(o.subarray(u,x));for(var S="";u<x;){var k=o[u++];if(!(k&128)){S+=String.fromCharCode(k);continue}var T=o[u++]&63;if((k&224)==192){S+=String.fromCharCode((k&31)<<6|T);continue}var X=o[u++]&63;if((k&240)==224?k=(k&15)<<12|T<<6|X:k=(k&7)<<18|T<<12|X<<6|o[u++]&63,k<65536)S+=String.fromCharCode(k);else{var be=k-65536;S+=String.fromCharCode(55296|be>>10,56320|be&1023)}}return S}function _e(o,u){return o?xt(Se,o,u):""}function ye(o,u,f,p){if(!(p>0))return 0;for(var x=f,S=f+p-1,k=0;k<o.length;++k){var T=o.charCodeAt(k);if(T>=55296&&T<=57343){var X=o.charCodeAt(++k);T=65536+((T&1023)<<10)|X&1023}if(T<=127){if(f>=S)break;u[f++]=T}else if(T<=2047){if(f+1>=S)break;u[f++]=192|T>>6,u[f++]=128|T&63}else if(T<=65535){if(f+2>=S)break;u[f++]=224|T>>12,u[f++]=128|T>>6&63,u[f++]=128|T&63}else{if(f+3>=S)break;u[f++]=240|T>>18,u[f++]=128|T>>12&63,u[f++]=128|T>>6&63,u[f++]=128|T&63}}return u[f]=0,f-x}function De(o,u,f){return ye(o,Se,u,f)}function _t(o){for(var u=0,f=0;f<o.length;++f){var p=o.charCodeAt(f);p>=55296&&p<=57343&&(p=65536+((p&1023)<<10)|o.charCodeAt(++f)&1023),p<=127?++u:p<=2047?u+=2:p<=65535?u+=3:u+=4}return u}function rs(o){for(var u="";;){var f=Se[o++>>0];if(!f)return u;u+=String.fromCharCode(f)}}function is(o,u){return wn(o,u,!1)}var bn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function os(o,u){for(var f=o,p=f>>1,x=p+u/2;!(p>=x)&&vn[p];)++p;if(f=p<<1,f-o>32&&bn)return bn.decode(Se.subarray(o,f));for(var S="",k=0;!(k>=u/2);++k){var T=Ie[o+k*2>>1];if(T==0)break;S+=String.fromCharCode(T)}return S}function ss(o,u,f){if(f===void 0&&(f=2147483647),f<2)return 0;f-=2;for(var p=u,x=f<o.length*2?f/2:o.length,S=0;S<x;++S){var k=o.charCodeAt(S);Ie[u>>1]=k,u+=2}return Ie[u>>1]=0,u-p}function as(o){return o.length*2}function ls(o,u){for(var f=0,p="";!(f>=u/4);){var x=Q[o+f*4>>2];if(x==0)break;if(++f,x>=65536){var S=x-65536;p+=String.fromCharCode(55296|S>>10,56320|S&1023)}else p+=String.fromCharCode(x)}return p}function cs(o,u,f){if(f===void 0&&(f=2147483647),f<4)return 0;for(var p=u,x=p+f-4,S=0;S<o.length;++S){var k=o.charCodeAt(S);if(k>=55296&&k<=57343){var T=o.charCodeAt(++S);k=65536+((k&1023)<<10)|T&1023}if(Q[u>>2]=k,u+=4,u+4>x)break}return Q[u>>2]=0,u-p}function us(o){for(var u=0,f=0;f<o.length;++f){var p=o.charCodeAt(f);p>=55296&&p<=57343&&++f,u+=4}return u}function fs(o){var u=_t(o)+1,f=Yt(u);return f&&ye(o,fe,f,u),f}function ds(o){var u=_t(o)+1,f=it(u);return ye(o,fe,f,u),f}function hs(o,u,f){se("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var p,x;f&&(x=u+_t(o),p=fe[x]),De(o,u,1/0),f&&(fe[x]=p)}function Lr(o,u){fe.set(o,u)}function wn(o,u,f){for(var p=0;p<o.length;++p)fe[u++>>0]=o.charCodeAt(p);f||(fe[u>>0]=0)}function gs(o,u){return o%u>0&&(o+=u-o%u),o}var ms,Mr,fe,Se,Ie,vn,Q,Nr,Bt,Vt;function xn(o){Mr=o,n.HEAP8=fe=new Int8Array(o),n.HEAP16=Ie=new Int16Array(o),n.HEAP32=Q=new Int32Array(o),n.HEAPU8=Se=new Uint8Array(o),n.HEAPU16=vn=new Uint16Array(o),n.HEAPU32=Nr=new Uint32Array(o),n.HEAPF32=Bt=new Float32Array(o),n.HEAPF64=Vt=new Float64Array(o)}var ps=5242880,ys=n.INITIAL_MEMORY||16777216,Ue,_n=[],Sn=[],An=[],kn=[],En=[],Dr=!1,Ir=!1,Ur=0;function Tn(){return Ce||Ur>0}function jr(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gr(n.preRun.shift());tt(_n)}function Hr(){Dr=!0,tt(Sn)}function Br(){tt(An)}function Vr(){tt(kn),ci(),Ir=!0}function Wr(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)qr(n.postRun.shift());tt(En)}function Gr(o){_n.unshift(o)}function bs(o){Sn.unshift(o)}function ws(o){An.unshift(o)}function vs(o){kn.unshift(o)}function qr(o){En.unshift(o)}var Pe=0,Wt=null,et=null;function xs(o){return o}function Yr(o){Pe++,n.monitorRunDependencies&&n.monitorRunDependencies(Pe)}function zr(o){if(Pe--,n.monitorRunDependencies&&n.monitorRunDependencies(Pe),Pe==0&&(Wt!==null&&(clearInterval(Wt),Wt=null),et)){var u=et;et=null,u()}}n.preloadedImages={},n.preloadedAudios={};function je(o){n.onAbort&&n.onAbort(o),o="Aborted("+o+")",R(o),Re=!0,Fe=1,o+=". Build with -s ASSERTIONS=1 for more info.";var u=new WebAssembly.RuntimeError(o);throw i(u),u}var Kr="data:application/octet-stream;base64,";function Cn(o){return o.startsWith(Kr)}function _s(o){return o.startsWith("file://")}var de;de="nba.wasm",Cn(de)||(de=C(de));function Rn(o){try{if(o==de&&re)return new Uint8Array(re);if(H)return H(o);throw"both async and sync fetching of the wasm failed"}catch(u){je(u)}}function Xr(){return!re&&(g||d)&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(o){if(!o.ok)throw"failed to load wasm binary file at '"+de+"'";return o.arrayBuffer()}).catch(function(){return Rn(de)}):Promise.resolve().then(function(){return Rn(de)})}function Jr(){var o={env:On,wasi_snapshot_preview1:On};function u(k,T){var X=k.exports;n.asm=X,Je=n.asm.memory,xn(Je.buffer),Ue=n.asm.__indirect_function_table,zr("wasm-instantiate")}Yr("wasm-instantiate");function f(k){u(k.instance)}function p(k){return Xr().then(function(T){return WebAssembly.instantiate(T,o)}).then(function(T){return T}).then(k,function(T){R("failed to asynchronously prepare wasm: "+T),je(T)})}function x(){return!re&&typeof WebAssembly.instantiateStreaming=="function"&&!Cn(de)&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(k){var T=WebAssembly.instantiateStreaming(k,o);return T.then(f,function(X){return R("wasm streaming compile failed: "+X),R("falling back to ArrayBuffer instantiation"),p(f)})}):p(f)}if(n.instantiateWasm)try{var S=n.instantiateWasm(o,u);return S}catch(k){return R("Module.instantiateWasm callback failed with error: "+k),!1}return x().catch(i),{}}var He,Gt,Ss={};function tt(o){for(;o.length>0;){var u=o.shift();if(typeof u=="function"){u(n);continue}var f=u.func;typeof f=="number"?u.arg===void 0?St(f)():St(f)(u.arg):f(u.arg===void 0?null:u.arg)}}function As(o){var u=zt(),f=o();return Kt(u),f}function ks(o){return o}function Qr(o){var u=/\b_Z[\w\d_]+/g;return o.replace(u,function(f){var p=f;return f===p?f:p+" ["+f+"]"})}var nt=[];function St(o){var u=nt[o];return u||(o>=nt.length&&(nt.length=o+1),nt[o]=u=Ue.get(o)),u}function Zr(o){if(o instanceof $n||o=="unwind")return Fe;h(1,o)}function ei(){var o=new Error;if(!o.stack){try{throw new Error}catch(u){o=u}if(!o.stack)return"(no stack trace available)"}return o.stack.toString()}function Fn(o,u){Ue.set(o,u),nt[o]=u}function Es(){var o=ei();return n.extraStackTrace&&(o+=`
`+n.extraStackTrace()),Qr(o)}var Oe={mappings:{},buffers:[null,[],[]],printChar:function(o,u){var f=Oe.buffers[o];u===0||u===10?((o===1?E:R)(xt(f,0)),f.length=0):f.push(u)},varargs:void 0,get:function(){Oe.varargs+=4;var o=Q[Oe.varargs-4>>2];return o},getStr:function(o){var u=_e(o);return u},get64:function(o,u){return o}};function ti(o,u){}var Pn;Pn=function(){return performance.now()};var ni=!0;function ri(o){return o==0||o==1||o==2||o==3}function ii(o,u,f,p){if(!ri(o))return 28;var x;if(o===0)x=Date.now();else if(ni)x=Pn();else return 52;var S=Math.round(x*1e3*1e3);return Q[p>>2]=S>>>0,Q[p+4>>2]=S/Math.pow(2,32)>>>0,0}function oi(o){xn(Je.buffer)}var qt={};function si(){return l||"./this.program"}function rt(){if(!rt.strings){var o=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",u={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:o,_:si()};for(var f in qt)qt[f]===void 0?delete u[f]:u[f]=qt[f];var p=[];for(var f in u)p.push(f+"="+u[f]);rt.strings=p}return rt.strings}function ai(o,u){var f=0;return rt().forEach(function(p,x){var S=u+f;Q[o+x*4>>2]=S,wn(p,S),f+=p.length+1}),0}function li(o,u){var f=rt();Q[o>>2]=f.length;var p=0;return f.forEach(function(x){p+=x.length+1}),Q[u>>2]=p,0}function ci(){typeof _fflush<"u"&&_fflush(0);var o=Oe.buffers;o[1].length&&Oe.printChar(1,10),o[2].length&&Oe.printChar(2,10)}function ui(o,u,f,p){for(var x=0,S=0;S<f;S++){var k=Q[u>>2],T=Q[u+4>>2];u+=8;for(var X=0;X<T;X++)Oe.printChar(o,Se[k+X]);x+=T}return Q[p>>2]=x,0}function fi(o){Ln(o)}var di=!1;function Ts(o,u,f){var p=f>0?f:_t(o)+1,x=new Array(p),S=ye(o,x,0,x.length);return u&&(x.length=S),x}function Cs(o){for(var u=[],f=0;f<o.length;f++){var p=o[f];p>255&&(di&&Qe(!1,"Character code "+p+" ("+String.fromCharCode(p)+")  at offset "+f+" not in 0x00-0xFF."),p&=255),u.push(String.fromCharCode(p))}return u.join("")}var On={__syscall_stat64:ti,clock_time_get:ii,emscripten_notify_memory_growth:oi,environ_get:ai,environ_sizes_get:li,fd_write:ui,proc_exit:fi},Rs=Jr(),hi=n._getRom=function(){return(hi=n._getRom=n.asm.getRom).apply(null,arguments)},Yt=n._malloc=function(){return(Yt=n._malloc=n.asm.malloc).apply(null,arguments)},gi=n._getIRam=function(){return(gi=n._getIRam=n.asm.getIRam).apply(null,arguments)},mi=n._getWRam=function(){return(mi=n._getWRam=n.asm.getWRam).apply(null,arguments)},pi=n._cyclePerFrame=function(){return(pi=n._cyclePerFrame=n.asm.cyclePerFrame).apply(null,arguments)},yi=n._getOutput=function(){return(yi=n._getOutput=n.asm.getOutput).apply(null,arguments)},bi=n._run=function(){return(bi=n._run=n.asm.run).apply(null,arguments)},wi=n._go=function(){return(wi=n._go=n.asm.go).apply(null,arguments)},vi=n._replay=function(){return(vi=n._replay=n.asm.replay).apply(null,arguments)},xi=n._main=function(){return(xi=n._main=n.asm.main).apply(null,arguments)},_i=n.__start=function(){return(_i=n.__start=n.asm._start).apply(null,arguments)},Si=n.___errno_location=function(){return(Si=n.___errno_location=n.asm.__errno_location).apply(null,arguments)},Ai=n.__get_tzname=function(){return(Ai=n.__get_tzname=n.asm._get_tzname).apply(null,arguments)},ki=n.__get_daylight=function(){return(ki=n.__get_daylight=n.asm._get_daylight).apply(null,arguments)},Ei=n.__get_timezone=function(){return(Ei=n.__get_timezone=n.asm._get_timezone).apply(null,arguments)},zt=n.stackSave=function(){return(zt=n.stackSave=n.asm.stackSave).apply(null,arguments)},Kt=n.stackRestore=function(){return(Kt=n.stackRestore=n.asm.stackRestore).apply(null,arguments)},it=n.stackAlloc=function(){return(it=n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)},At;function $n(o){this.name="ExitStatus",this.message="Program terminated with exit("+o+")",this.status=o}var Ti=!1,Ci=void 0;et=function o(){At||Xt(),At||(et=o)};function Ri(o){var u=n.__start;Ci=[l].concat(o);try{u();var f=0;return Fi(f,!0),f}catch(p){return Zr(p)}finally{Ti=!0}}function Xt(o){if(o=o||c,Pe>0||(jr(),Pe>0))return;function u(){At||(At=!0,n.calledRun=!0,!Re&&(Hr(),Br(),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),Mn&&Ri(o),Wr()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),u()},1)):u()}n.run=Xt;function Fi(o,u){Fe=o,Tn()||Vr(),Ln(o)}function Ln(o){Fe=o,Tn()||(n.onExit&&n.onExit(o),Re=!0),h(o,new $n(o))}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();var Mn=!0;return n.noInitialRun&&(Mn=!1),Xt(),t.ready}}();typeof Ut=="object"&&typeof gn=="object"?gn.exports=hn:typeof define=="function"&&define.amd?define([],function(){return hn}):typeof Ut=="object"&&(Ut.createNanoBA=hn)});var Tr=Jt((ua,Er)=>{var _r=Qt(xr()),Sr=()=>{let e=null,t=new WritableStream({start(n){this.buffer=new Uint8Array(1024),this.pos=0},write(n,r){if(this.buffer.byteLength-this.pos<n.byteLength){let s=this.buffer;this.buffer=new Uint8Array(Math.max(s.byteLength*2,n.byteLength*2)),this.buffer.set(s,0)}this.buffer.set(n,this.pos),this.pos+=n.byteLength},close(){e=this.buffer=this.buffer.slice(0,this.pos)}});return Object.defineProperty(t,"bytes",{get:()=>e}),t},No=async e=>{let t=await fetch(e),n=Sr();return await t.body.pipeThrough(new DecompressionStream("gzip")).pipeTo(n),n.bytes},Ee=async()=>{if(Ee[Symbol.for("vm")])return Ee[Symbol.for("vm")];if(Ee[Symbol.for("pending")])return Ee[Symbol.for("pending")];let e,t,n=async()=>{try{let r=await No("/r/nba.hex"),i={};await(()=>new Promise(m=>{i.wasmBinary=r.buffer,i.onRuntimeInitialized=m,(0,_r.default)(i)}))();let[s,a,c,l]=[i._getIRam(),i._getWRam(),i._cyclePerFrame(),i._getOutput()],h=0,g=0,d=!1;Ee[Symbol.for("vm")]={setRom(m){g=m.byteLength,h=i._getRom(g),i.HEAPU8.set(new Uint8Array(m),h)},go(m,w){d?i._run(Math.round(m*c),w??0):(d=!0,i._go(m,w??0))},output(m){let w=l>>2;return w?i.HEAPU32[w+m]:0},raw(){return i.HEAPU8.buffer},replay(){return i._replay()},u8At(m){return 33554432<=m&&m<=33816575?i.HEAPU8[m-33554432+a]:50331648<=m&&m<=50364415?i.HEAPU8[m-50331648+s]:134217728<=m&&m<134217728+g?i.HEAPU8[m-134217728+h]:null},u32At(m){let w=_=>_>>2;return 33554432<=m&&m<=33816575?i.HEAPU32[w(m-33554432+a)]:50331648<=m&&m<=50364415?i.HEAPU32[w(m-50331648+s)]:134217728<=m&&m<134217728+g?i.HEAPU32[w(m-134217728+h)]:null}},e(Ee[Symbol.for("vm")])}catch(r){console.error("load nano boy adv error",r.stack),t(r)}};return Ee[Symbol.for("pending")]=new Promise((r,i)=>{e=r,t=i,n()})},Ar=(e,t)=>t?{type:e,payloads:t}:{type:e},Do=(e,...t)=>Ar(kr.NANOBOY_RPC,[e,t]),kr={NANOBOY_READY:0,NANOBOY_RPC:1};Er.exports={loadNanoBA:Ee,makeMessage:Ar,makeRPC:Do,MessageType:kr,streamToMemory:Sr}});V();V();V();V();V();V();V();V();V();qe();qe();var dn=Symbol("store-raw"),Xe=Symbol("store-node"),xe=Symbol("store-has"),fr=Symbol("store-self");function dr(e){let t=e[he];if(!t&&(Object.defineProperty(e,he,{value:t=new Proxy(e,bo)}),!Array.isArray(e))){let n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=n.length;i<s;i++){let a=n[i];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function Mt(e){let t;return e!=null&&typeof e=="object"&&(e[he]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function pt(e,t=new Set){let n,r,i,s;if(n=e!=null&&e[dn])return n;if(!Mt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,c=e.length;a<c;a++)i=e[a],(r=pt(i,t))!==i&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);let a=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let l=0,h=a.length;l<h;l++)s=a[l],!c[s].get&&(i=e[s],(r=pt(i,t))!==i&&(e[s]=r))}return e}function Nt(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function yt(e,t,n){if(e[t])return e[t];let[r,i]=ue(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function po(e,t){let n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===he||t===Xe||(delete n.value,delete n.writable,n.get=()=>e[he][t]),n}function hr(e){Pt()&&yt(Nt(e,Xe),fr)()}function yo(e){return hr(e),Reflect.ownKeys(e)}var bo={get(e,t,n){if(t===dn)return e;if(t===he)return n;if(t===Rt)return hr(e),n;let r=Nt(e,Xe),i=r[t],s=i?i():e[t];if(t===Xe||t===xe||t==="__proto__")return s;if(!i){let a=Object.getOwnPropertyDescriptor(e,t);Pt()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=yt(r,t,s)())}return Mt(s)?dr(s):s},has(e,t){return t===dn||t===he||t===Rt||t===Xe||t===xe||t==="__proto__"?!0:(Pt()&&yt(Nt(e,xe),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:yo,getOwnPropertyDescriptor:po};function Dt(e,t,n,r=!1){if(!r&&e[t]===n)return;let i=e[t],s=e.length;n===void 0?(delete e[t],e[xe]&&e[xe][t]&&i!==void 0&&e[xe][t].$()):(e[t]=n,e[xe]&&e[xe][t]&&i===void 0&&e[xe][t].$());let a=Nt(e,Xe),c;if((c=yt(a,t,i))&&c.$(()=>n),Array.isArray(e)&&e.length!==s){for(let l=e.length;l<s;l++)(c=a[l])&&c.$();(c=yt(a,"length",s))&&c.$(e.length)}(c=a[fr])&&c.$()}function gr(e,t){let n=Object.keys(t);for(let r=0;r<n.length;r+=1){let i=n[r];Dt(e,i,t[i])}}function wo(e,t){if(typeof t=="function"&&(t=t(e)),t=pt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){let i=t[n];e[n]!==i&&Dt(e,n,i)}Dt(e,"length",r)}else gr(e,t)}function mt(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();let a=typeof r,c=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)mt(e,[r[l]].concat(t),n);return}else if(c&&a==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&mt(e,[l].concat(t),n);return}else if(c&&a==="object"){let{from:l=0,to:h=e.length-1,by:g=1}=r;for(let d=l;d<=h;d+=g)mt(e,[d].concat(t),n);return}else if(t.length>1){mt(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(i,n),s===i)||r===void 0&&s==null||(s=pt(s),r===void 0||Mt(i)&&Mt(s)&&!Array.isArray(s)?gr(i,s):Dt(e,r,s))}function mr(...[e,t]){let n=pt(e||{}),r=Array.isArray(n),i=dr(n);function s(...a){Jn(()=>{r&&a.length===1?wo(n,a[0]):mt(n,a)})}return[i,s]}var Gs=Symbol("store-root");var oe=Qt(vr()),Te=Qt(Tr());var Fr=q("<span class=keyin><input>"),Cr=q("<div class=error>"),Io=q("<h4>"),Uo=q("<canvas>"),jo=q("<div class=state>"),Ho=q("<div class=lines><button class=opt></button><button class=opt>"),Rr=q("<span>"),Bo=q("<span>Kb"),Vo=q('<button><svg viewBox="0 0 1024 1024"version=1.1 xmlns=http://www.w3.org/2000/svg width=1em height=1em><path d="M768 576c0 141.248-114.752 256-256 256s-256-114.752-256-256 114.752-256 256-256l128 0 0.736 128.64L833.12 256l-192.384-192 0 128L512 192C300 192 128 364 128 576s172 384 384 384 384-172 384-384L768 576z"fill=currentColor>'),Wo=q('<button type=submit><svg viewBox="0 0 1024 1024"version=1.1 xmlns=http://www.w3.org/2000/svg width=1em height=1em><path d="M47.234 979.775v-210.45h102.303v70.151h724.874v-70.15h102.3v210.45H47.233zM149.54 359.948l242.595 0.175V44.451h242.6v309.827h242.6L517.821 734.253 149.539 359.948z"fill=currentColor>'),Go=q('<div class=" type ">'),qo=q('<div class=" thanks ">Powered by <a href=https://github.com/nba-emu/NanoBoyAdvance rel="noopener noreferer">NanoBoyAdvance'),Yo=q('<dialog class=input-setting><div class=" incfg "><h3></h3><div class=" keymap "><div class=" row head "><span><strong></strong></span><span><strong></strong></span></div></div><div class=" option "><div class=" pads "><span>&nbsp;</span></div><div class=" exit "><button type=button></button><button type=button>'),mn=q("<span disabled>"),zo=q('<div class=" row "><span>'),Ko=[1370423076,564304489,176325693,2903106692,2559255569,562004416,431903395,550373779,1246381584,3962644472,870893400,3218006914,2497705093,3238611918,3230291604,4238832147,1934460063,1637534371,665032536,1989673980,1640439075,1454244867,8665279,4245595968,66999039,4046493039,2244017047,629200480,62809001,3795340801,4281639673,1141063355,3415212152,2486833544,1669120101,2940006535,2346984918,1923877432,133747745],Pr=`
attribute vec2 texcoord;
varying vec2 uv;

void main()
{
	vec2 norm = texcoord - vec2(0.5, 0.5);
	gl_Position = vec4(2.0*norm.x, -2.0*norm.y, 1.0, 1.0);
	uv = texcoord;
}
`,Or=`
precision mediump float;
uniform sampler2D gbapic;
varying vec2 uv;

void main()
{
	gl_FragColor = texture2D(gbapic, uv);
}
`,$r=Float32Array.from([0,1,0,0,1,1,1,0]),ge={UP:1,DOWN:2,LEFT:4,RIGHT:8,START:16,SELECT:32,A:64,B:128,L:256,R:512,NONE:63},me={Button:0,Stick:1,"D-Pad":2},Xo=["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","ENTER","SPACE","KEYA","KEYB","KEYL","KEYR"];var Jo=[window.ArrayBuffer,window.MessagePort,window.ReadableStream,window.WritableStream,window.TransformStream,window.ImageBitmap,window.AudioData,window.VideoFrame,window.OffscreenCanvas,window.RTCDataChannel].filter(e=>!!e),Qo=async()=>{let e=document.createElement("input");e.type="file";let t=await(0,oe.selectFile)(e);if(t){let n=await t.arrayBuffer(),r=new Uint32Array(n,4,39);if(Ko.every((i,s)=>i===r[s]))return[n,t.name];throw new TypeError("invalid_rom")}else throw new ReferenceError("no_selected_file")},Zo=e=>{let t=null,n={},r=()=>{let A=e.pads(),E=0;if(A){let R=[ge.UP,ge.DOWN,ge.LEFT,ge.RIGHT,ge.START,ge.SELECT,ge.A,ge.B,ge.L,ge.R],B=e.gpin,K=me.Button,ne=me.Stick,se=me["D-Pad"];for(let Z=0;Z<B.length;++Z){let[M,L,U]=B[Z];if(M==K)A.buttons[L].value>0&&(E|=R[Z]);else if(M==se){let J=Math.round(A.axes[L]*100)-U;(J<0?-J:J)<2&&(E|=R[Z])}else if(M==ne){let J=A.axes[L],b=Math.round(J*100);(b<0?-b:b)>20&&(U>0&&J>0||U<0&&J<0)&&(E|=R[Z])}}}return E},i=()=>{n.program&&t.deleteProgram(n.program),n.buffer&&t.deleteBuffer(buffer),n.texture&&t.deleteTexture(n.texture),n={}},s=(A,E)=>{let R=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(R,A),t.compileShader(R),!t.getShaderParameter(R,t.COMPILE_STATUS)){let ne=t.getShaderInfoLog(R);throw t.deleteShader(R),new Error(`Compile vs: ${ne}`)}let B=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(B,E),t.compileShader(B),!t.getShaderParameter(B,t.COMPILE_STATUS)){let ne=t.getShaderInfoLog(B);throw t.deleteShader(B),new Error(`Compile fs: ${ne}`)}let K=t.createProgram();if(t.attachShader(K,R),t.attachShader(K,B),t.linkProgram(K),t.detachShader(K,R),t.detachShader(K,B),t.deleteShader(R),t.deleteShader(B),t.getProgramParameter(K,t.LINK_STATUS))return K;{let ne=t.getProgramInfoLog(K);throw t.deleteProgram(K),new Error(`Link shader: ${ne}`)}},a=()=>{t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),n.program=s(Pr,Or),t.useProgram(n.program),n.buffer=n.buffer??t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n.buffer);let A=t.getAttribLocation(n.program,"texcoord");t.vertexAttribPointer(A,2,t.FLOAT,!0,8,0),t.enableVertexAttribArray(A),n.texture=n.texture??t.createTexture(),t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,240,160,0,t.RGBA,t.UNSIGNED_BYTE,null)},c=()=>{},l=()=>{t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,240,160,t.RGBA,t.UNSIGNED_BYTE,n.data);let A=t.getUniformLocation(n.program,"gbapic");t.uniform1i(A,0)},h=()=>{t.bufferData(t.ARRAY_BUFFER,$r,t.STATIC_DRAW)},g=()=>{t.drawArrays(t.TRIANGLE_STRIP,0,4)},d=[],m=A=>{let E=n.now;n.now=A;let K=1*((n.now-E)/16.75),ne=e.pad?r():0;n.replay&&(n.replay=!1,e.replay());let se=performance.now();e.go(K,ne|n.keyboard),d.push(performance.now()-se);let Z=e.output(0);Z&&(n.data=new Uint8Array(e.raw(),Z,4*240*160),l(),g()),W(),H(),e.stop||(e.fps(1e3/(A-n.prev)),requestAnimationFrame(m)),n.prev=A},w=()=>{e.stop=!0,n.stop=performance.now(),console.log(`\u603B\u5171\u8FD0\u884C${d.length}\u5E27`),d.sort((E,R)=>E-R),console.log(`\u6700\u6162\u5E27${d.at(-1)}ms`);let A=d.filter(E=>E>16.6);console.log(`\u8D85\u8FC716.6\u5171\u8BA1${A.length}\u5E27`)},_=()=>{e.stop&&(e.stop=!1,n.now=performance.now(),delete n.stop,requestAnimationFrame(m))},C=()=>{n.replay=!0},I=(A,E)=>{A=e.keys.indexOf(A.toUpperCase()),A>=0&&(E?n.keyboard|=1<<A:n.keyboard&=ge.NONE&~(1<<A))},W=()=>{let A=e.output(1),E=e.output(2);if(A>0&&!e.stop){let R=new Float32Array(e.raw(),E,A);e.pushaudio(R)}},H=()=>{let A=e.output(3),E=new Uint32Array(e.raw(),A,3);n.chip==null?(n.chip=[E[0],E[1],E[2]],e.chip(n.chip)):(E[0]!=n.chip[0]||E[1]!=n.chip[1]||E[2]!=n.chip[2])&&(n.chip=[E[0],E[1],E[2]],e.chip(n.chip))};return A=>{t!=null&&t!=A&&i();let E=e.output();n.data=new Uint8Array(e.raw(),E,4*240*160),n.prev=n.now=performance.now(),n.keyboard=0,t=A;try{a(),c(),l(),h(),g()}catch(R){throw console.error(R.stack),R}return requestAnimationFrame(m),[w,_,C,I]}},es=e=>{let t=new Worker("./vm.js"),n={fps(l){e.fps(l)}},r=(...l)=>{let h=l.filter(g=>Jo.includes(Object.getPrototypeOf(g)?.constructor));h.length>0?t.postMessage((0,Te.makeRPC)(...l),h):t.postMessage((0,Te.makeRPC)(...l))};return t.onmessage=l=>{let h=l.data;switch(h.type){case Te.MessageType.NANOBOY_READY:{let g=$r.slice();r("scene",e.canvas,Pr,Or,g.buffer),r("setRom",e.rom),setTimeout(()=>r("start"));break}case Te.MessageType.NANOBOY_RPC:{let[g,d]=h.payloads;g in n&&n[g].apply(n,d);break}default:}},[()=>r("pause"),()=>r("resume"),()=>r("replay"),(l,h)=>{let g=e.keys.indexOf(l.toUpperCase());g>=0&&r("input",g,h)}]},ts=e=>{let{onFocus:t,pad:n,onPadInput:r}=e,[i,s]=ue(!1),a=null,c=!1;on(()=>{let w=navigator.getGamepads()[n];w?(a==null&&(a=w.axes.slice()),s(!1)):s(!0)});let l=j(()=>{let w=e.config;if(w==null)return"";{let[_,C,I]=w,W="";return _==me.Stick?W=I>0?" (+)":" (-)":_==me["D-Pad"]&&(W=` ${I.toFixed(2)}`),`${Object.keys(me)[_]} ${C}${W}`}}),h=(w,_,C)=>{r&&r(w,_,C)},g=()=>{let w=navigator.getGamepads()[n];if(w){let _=w.buttons.map((C,I)=>({idx:I,val:C.value})).find(C=>C.val>.8);if(_)h(me.Button,_.idx);else{let C=w.axes.map((I,W)=>({val:I,idx:W})).find(I=>Math.abs(I.val-a[I.idx])>.2);C&&(Math.abs(a[C.idx])-1>1e-5?h(me["D-Pad"],C.idx,C.val):h(me.Stick,C.idx,C.val))}}else s(!0);c&&requestAnimationFrame(g)},d=()=>{c=!1},m=w=>{c=!0,w.target.addEventListener("blur",d,{once:!0}),t&&t(w),g()};return(()=>{var w=Fr(),_=w.firstChild;return _.$$input=C=>C.preventDefault(),_.addEventListener("focus",m),cr(_,an({get disabled(){return i()},get value(){return l()}},e),!1,!1),z(()=>w.classList.toggle("empty",l()=="")),w})()},ns=()=>{let[e]=Kn(()=>fetch("/r/document.json").then(b=>b.json())),[t,n]=mr({scale:2,worker:window.location.hash=="#worker"?1:0,error:0,chiptype:0,chipsize:0,usingrtc:0,newcfg:0,keys:Xo.slice(),edit:[],joys:[],editj:[],indevs:[],padidx:-1}),r=null,i=null,s=null,a=null,c=null,l="",h=null,g=null,d=null,m=null,w=()=>{if(s){let b=r.getContext("webgl");[h,g,m,d]=s(b)}};ct(()=>{e.state=="ready"&&e().document&&(document.title=e().document)}),on(()=>{i=(0,Te.loadNanoBA)().then(b=>i=b)});let _=j(()=>{let b=t.editj.length,v=t.padidx;return t.newcfg===0?!1:v<0&&t.edit.includes("")===!1||b===10&&t.editj.every(F=>!!F)}),C=b=>{r=b;let v=new ResizeObserver(w);v.observe(r),ke(()=>v.disconnect())},I=j(()=>[240*t.scale,160*t.scale]),W={start(b){this.controller=b},pull(){return new Promise(()=>{})},push(b){this.controller?.enqueue(b)}},H=()=>{i.pad=navigator.getGamepads().find(b=>!!b),i.pad?(0,oe.toast)(e().forpadin):(0,oe.toast)({text:e().forpadout,type:"error"})},A=b=>{let F=navigator.getGamepads().findIndex(P=>b==P?.index);return F<0?()=>null:()=>navigator.getGamepads()[F]},E=()=>Qo().then(t.worker?R:B,b=>(0,oe.toast)({type:"error",text:e().error[b.message]??b.message})).catch(b=>(console.error(b.stack),a.innerHTML=e().error[b.message]??b.message)),R=([b,v])=>{let F=r.transferControlToOffscreen(),P={rom:b,canvas:F,keys:t.keys.slice(),fps:ee=>a.innerHTML=`FPS: ${ee.toFixed(1)}`};l=v,window.onkeydown=ee=>d(ee.code,!0),window.onkeyup=ee=>d(ee.code,!1),window.onmousedown=ee=>ee.target!=r?h(a.innerHTML=e().forpause):g(),[h,g,m,d]=es(P)},B=async([b,v])=>{try{i.then&&await i,i.setRom(b)}catch(P){console.error(P.stack),a.innerHTML=e().error[P.message]??P.message;return}l=v,i.fps=P=>a.innerHTML=`FPS: ${P.toFixed(1)}`,i.chip=P=>{n("chiptype",P[0]),n("chipsize",P[1]),n("usingrtc",P[2])},i.pushaudio=W.push.bind(W),i.keys=t.keys.slice(),i.pads=A(0),window.onmousedown=P=>P.target!=r?h(a.innerHTML=e().forpause):g(),window.onkeydown=P=>d(P.code,!0),window.onkeyup=P=>d(P.code,!1),window.addEventListener("gamepadconnected",H),window.addEventListener("gamepaddisconnected",H),s=Zo(i),new ReadableStream(W).pipeTo((0,oe.streamToAudio)(33e3));let F=r.getContext("webgl");try{i.go(1),[h,g,m,d]=s(F)}catch(P){console.error(P.stack),n("error",P.message)}},K=()=>{let b=[{text:e().inputing.kbdev,value:-1}];for(let v of navigator.getGamepads())v?.connected&&b.push({text:v.id,value:v.index});n("edit",t.keys.slice()),n("indevs",b),n("newcfg",0),c.showModal()},ne=(b,v)=>{let F=b.code.toUpperCase(),P=t.edit.findIndex(ee=>ee===F);P>-1&&n("edit",P,""),n("edit",v,F),n("newcfg",1)},se=(b,v,F,P)=>{b==me.Stick?F=F>0?1:-1:b==me["D-Pad"]?F=Math.round(F*100):F=0;let ee=t.editj.findIndex(re=>re&&re[0]==b&&re[1]==v&&re[2]==F);ee>-1&&n("editj",ee,null),n("editj",P,[b,v,F]),n("newcfg",1)},Z=b=>{n("padidx",b.value),b.value<0?n("edit",t.edit.slice()):n("editj",[])},M=()=>{i.keys&&(i.keys=t.edit.slice()),i.pads=A(t.padidx),i.gpin=t.editj.slice(),n("keys",t.edit.slice()),n("joys",t.editj.slice()),n("padidx",-1),n("edit",[]),n("editj",[]),c.close()},L=b=>{let v=b.getBoundingClientRect(),F=c.getBoundingClientRect();return new DOMRect(v.left-F.left,v.top-F.top,v.width,v.height)},U=()=>{m(),setTimeout(()=>g(),100)},J=b=>{b.currentTarget.type="button";let v=15;t.chiptype==1?v=14:t.chiptype==2?t.chipsize>512*1024?v=t.usingrtc?12:13:v=t.usingrtc?8:9:t.chiptype==3&&(v=t.chipsize>8*1024?2:0);let F=new Uint8Array(8);F[0]=v;let P=l.lastIndexOf("."),ee=new Blob([F.buffer],{type:"image/octet-stream"}),re=URL.createObjectURL(ee),Ce=document.createElement("a");Ce.href=re,Ce.download=`${P>=0?l.slice(0,P):l}.stc`,Ce.click(),setTimeout(()=>URL.revokeObjectURL(re))};return G(ln,{get fallback(){return G(oe.Loading,{})},get children(){return[G(dt,{get when(){return e.state=="errored"},get children(){var b=Cr();return $(b,()=>e.error.message),b}}),G(dt,{get when(){return!!t.error},get children(){var b=Cr();return $(b,()=>t.error),b}}),G(dt,{get when(){return e.state=="ready"},get children(){return[(()=>{var b=Io();return $(b,()=>e().forsize),b})(),G(oe.Menu,{styled:["lines","normal","selected"],get options(){return e().scale},get selected(){return t.scale},handler:b=>n("scale",b.value)}),(()=>{var b=Uo();return Le(C,b),z(v=>{var F=I()[0],P=I()[1];return F!==v.e&&pe(b,"width",v.e=F),P!==v.t&&pe(b,"height",v.t=P),v},{e:void 0,t:void 0}),b})(),(()=>{var b=jo(),v=a;return typeof v=="function"?Le(v,b):a=b,$(b,()=>e().state),b})(),(()=>{var b=Ho(),v=b.firstChild,F=v.nextSibling;return v.$$click=E,$(v,()=>e().forload),F.$$click=K,$(F,()=>e().forinput),b})(),(()=>{var b=Go();return $(b,G(ve,{get when(){return t.chiptype},get fallback(){return(()=>{var v=mn();return $(v,()=>e().savetype.chip[0]),v})()},get children(){var v=Rr();return $(v,()=>e().savetype.chip[t.chiptype]),v}}),null),$(b,G(ve,{get when(){return t.chipsize},get fallback(){return(()=>{var v=mn();return $(v,()=>e().savetype.empty),v})()},get children(){var v=Bo(),F=v.firstChild;return $(v,()=>t.chipsize>>10,F),v}}),null),$(b,G(ve,{get when(){return t.usingrtc},get fallback(){return(()=>{var v=mn();return $(v,()=>e().savetype.rtc),v})()},get children(){var v=Rr();return $(v,()=>e().savetype.rtc),v}}),null),$(b,G(ve,{get when(){return t.chipsize*t.chiptype>0},get children(){return[(()=>{var v=Vo();return v.$$click=U,z(()=>pe(v,"title",e().forreplay)),v})(),(()=>{var v=Wo();return v.$$click=J,z(()=>pe(v,"title",e().fordownload)),v})()]}}),null),b})(),qo(),(()=>{var b=Yo(),v=b.firstChild,F=v.firstChild,P=F.nextSibling,ee=P.firstChild,re=ee.firstChild,Ce=re.firstChild,pn=re.nextSibling,yn=pn.firstChild,Je=P.nextSibling,Re=Je.firstChild,Fe=Re.firstChild,Qe=Fe.firstChild,wt=Re.nextSibling,Me=wt.firstChild,jt=Me.nextSibling,Ht=c;return typeof Ht=="function"?Le(Ht,b):c=b,$(F,()=>e().forinput),$(Ce,()=>e().inputing.vmsource),$(yn,()=>e().inputing.kbsource),$(P,G(ft,{get each(){return t.edit},children:(vt,Ze)=>(()=>{var Ne=zo(),xt=Ne.firstChild;return $(xt,()=>e().inputing.keys[Ze()]),$(Ne,G(ve,{get when(){return t.padidx<0},get fallback(){return G(ts,{get pad(){return t.padidx},get config(){return t.editj[Ze()]},onPadInput:(_e,ye,De)=>se(_e,ye,De,Ze())})},get children(){var _e=Fr(),ye=_e.firstChild;return _e.classList.toggle("empty",vt==""),ye.$$keydown=De=>ne(De,Ze()),ye.value=vt,_e}}),null),Ne})()}),null),$(Fe,()=>e().inputing.fordev,Qe),$(Re,G(oe.Select,{get value(){return t.padidx},get options(){return t.indevs},locate:L,onChange:Z}),null),Me.$$click=M,$(Me,()=>e().inputing.yes),jt.$$click=()=>c.close(),$(jt,()=>e().inputing.no),z(()=>Me.disabled=!_()),b})()]}})]}})};(0,oe.main)(ns);ht(["input","click","keydown"]);})();
