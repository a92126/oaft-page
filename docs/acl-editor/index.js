(()=>{var Mn=Object.create;var Rt=Object.defineProperty;var Un=Object.getOwnPropertyDescriptor;var Nn=Object.getOwnPropertyNames;var In=Object.getPrototypeOf,On=Object.prototype.hasOwnProperty;var Vt=(e,n)=>()=>(e&&(n=e(e=0)),n);var Pn=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var Fn=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of Nn(n))!On.call(e,s)&&s!==t&&Rt(e,s,{get:()=>n[s],enumerable:!(r=Un(n,s))||r.enumerable});return e};var Dn=(e,n,t)=>(t=e!=null?Mn(In(e)):{},Fn(n||!e||!e.__esModule?Rt(t,"default",{value:e,enumerable:!0}):t,e));function Bt(e){let n=String(e),t=n.length-1;return q.context.id+(t?String.fromCharCode(96+t):"")+n}function $t(e){q.context=e}function Hn(){return{...q.context,id:q.getNextContextId(),count:0}}function je(e,n){let t=G,r=H,s=e.length===0,i=n===void 0?r:n,l=s?Zt:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?e:()=>e(()=>ue(()=>Ne(l)));H=l,G=null;try{return ye(a,!0)}finally{G=t,H=r}}function Y(e,n){n=n?Object.assign({},lt,n):lt;let t={value:e,observers:null,observerSlots:null,comparator:n.equals||void 0},r=s=>(typeof s=="function"&&(h&&h.running&&h.sources.has(t)?s=s(t.tValue):s=s(t.value)),rn(t,s));return[nn.bind(t),r]}function Gt(e,n,t){let r=Je(e,n,!0,pe);Re&&h&&h.running?re.push(r):Fe(r)}function K(e,n,t){let r=Je(e,n,!1,pe);Re&&h&&h.running?re.push(r):Fe(r)}function Ie(e,n,t){Jt=Yn;let r=Je(e,n,!1,pe),s=We&&tn(We);s&&(r.suspense=s),(!t||!t.render)&&(r.user=!0),ce?ce.push(r):Fe(r)}function R(e,n,t){t=t?Object.assign({},lt,t):lt;let r=Je(e,n,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,Re&&h&&h.running?(r.tState=pe,re.push(r)):Fe(r),nn.bind(r)}function Vn(e){return e&&typeof e=="object"&&"then"in e}function Qt(e,n,t){let r,s,i;typeof n=="function"?(r=e,s=n,i=t||{}):(r=!0,s=e,i=n||{});let l=null,a=kt,o=null,u=!1,d=!1,c="initialValue"in i,m=typeof r=="function"&&R(r),p=new Set,[x,S]=(i.storage||Y)(i.initialValue),[A,O]=Y(void 0),[$,E]=Y(void 0,{equals:!1}),[U,I]=Y(c?"ready":"unresolved");q.context&&(o=q.getNextContextId(),i.ssrLoadFrom==="initial"?a=i.initialValue:q.load&&q.has(o)&&(a=q.load(o)));function v(b,_,g,y){return l===b&&(l=null,y!==void 0&&(c=!0),(b===a||_===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(y,{value:_})),a=kt,h&&b&&u?(h.promises.delete(b),u=!1,ye(()=>{h.running=!0,k(_,g)},!1)):k(_,g)),_}function k(b,_){ye(()=>{_===void 0&&S(()=>b),I(_!==void 0?"errored":c?"ready":"unresolved"),O(_);for(let g of p.keys())g.decrement();p.clear()},!1)}function M(){let b=We&&tn(We),_=x(),g=A();if(g!==void 0&&!l)throw g;return G&&!G.user&&b&&Gt(()=>{$(),l&&(b.resolved&&h&&u?h.promises.add(l):p.has(b)||(b.increment(),p.add(b)))}),_}function C(b=!0){if(b!==!1&&d)return;d=!1;let _=m?m():r;if(u=h&&h.running,_==null||_===!1){v(l,ue(x));return}h&&l&&h.promises.delete(l);let g=a!==kt?a:ue(()=>s(_,{value:x(),refetching:b}));return Vn(g)?(l=g,"value"in g?(g.status==="success"?v(l,g.value,void 0,_):v(l,void 0,Ct(g.value),_),g):(d=!0,queueMicrotask(()=>d=!1),ye(()=>{I(c?"refreshing":"pending"),E()},!1),g.then(y=>v(g,y,void 0,_),y=>v(g,void 0,Ct(y),_)))):(v(l,g,void 0,_),g)}Object.defineProperties(M,{state:{get:()=>U()},error:{get:()=>A()},loading:{get(){let b=U();return b==="pending"||b==="refreshing"}},latest:{get(){if(!c)return M();let b=A();if(b&&!l)throw b;return x()}}});let P=H;return m?Gt(()=>(P=H,C(!1))):C(!1),[M,{refetch:b=>_t(P,()=>C(b)),mutate:S}]}function en(e,n=Xt,t){let r=new Map,s=Je(i=>{let l=e();for(let[a,o]of r.entries())if(n(a,l)!==n(a,i))for(let u of o.values())u.state=pe,u.pure?re.push(u):ce.push(u);return l},void 0,!0,pe);return Fe(s),i=>{let l=G;if(l){let a;(a=r.get(i))?a.add(l):r.set(i,a=new Set([l])),Oe(()=>{a.delete(l),!a.size&&r.delete(i)})}return n(i,h&&h.running&&h.sources.has(s)?s.tValue:s.value)}}function Ve(e){return ye(e,!1)}function ue(e){if(!He&&G===null)return e();let n=G;G=null;try{return He?He.untrack(e):e()}finally{G=n}}function At(e){Ie(()=>ue(e))}function Oe(e){return H===null||(H.cleanups===null?H.cleanups=[e]:H.cleanups.push(e)),e}function ut(){return H}function _t(e,n){let t=H,r=G;H=e,G=null;try{return ye(n,!0)}catch(s){dt(s)}finally{H=t,G=r}}function Bn(e){if(h&&h.running)return e(),h.done;let n=G,t=H;return Promise.resolve().then(()=>{G=n,H=t;let r;return(Re||We)&&(r=h||(h={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(s=>r.resolve=s)),r.running=!0),ye(e,!1),G=H=null,r?r.done:void 0})}function tn(e){let n;return H&&H.context&&(n=H.context[e.id])!==void 0?n:e.defaultValue}function qn(e){let n=R(e),t=R(()=>St(n()));return t.toArray=()=>{let r=t();return Array.isArray(r)?r:r!=null?[r]:[]},t}function nn(){let e=h&&h.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===pe)Fe(this);else{let n=re;re=null,ye(()=>at(this),!1),re=n}if(G){let n=this.observers?this.observers.length:0;G.sources?(G.sources.push(this),G.sourceSlots.push(n)):(G.sources=[this],G.sourceSlots=[n]),this.observers?(this.observers.push(G),this.observerSlots.push(G.sources.length-1)):(this.observers=[G],this.observerSlots=[G.sources.length-1])}return e&&h.sources.has(this)?this.tValue:this.value}function rn(e,n,t){let r=h&&h.running&&h.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,n)){if(h){let s=h.running;(s||!t&&h.sources.has(e))&&(h.sources.add(e),e.tValue=n),s||(e.value=n)}else e.value=n;e.observers&&e.observers.length&&ye(()=>{for(let s=0;s<e.observers.length;s+=1){let i=e.observers[s],l=h&&h.running;l&&h.disposed.has(i)||((l?!i.tState:!i.state)&&(i.pure?re.push(i):ce.push(i),i.observers&&on(i)),l?i.tState=pe:i.state=pe)}if(re.length>1e6)throw re=[],new Error},!1)}return n}function Fe(e){if(!e.fn)return;Ne(e);let n=ct;Yt(e,h&&h.running&&h.sources.has(e)?e.tValue:e.value,n),h&&!h.running&&h.sources.has(e)&&queueMicrotask(()=>{ye(()=>{h&&(h.running=!0),G=H=e,Yt(e,e.tValue,n),G=H=null},!1)})}function Yt(e,n,t){let r,s=H,i=G;G=H=e;try{r=e.fn(n)}catch(l){return e.pure&&(h&&h.running?(e.tState=pe,e.tOwned&&e.tOwned.forEach(Ne),e.tOwned=void 0):(e.state=pe,e.owned&&e.owned.forEach(Ne),e.owned=null)),e.updatedAt=t+1,dt(l)}finally{G=i,H=s}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?rn(e,r,!0):h&&h.running&&e.pure?(h.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=t)}function Je(e,n,t,r=pe,s){let i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:H,context:H?H.context:null,pure:t};if(h&&h.running&&(i.state=0,i.tState=r),H===null||H!==Zt&&(h&&h.running&&H.pure?H.tOwned?H.tOwned.push(i):H.tOwned=[i]:H.owned?H.owned.push(i):H.owned=[i]),He&&i.fn){let[l,a]=Y(void 0,{equals:!1}),o=He.factory(i.fn,a);Oe(()=>o.dispose());let u=()=>Bn(a).then(()=>d.dispose()),d=He.factory(i.fn,u);i.fn=c=>(l(),h&&h.running?d.track(c):o.track(c))}return i}function Xe(e){let n=h&&h.running;if((n?e.tState:e.state)===0)return;if((n?e.tState:e.state)===Ke)return at(e);if(e.suspense&&ue(e.suspense.inFallback))return e.suspense.effects.push(e);let t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ct);){if(n&&h.disposed.has(e))return;(n?e.tState:e.state)&&t.push(e)}for(let r=t.length-1;r>=0;r--){if(e=t[r],n){let s=e,i=t[r+1];for(;(s=s.owner)&&s!==i;)if(h.disposed.has(s))return}if((n?e.tState:e.state)===pe)Fe(e);else if((n?e.tState:e.state)===Ke){let s=re;re=null,ye(()=>at(e,t[0]),!1),re=s}}}function ye(e,n){if(re)return e();let t=!1;n||(re=[]),ce?t=!0:ce=[],ct++;try{let r=e();return Gn(t),r}catch(r){t||(ce=null),re=null,dt(r)}}function Gn(e){if(re&&(Re&&h&&h.running?zn(re):sn(re),re=null),e)return;let n;if(h){if(!h.promises.size&&!h.queue.size){let r=h.sources,s=h.disposed;ce.push.apply(ce,h.effects),n=h.resolve;for(let i of ce)"tState"in i&&(i.state=i.tState),delete i.tState;h=null,ye(()=>{for(let i of s)Ne(i);for(let i of r){if(i.value=i.tValue,i.owned)for(let l=0,a=i.owned.length;l<a;l++)Ne(i.owned[l]);i.tOwned&&(i.owned=i.tOwned),delete i.tValue,delete i.tOwned,i.tState=0}zt(!1)},!1)}else if(h.running){h.running=!1,h.effects.push.apply(h.effects,ce),ce=null,zt(!0);return}}let t=ce;ce=null,t.length&&ye(()=>Jt(t),!1),n&&n()}function sn(e){for(let n=0;n<e.length;n++)Xe(e[n])}function zn(e){for(let n=0;n<e.length;n++){let t=e[n],r=h.queue;r.has(t)||(r.add(t),Re(()=>{r.delete(t),ye(()=>{h.running=!0,Xe(t)},!1),h&&(h.running=!1)}))}}function Yn(e){let n,t=0;for(n=0;n<e.length;n++){let r=e[n];r.user?e[t++]=r:Xe(r)}if(q.context){if(q.count){q.effects||(q.effects=[]),q.effects.push(...e.slice(0,t));return}$t()}for(q.effects&&(q.done||!q.count)&&(e=[...q.effects,...e],t+=q.effects.length,delete q.effects),n=0;n<t;n++)Xe(e[n])}function at(e,n){let t=h&&h.running;t?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){let s=e.sources[r];if(s.sources){let i=t?s.tState:s.state;i===pe?s!==n&&(!s.updatedAt||s.updatedAt<ct)&&Xe(s):i===Ke&&at(s,n)}}}function on(e){let n=h&&h.running;for(let t=0;t<e.observers.length;t+=1){let r=e.observers[t];(n?!r.tState:!r.state)&&(n?r.tState=Ke:r.state=Ke,r.pure?re.push(r):ce.push(r),r.observers&&on(r))}}function Ne(e){let n;if(e.sources)for(;e.sources.length;){let t=e.sources.pop(),r=e.sourceSlots.pop(),s=t.observers;if(s&&s.length){let i=s.pop(),l=t.observerSlots.pop();r<s.length&&(i.sourceSlots[l]=r,s[r]=i,t.observerSlots[r]=l)}}if(e.tOwned){for(n=e.tOwned.length-1;n>=0;n--)Ne(e.tOwned[n]);delete e.tOwned}if(h&&h.running&&e.pure)ln(e,!0);else if(e.owned){for(n=e.owned.length-1;n>=0;n--)Ne(e.owned[n]);e.owned=null}if(e.cleanups){for(n=e.cleanups.length-1;n>=0;n--)e.cleanups[n]();e.cleanups=null}h&&h.running?e.tState=0:e.state=0}function ln(e,n){if(n||(e.tState=0,h.disposed.add(e)),e.owned)for(let t=0;t<e.owned.length;t++)ln(e.owned[t])}function Ct(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Kt(e,n,t){try{for(let r of n)r(e)}catch(r){dt(r,t&&t.owner||null)}}function dt(e,n=H){let t=qt&&n&&n.context&&n.context[qt],r=Ct(e);if(!t)throw r;ce?ce.push({fn(){Kt(r,t,n)},state:pe}):Kt(r,t,n)}function St(e){if(typeof e=="function"&&!e.length)return St(e());if(Array.isArray(e)){let n=[];for(let t=0;t<e.length;t++){let r=St(e[t]);Array.isArray(r)?n.push.apply(n,r):n.push(r)}return n}return e}function Wt(e){for(let n=0;n<e.length;n++)e[n]()}function Wn(e,n,t={}){let r=[],s=[],i=[],l=0,a=n.length>1?[]:null;return Oe(()=>Wt(i)),()=>{let o=e()||[],u=o.length,d,c;return o[Rn],ue(()=>{let p,x,S,A,O,$,E,U,I;if(u===0)l!==0&&(Wt(i),i=[],r=[],s=[],l=0,a&&(a=[])),t.fallback&&(r=[Kn],s[0]=je(v=>(i[0]=v,t.fallback())),l=1);else if(l===0){for(s=new Array(u),c=0;c<u;c++)r[c]=o[c],s[c]=je(m);l=u}else{for(S=new Array(u),A=new Array(u),a&&(O=new Array(u)),$=0,E=Math.min(l,u);$<E&&r[$]===o[$];$++);for(E=l-1,U=u-1;E>=$&&U>=$&&r[E]===o[U];E--,U--)S[U]=s[E],A[U]=i[E],a&&(O[U]=a[E]);for(p=new Map,x=new Array(U+1),c=U;c>=$;c--)I=o[c],d=p.get(I),x[c]=d===void 0?-1:d,p.set(I,c);for(d=$;d<=E;d++)I=r[d],c=p.get(I),c!==void 0&&c!==-1?(S[c]=s[d],A[c]=i[d],a&&(O[c]=a[d]),c=x[c],p.set(I,c)):i[d]();for(c=$;c<u;c++)c in S?(s[c]=S[c],i[c]=A[c],a&&(a[c]=O[c],a[c](c))):s[c]=je(m);s=s.slice(0,l=u),r=o.slice(0)}return s});function m(p){if(i[c]=p,a){let[x,S]=Y(c);return a[c]=S,n(o[c],x)}return n(o[c])}}}function T(e,n){if(Xn&&q.context){let t=q.context;$t(Hn());let r=ue(()=>e(n||{}));return $t(t),r}return ue(()=>e(n||{}))}function Ce(e){let n="fallback"in e&&{fallback:()=>e.fallback};return R(Wn(()=>e.each,e.children,n||void 0))}function Q(e){let n=e.keyed,t=R(()=>e.when,void 0,void 0),r=n?t:R(t,void 0,{equals:(s,i)=>!s==!i});return R(()=>{let s=r();if(s){let i=e.children;return typeof i=="function"&&i.length>0?ue(()=>i(n?s:()=>{if(!ue(r))throw an("Show");return t()})):i}return e.fallback},void 0,void 0)}function ft(e){let n=qn(()=>e.children),t=R(()=>{let r=n(),s=Array.isArray(r)?r:[r],i=()=>{};for(let l=0;l<s.length;l++){let a=l,o=s[l],u=i,d=R(()=>u()?void 0:o.when,void 0,void 0),c=o.keyed?d:R(d,void 0,{equals:(m,p)=>!m==!p});i=()=>u()||(c()?[a,d,o]:void 0)}return i});return R(()=>{let r=t()();if(!r)return e.fallback;let[s,i,l]=r,a=l.children;return typeof a=="function"&&a.length>0?ue(()=>a(l.keyed?i():()=>{if(ue(t)()?.[0]!==s)throw an("Match");return i()})):a},void 0,void 0)}function De(e){return e}var q,jn,Xt,oi,Rn,li,lt,qt,Jt,pe,Ke,Zt,kt,H,h,Re,He,G,re,ce,ct,ai,zt,We,Kn,Xn,an,Ze=Vt(()=>{q={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Bt(this.context.count)},getNextContextId(){return Bt(this.context.count++)}};jn=!1,Xt=(e,n)=>e===n,oi=Symbol("solid-proxy"),Rn=Symbol("solid-track"),li=Symbol("solid-dev-component"),lt={equals:Xt},qt=null,Jt=sn,pe=1,Ke=2,Zt={owned:null,cleanups:null,context:null,owner:null},kt={},H=null,h=null,Re=null,He=null,G=null,re=null,ce=null,ct=0;[ai,zt]=Y(!1);Kn=Symbol("fallback");Xn=!1;an=e=>`Stale read from <${e}>.`});function Zn(e,n,t){let r=t.length,s=n.length,i=r,l=0,a=0,o=n[s-1].nextSibling,u=null;for(;l<s||a<i;){if(n[l]===t[a]){l++,a++;continue}for(;n[s-1]===t[i-1];)s--,i--;if(s===l){let d=i<r?a?t[a-1].nextSibling:t[i-a]:o;for(;a<i;)e.insertBefore(t[a++],d)}else if(i===a)for(;l<s;)(!u||!u.has(n[l]))&&n[l].remove(),l++;else if(n[l]===t[i-1]&&t[a]===n[s-1]){let d=n[--s].nextSibling;e.insertBefore(t[a++],n[l++].nextSibling),e.insertBefore(t[--i],d),n[s]=t[i]}else{if(!u){u=new Map;let c=a;for(;c<i;)u.set(t[c],c++)}let d=u.get(n[l]);if(d!=null)if(a<d&&d<i){let c=l,m=1,p;for(;++c<s&&c<i&&!((p=u.get(n[c]))==null||p!==d+m);)m++;if(m>d-a){let x=n[l];for(;a<d;)e.insertBefore(t[a++],x)}else e.replaceChild(t[a++],n[l++])}else l++;else n[l++].remove()}}}function Lt(e,n,t,r={}){let s;return je(i=>{s=i,n===document?e():w(n,e(),n.firstChild?null:void 0,t)},r.owner),()=>{s(),n.textContent=""}}function V(e,n,t,r){let s,i=()=>{let a=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=e,t?a.content.firstChild.firstChild:r?a.firstChild:a.content.firstChild},l=n?()=>ue(()=>document.importNode(s||(s=i()),!0)):()=>(s||(s=i())).cloneNode(!0);return l.cloneNode=l,l}function gt(e,n=window.document){let t=n[cn]||(n[cn]=new Set);for(let r=0,s=e.length;r<s;r++){let i=e[r];t.has(i)||(t.add(i),n.addEventListener(i,Qn))}}function we(e,n,t){Mt(e)||(t==null?e.removeAttribute(n):e.setAttribute(n,t))}function mt(e,n){Mt(e)||(n==null?e.removeAttribute("class"):e.className=n)}function et(e,n,t,r){if(r)Array.isArray(t)?(e[`$$${n}`]=t[0],e[`$$${n}Data`]=t[1]):e[`$$${n}`]=t;else if(Array.isArray(t)){let s=t[0];e.addEventListener(n,t[0]=i=>s.call(e,t[1],i))}else e.addEventListener(n,t,typeof t!="function"&&t)}function Tt(e,n,t={}){let r=Object.keys(n||{}),s=Object.keys(t),i,l;for(i=0,l=s.length;i<l;i++){let a=s[i];!a||a==="undefined"||n[a]||(un(e,a,!1),delete t[a])}for(i=0,l=r.length;i<l;i++){let a=r[i],o=!!n[a];!a||a==="undefined"||t[a]===o||!o||(un(e,a,!0),t[a]=o)}return t}function qe(e,n,t){if(!n)return t?we(e,"style"):n;let r=e.style;if(typeof n=="string")return r.cssText=n;typeof t=="string"&&(r.cssText=t=void 0),t||(t={}),n||(n={});let s,i;for(i in t)n[i]==null&&r.removeProperty(i),delete t[i];for(i in n)s=n[i],s!==t[i]&&(r.setProperty(i,s),t[i]=s);return t}function Ge(e,n,t){return ue(()=>e(n,t))}function w(e,n,t,r){if(t!==void 0&&!r&&(r=[]),typeof n!="function")return ht(e,n,r,t);K(s=>ht(e,n(),s,t),r)}function Mt(e){return!!q.context&&!q.done&&(!e||e.isConnected)}function un(e,n,t){let r=n.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)e.classList.toggle(r[s],t)}function Qn(e){if(q.registry&&q.events&&q.events.find(([o,u])=>u===e))return;let n=e.target,t=`$$${e.type}`,r=e.target,s=e.currentTarget,i=o=>Object.defineProperty(e,"target",{configurable:!0,value:o}),l=()=>{let o=n[t];if(o&&!n.disabled){let u=n[`${t}Data`];if(u!==void 0?o.call(n,u,e):o.call(n,e),e.cancelBubble)return}return n.host&&typeof n.host!="string"&&!n.host._$host&&n.contains(e.target)&&i(n.host),!0},a=()=>{for(;l()&&(n=n._$host||n.parentNode||n.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),q.registry&&!q.done&&(q.done=_$HY.done=!0),e.composedPath){let o=e.composedPath();i(o[0]);for(let u=0;u<o.length-2&&(n=o[u],!!l());u++){if(n._$host){n=n._$host,a();break}if(n.parentNode===s)break}}else a();i(r)}function ht(e,n,t,r,s){let i=Mt(e);if(i){!t&&(t=[...e.childNodes]);let o=[];for(let u=0;u<t.length;u++){let d=t[u];d.nodeType===8&&d.data.slice(0,2)==="!$"?d.remove():o.push(d)}t=o}for(;typeof t=="function";)t=t();if(n===t)return t;let l=typeof n,a=r!==void 0;if(e=a&&t[0]&&t[0].parentNode||e,l==="string"||l==="number"){if(i||l==="number"&&(n=n.toString(),n===t))return t;if(a){let o=t[0];o&&o.nodeType===3?o.data!==n&&(o.data=n):o=document.createTextNode(n),t=Be(e,t,r,o)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n}else if(n==null||l==="boolean"){if(i)return t;t=Be(e,t,r)}else{if(l==="function")return K(()=>{let o=n();for(;typeof o=="function";)o=o();t=ht(e,o,t,r)}),()=>t;if(Array.isArray(n)){let o=[],u=t&&Array.isArray(t);if(Et(o,n,t,s))return K(()=>t=ht(e,o,t,r,!0)),()=>t;if(i){if(!o.length)return t;if(r===void 0)return t=[...e.childNodes];let d=o[0];if(d.parentNode!==e)return t;let c=[d];for(;(d=d.nextSibling)!==r;)c.push(d);return t=c}if(o.length===0){if(t=Be(e,t,r),a)return t}else u?t.length===0?dn(e,o,r):Zn(e,t,o):(t&&Be(e),dn(e,o));t=o}else if(n.nodeType){if(i&&n.parentNode)return t=a?[n]:n;if(Array.isArray(t)){if(a)return t=Be(e,t,r,n);Be(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function Et(e,n,t,r){let s=!1;for(let i=0,l=n.length;i<l;i++){let a=n[i],o=t&&t[e.length],u;if(!(a==null||a===!0||a===!1))if((u=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))s=Et(e,a,o)||s;else if(u==="function")if(r){for(;typeof a=="function";)a=a();s=Et(e,Array.isArray(a)?a:[a],Array.isArray(o)?o:[o])||s}else e.push(a),s=!0;else{let d=String(a);o&&o.nodeType===3&&o.data===d?e.push(o):e.push(document.createTextNode(d))}}return s}function dn(e,n,t=null){for(let r=0,s=n.length;r<s;r++)e.insertBefore(n[r],t)}function Be(e,n,t,r){if(t===void 0)return e.textContent="";let s=r||document.createTextNode("");if(n.length){let i=!1;for(let l=n.length-1;l>=0;l--){let a=n[l];if(s!==a){let o=a.parentNode===e;!i&&!l?o?e.replaceChild(s,a):e.insertBefore(s,t):o&&a.remove()}else i=!0}}else e.insertBefore(s,t);return[s]}function tr(e,n=!1){return n?document.createElementNS(er,e):document.createElement(e)}function pt(e){let{useShadow:n}=e,t=document.createTextNode(""),r=()=>e.mount||document.body,s=ut(),i,l=!!q.context;return Ie(()=>{l&&(ut().user=l=!1),i||(i=_t(s,()=>R(()=>e.children)));let a=r();if(a instanceof HTMLHeadElement){let[o,u]=Y(!1),d=()=>u(!0);je(c=>w(a,()=>o()?c():i(),null)),Oe(d)}else{let o=tr(e.isSVG?"g":"div",e.isSVG),u=n&&o.attachShadow?o.attachShadow({mode:"open"}):o;Object.defineProperty(o,"_$host",{get(){return t.parentNode},configurable:!0}),w(u,i),a.appendChild(o),e.ref&&e.ref(o),Oe(()=>a.removeChild(o))}},void 0,{render:!l}),t}var Jn,yi,Qe,cn,wi,er,Z=Vt(()=>{Ze();Ze();Jn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],yi=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...Jn]),Qe=e=>R(()=>e());cn="_$DX_DELEGATE";wi=Symbol(),er="http://www.w3.org/2000/svg"});var pn=Pn((Di,mn)=>{Z();Z();Z();Z();Z();Z();Z();Z();Z();Z();Z();Z();Z();Ze();var bt=V("<div>"),nr=V("<div class=loading>LOADING"),rr=V("<div><div>"),ir=V('<button class=common-select-button><span class=common-select-text></span><span class=" common-select-icon "><svg viewBox="0 0 1024 1024"version=1.1 xmlns=http://www.w3.org/2000/svg width=1em height=1em><path d="M908.7 363.7L554 751.6c-10.6 12.1-25.9 19-41.9 19-16.1 0-31.3-6.9-41.9-19L115.4 363.7c-17.3-18.3-22.7-44.9-13.7-68.5 8.9-23.5 30.6-40 55.7-42.2h709.1c25.2 2.1 46.9 18.5 55.8 42.1 9 23.7 3.7 50.2-13.6 68.6z m0 0"fill=currentColor>'),sr=V('<dialog class=" common-select-popover ">'),or=async e=>{let n=document.getElementById("app");(()=>{try{return window.WebAssembly!=null&&window.HTMLCanvasElement!=null&&window.HTMLDialogElement!=null&&typeof HTMLDialogElement.prototype.showModal=="function"&&window.OffscreenCanvas!=null&&navigator.getGamepads!=null}catch{return!1}})()?Lt(e,n):open("/nomaintenace.html","self")},lr=()=>window.navigator.userAgent.toLowerCase().includes("mobile"),ar=e=>n=>{let t,r=clearTimeout,s=setTimeout;return(...i)=>{t=(t&&r(t),s(()=>n(...i),e))}},hn=e=>{let n=!1;return(...t)=>{n=(!n&&e(...t),!0)}},cr=e=>(()=>{var n=bt();return K(t=>{var r=e.class??"markdown",s=e.body;return r!==t.e&&mt(n,t.e=r),s!==t.t&&(n.innerHTML=t.t=s),t},{e:void 0,t:void 0}),n})(),ur=()=>T(pt,{get children(){return nr()}}),dr=e=>{let n=new AudioContext({latencyHint:0}),t=2,r=new Uint8Array(0),s=(l,a,o)=>{if(l)if(a+o>l.length){let u=new Float32Array(2*(a+o));return u.set(l,0),u}else return l;else return new Float32Array(o*6)};return new WritableStream({start(l){this.pooled=r,this.srcnode=this.prepareSourceNode(),this.iswait=!1},source(){let l=this.srcnode;return l||(l=this.prepareSourceNode()),this.srcnode=null,l},write(l,a){let o;if(l.byteLength?(o=new Uint8Array(this.pooled.byteLength+l.byteLength),this.pooled.byteLength>0&&o.set(this.pooled,0),o.set(new Uint8Array(l.buffer,l.byteOffset,l.byteLength),this.pooled.byteLength)):o=this.pooled,this.iswait)this.srcnode||(this.srcnode=this.prepareSourceNode()),this.preprocess(o);else{let u;if(this.cursor)o.byteLength>200&&this.preprocess(o),u=n.createBuffer(t,this.cursor,e),u.copyToChannel(this.left,0,0),u.copyToChannel(this.right,1,0),this.left=this.right=this.cursor=void 0;else{let c=o.byteLength>>3;u=n.createBuffer(t,c,e);let m=u.getChannelData(0),p=u.getChannelData(1),x=new Float32Array(o.buffer,0,c*t);for(let S=0;S<c;++S){let A=S<<1;m[S]=x[A],p[S]=x[A+1]}this.pooled=this.pooled.slice(x.byteLength)}let d=this.source();d.buffer=u,d.start(),this.iswait=!0}},preprocess(l){let a=l.byteLength>>3,o=this.cursor??0,u=s(this.left,o,a),d=s(this.right,o,a),c=new Float32Array(l.buffer,0,a*t);for(let m=0;m<a;++m,++o){let p=m<<1;u[o]=c[p],d[o]=c[p+1]}this.cursor=o,this.left=u,this.right=d,this.pooled=l.slice(c.byteLength)},prepareSourceNode(){let l=n.createBufferSource();return l.onended=()=>{this.iswait=!1,(this.pooled.byteLength>0||this.cursor)&&this.write(r,null)},l.connect(n.destination),l}})},fr=e=>new Promise(n=>{e.click(),e.onchange=()=>{let t=e.files[0];n(t)}}),hr=e=>(()=>{var n=rr(),t=n.firstChild;return K(r=>{var s=e.class,i=`${e.percent.toFixed(3)}%`,l=e.color;return s!==r.e&&mt(n,r.e=s),i!==r.t&&((r.t=i)!=null?t.style.setProperty("width",i):t.style.removeProperty("width")),l!==r.a&&((r.a=l)!=null?t.style.setProperty("background",l):t.style.removeProperty("background")),r},{e:void 0,t:void 0,a:void 0}),n})(),gn=e=>{let n=en(()=>e.selected);return(()=>{var t=bt();return w(t,T(Ce,{get each(){return e.options},children:r=>(()=>{var s=bt();return s.$$click=()=>!r.disabled&&e.handler(r),w(s,()=>r.label),K(i=>{var l={[e.styled[1]]:!0,[e.styled[2]]:n(r.value)},a=r.label,o=r.disabled;return i.e=Tt(s,l,i.e),a!==i.t&&we(s,"title",i.t=a),o!==i.a&&(s.disabled=i.a=o),i},{e:void 0,t:void 0,a:void 0}),s})()})),K(()=>mt(t,e.styled[0])),t})()},gr=e=>{let n=R(()=>e.keyForText??"text"),t=R(()=>e.keyForValue??"value"),r=R(()=>e.placeholder??"---"),s=null,i=null,l=()=>{s?.open&&s.close(),i&&i()},a=c=>{l(),e.onChange&&e.onChange(c)},o=R(()=>{let c=e.options.find(m=>m[t()]===e.value);return c?c[n()]:null}),u=c=>{let m=c.currentTarget;if(s.open)l();else{let p=e.locate?e.locate(m):m.getBoundingClientRect();s.style.top=`${p.bottom+2}px`,s.style.left=`${p.left}px`,s.show(),setTimeout(()=>d(m))}},d=c=>{let m=p=>{!s.contains(p.target)&&!c.contains(p.target)&&l()};i&&i(),i=hn(()=>window.removeEventListener("mousedown",m)),window.addEventListener("mousedown",m)};return[(()=>{var c=ir(),m=c.firstChild;return c.$$click=u,w(m,T(Q,{get when(){return o()},get fallback(){return r()},get children(){return o()}})),K(()=>m.classList.toggle("common-select-empty",o()===null)),c})(),(()=>{var c=sr(),m=s;return typeof m=="function"?Ge(m,c):s=c,w(c,T(gn,{styled:["common-select-list","common-select-item","common-select-value"],get selected(){return e.value},handler:a,get options(){return e.options.map(p=>({label:p[n()],value:p[t()]}))}})),c})()]},fn=e=>{let n=e-e%8;n<e&&(n+=8);let t=new ArrayBuffer(n>>2),r=new Uint8Array(t,0,n>>3),s=new Uint8Array(t,n>>3,n>>3),i=(o,u)=>{let d=o>>3;u[d]|=1<<(o&7)},l=(o,u)=>{let d=o>>3;u[d]&=~(1<<(o&7))},a=(o,u)=>{let d=o>>3;return!!(u[d]&1<<(o&7))};return{lock:(o,u)=>{if(o>e)throw new RangeError(`indexing ${o} is out of range ${e}`);if(a(o,s))throw new ReferenceError(`indexing ${o} is deleted before your action`);if(a(o,r)){if(u)return!0;throw new TypeError(`indexing ${o} is locking before your action`)}else i(o,r)},islock:o=>{if(o>e)throw new RangeError(`indexing ${o} is out of range ${e}`);return a(o,r)},unlock:o=>{if(o>e)throw new RangeError(`indexing ${o} is out of range ${e}`);l(o,r)},delete:o=>{if(o>e)throw new RangeError(`indexing ${o} is out of range ${e}`);i(o,s)},exist:o=>{if(o>e)throw new RangeError(`indexing ${o} is out of range ${e}`);return a(o,s)},lookup:()=>{for(let o=0;o<n;++o)if(s[o]!=255&&r[o]!=255)for(let u=0;u<8;++u){let d=1<<u;if(!(s[o]&d)&&!(r[o]&d)){let c=o*8+u;return c<e?c:-1}}return-1}}},mr=e=>{let n=new Array(e).fill(null),t=0,r=0;return{fifo_push:l=>{l!=null&&t+1!=r&&(n[t]=l,t=(t+1)%e)},fifo_pop:()=>{let l=n[r];return l&&(n[r]=null,r=(r+1)%e),l}}},pr=e=>{let n=R(()=>e.duration??5e3),t=R(()=>e.type=="error"?"common-element-toast-error":"common-element-toast-info"),r=R(()=>20+e.order*100);return(()=>{var s=bt();return w(s,()=>e.text),K(i=>{var l={"common-element-toast":!0,[t()]:!0},a=`bottom: ${r()}px; --aniduration: ${n()}ms;`;return i.e=Tt(s,l,i.e),i.t=qe(s,a,i.t),i},{e:void 0,t:void 0}),s})()},tt=null,br=e=>{let r,s,i;if(typeof e=="string"?r=e:typeof e=="object"?(r=String(e.text),s=e.type,i=e.duration):r=String(e),!tt){let l=document.createElement("div");l.id="toast",l.className="common-layout-toast",document.body.appendChild(l);let a=fn(5),{fifo_push:o,fifo_pop:u}=mr(40),d=m=>{o(m),c()},c=()=>{let m=a.lookup();if(m<0)return;let p=u();if(!p)return;a.lock(m);let x=document.createElement("div");tt.container.appendChild(x);let{text:S,Target:A,type:O,duration:$}=p;setTimeout(()=>{a.unlock(m),tt.container.removeChild(x),requestAnimationFrame(c)},$??5e3),Lt(()=>T(A,{order:m,text:S,type:O,duration:$}),x)};tt={container:l,exchanger:fn(5),schedule:d}}tt.schedule({Target:pr,type:s,duration:i,text:r})};mn.exports={main:or,Loading:ur,Markdown:cr,Progress:hr,debounce:ar,onlyonce:hn,selectFile:fr,Hex:e=>e.toString(16).padStart(8,"0"),Menu:gn,Select:gr,toast:br,DUMMY_HREF:"#!",isMobileDev:lr(),streamToAudio:dr};gt(["click"])});Z();Z();Z();Z();Z();Z();Z();Z();Z();Z();Z();Ze();var oe=Dn(pn());var Ut=e=>new Promise((n,t)=>{let r=new DataView(e.buffer),s=4997953,i=c=>!c&&t(new Error("broken"));i(r.byteLength>8),i((r.getUint32(0,!0)&16777215)==s);let l=r.getUint16(4,!0);i(r.byteLength>l*3+(l+1)*2+8);let a=r.getUint16(8+l*(3+2),!0);i(r.byteLength>l*3+(l+1)*2+a*8+8);let o=[],u=(c,m,p)=>(x,S)=>{let A=r.getUint32(m+(S+c)*8,!0),O=r.getUint32(m+(S+c)*8+4,!0),$=p|A&255,E=(A&-256)>>3,U=o.length;return o.push(E),{set_id:O,serial:$,offset:U,holes:[],status:1}},d=new Map;for(let c=0;c<l;++c){let m=8+3*c,p=8+l*3+c*2,x=8+l*5+2,S=r.getUint16(m,!1)<<16|r.getUint8(m+2)<<8,A=r.getUint16(p,!0),$=r.getUint16(p+2,!0)-A,E=new Array($).fill(0).map(u(A,x,S));d.set(S,E),E.reduce((U,I)=>(U.has(I.serial)?U.get(I.serial)?.push(I):U.set(I.serial,[I]),U),d)}n({cheats:d,trunks:o,source:e})}),bn=(e,n,t,r)=>{let s=t[e.offset],i=new DataView(n.buffer),l=i.getUint16(s,!0),a=s+2+12*l,o=new Map,u=new TextDecoder,d=(x,S,A)=>{let O=a+x,$=O+1;for(;n[$]>0;)++$;return u.decode(n.slice(O,$))},c=(x,S,A)=>{let O=A===2?($,E,U)=>i.getUint16($+E*2,!0):($,E,U)=>i.getUint32($+E*4,!0);return new Array(S).fill(x).map(O)};for(let x=0;x<l;++x){let[S,A,O]=c(s+2+x*12,3,4),$;S>65535?$=c(s+A,O,4):O>0?$=c(s+A,O,2).map(d):$=[r.defaultKey],o.set(S,$)}let p=o.get(0).map((x,S,A)=>{let O=o.get(S+1);return{label:x,keys:O.map(($,E,U)=>{let I=o.get(E+1<<16|S+1),v=[];for(let k=0;k<I.length;k+=2){let M=I[k],C=I[k+1]>>8,P=I[k+1]&255;v=v.concat(new Array(C).fill(M).map((b,_,g)=>({addr:b+_,val:P})))}return{label:$,value:v}})}});e.holes=p,e.status=2},te={Title:1,Label:2,Value:3,Index:4,Paste:5,Throw:6,Spawn:7,BatAN:8,BatIP:9},$e=(e,n)=>({t:e,a:n}),yn=(e,n)=>{let t={label:e.label,keys:window.structuredClone(e.keys)};for(let r of n)switch(r.t){case te.Title:t.label=r.a;continue;case te.Label:let[s,i]=r.a;t.keys[s].label=i;continue;case te.Value:let[l,a,o]=r.a;if(isNaN(o))t.keys[l].value=t.keys[l].value.filter(E=>E.addr!==a);else{let E=t.keys[l].value.find(U=>U.addr===a);E?E.val=o:t.keys[l].value.push({addr:a,val:o})}continue;case te.Index:let[u,d]=r.a,c=t.keys[u],m=E=>E!==c,p=d>u?d+1:d;t.keys=[...t.keys.slice(0,p).filter(m),c,...t.keys.slice(p).filter(m)];continue;case te.Paste:let[x,S]=r.a,A=JSON.parse(S);t.keys[x]=A;continue;case te.Throw:let O=r.a;t.keys.splice(O,1);continue;case te.Spawn:t.keys.push({label:r.a,value:[]});continue;case te.BatAN:r.a.forEach(E=>E.trimStart().trimEnd().length>0&&t.keys.push({label:E,value:[]}));case te.BatIP:if(t.keys.length<256){let E=t.keys[0];if(E.value.length==1)for(let U=1;U<t.keys.length;++U)t.keys[U].value=[{addr:E.value[0].addr,val:(E.value[0].val+U)%256}]}else{let E=t.keys[0];if(E.value.length==2)for(let U=1;U<t.keys.length;++U)t.keys[U].value=[{addr:E.value[0].addr,val:(E.value[0].val+U)%256},{addr:E.value[1].addr,val:Math.floor((E.value[0].val+U)/256)}]}default:break}return t};var yr=e=>{let n=(v,k,M)=>{let C=k.length,P=M-C;for(let b=0;b<P;++b){if(v[b+C]!=0)continue;let _=!0,g=0,y=b+g;for(;g<C;++g,++y)if(v[y]!=k[g]){_=!1;break}if(_)return b}return-1},t=(v,k,M)=>{let P=v.map(({addr:b,val:_})=>[b,_]).sort((b,_)=>b[0]-_[0]).reduce((b,[_,g])=>{if(k.set(_,M),b.length==0)b.push({addr:_,value:g,count:1});else{let y=b.at(-1);y.value==g&&y.addr+y.count==_?++y.count:b.push({addr:_,value:g,count:1})}return b},[]);return Uint32Array.from(P.reduce((b,_)=>[...b,_.addr,_.count<<8|_.value],[]))},r=(v,k,M,C)=>{let P=(D,F)=>F*Math.floor((D+F-1)/F),b=v[0].buffer.byteLength,_=2+v.length*b,g=_+k.buffer.byteLength,y=g+M.buffer.byteLength,ne=y+C.buffer.byteLength,B=new ArrayBuffer(P(ne,32)),ee=new DataView(B);return ee.setUint16(0,v.length,!0),v.forEach((D,F)=>{let j=2+F*b;ee.setUint32(j,D[0],!0),ee.setUint32(j+4,D[1]+(D[0]>65535?y:g),!0),ee.setUint32(j+8,D[2],!0)}),new Uint8Array(B,_,k.length).set(k,0),new Uint8Array(B,g,M.buffer.byteLength).set(new Uint8Array(M.buffer),0),new Uint8Array(B,y,C.buffer.byteLength).set(new Uint8Array(C.buffer),0),new Uint8Array(B)},s=new TextEncoder,i=e.holes,l=[],a=[],o=[],u=(v,k)=>v|k<<16,d=(v,k)=>({id:v,data:k}),c=(v,k,M,C)=>{k.forEach(({label:P,value:b},_)=>{M.push(P),C&&o.push(P),l.push(d(u(v,_+1),b))})};i.forEach((v,k)=>{a.push(v.label),o.push(v.label);let M=[];c(k+1,v.keys,M,v.keys.length>1);let C=d(u(k+1,0),M);l.push(C)}),l.push(d(u(0,0),a)),l.sort((v,k)=>v.id-k.id),o.sort((v,k)=>k.length-v.length);let m=new Uint8Array(1024),p=new Uint16Array(128),x=new Uint32Array(4096),S={},A={str:0,cmd:0,idx:0},O=v=>{let k=C=>{let P=A.str,b=P+C.length+1;if(b>m.length){let _=new Uint8Array(Math.min(m.length*2,P+C.length+1024));_.set(m,0),_.set(C,P),m=_}else m.set(C,P);return A.str=b,P},M=C=>{if(S[C]!=null)return S[C];let P=s.encode(C),b=n(m,P,A.str);return b=b<0?k(P):b,S[C]=b,b};return v.map(M)},$=v=>{if(v.length==0)return 0;if(A.str>65535)throw new RangeError("string table is too big.");let k=A.idx,M=k+v.length;if(M>p.length){let C=new Uint16Array(Math.max(M+128,p.length*2));C.set(p,0),C.set(v,k),p=C}else p.set(v,k);return A.idx=M,k*2},E=v=>{let k=A.cmd,M=k+v.length;if(M>x.length){let C=new Uint32Array(Math.max(x.length*8,M));C.set(x,0),C.set(v,k),x=C}else x.set(v,k);return A.cmd=M,k*4};l.length>65535&&console.warn(`entry \u6570\u91CF\u8D85\u8FC7\u4E0A\u9650[game=${e.serial}]`);let U=new Map;O(o);let I=l.map(v=>{let{id:k,data:M}=v;if(k<65536){let C=k==0?O(M):O(M.length>1?M:[]),P=$(C);return Uint32Array.of(k,P,C.length)}else{let C=t(M,U,k&65535),P=E(C);return Uint32Array.of(k,P,C.length)}});return x=x.slice(0,A.cmd),m=m.slice(0,A.str),p=p.slice(0,A.idx),e.set_id=x.reduce((v,k)=>v^k,e.serial),e.offset=r(I,m,p,x),e.offset.byteLength},wn=e=>{let n=e.cheats,t=g=>String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255),r=g=>{let y=g.offset,ne=e.trunks[y],B=e.trunks[y+1];return e.source.slice(ne,B)},s=g=>g.status===3||g.status===0?!1:g.status===4?g.holes.length>0:!0,i=Array.from(n.keys()).filter(g=>(g&255)!=0).map(g=>{let ne=n.get(g)?.filter(s).map(B=>{let ee,xe;return B.status===4?(yr(B),xe=B.set_id,ee=B.offset):(B.status===1||B.status===2)&&(xe=B.set_id,ee=r(B)),{id:xe,bin:ee}})??[];return{serial:t(g),cheat:ne}});i.sort((g,y)=>g.serial.localeCompare(y.serial)),console.info(`valid rom has ${i.length}`);let l=new TextEncoder,a=new WeakMap,o=10240,u=(g,y)=>y*Math.floor((g+y-1)/y),d=(g,y)=>{let ne=a.get(g),B=(ne||0)+y.length;if(B>g.length){let ee=new(Object.getPrototypeOf(g)).constructor(u(B,o)*2);return ee.set(g,0),ee.set(y,ne),a.set(ee,B),ee}else return g.set(y,ne),a.set(g,B),g},c=g=>g.reduce((y,{serial:ne,cheat:B},ee,xe)=>{let le=ne.slice(0,-1),ve=a.get(y[1]);return le!=y[4]&&(ve>0&&y[2]-y[1].at(ve-1)>y[3]&&(y[3]=y[2]-y[1].at(ve-1)),y[0]=d(y[0],l.encode(le)),y[1]=d(y[1],[y[2]]),y[4]=le),y[2]=y[2]+B.length,ee+1==xe.length&&(y[2]-y[1].at(ve-1)>y[3]&&(y[3]=y[2]-y[1].at(ve-1)),y[1]=d(y[1],[y[2]])),y},[d(new Uint8Array(o),[]),d(new Uint16Array(o),[]),0,0,""]),m=(g,y)=>g.reduce((ne,{cheat:B,serial:ee})=>{let xe=ee.charCodeAt(3);return B.reduce((le,{id:ve,bin:D})=>{let F=le[2]+a.get(le[1]);return le[0]=d(le[0],[xe|F<<3,ve]),le[1]=d(le[1],D),le},ne)},[d(new Uint32Array(o),[]),d(new Uint8Array(o),[]),u(y,32)]),p=(g,...y)=>{for(let ne of y){let B=g[ne];g[ne]=B.slice(0,a.get(B))}return g},[x,S,A,O]=p(c(i),0,1),[$,E]=p(m(i,8+x.length+S.length*2+A*8),0,1);console.info(`name: ${x.length} cheats: ${A} maxl: ${O}`);let U=8,I=U+x.length,v=I+S.length*2,k=u(v+$.length*4,32),M=k+E.length,C=new ArrayBuffer(M),P=new DataView(C);P.setUint8(0,"A".charCodeAt(0)),P.setUint8(1,"C".charCodeAt(0)),P.setUint8(2,"L".charCodeAt(0)),P.setUint8(3,1);let b=x.length/3;P.setUint16(4,b,!0),P.setUint16(6,O,!0);let _=new Uint8Array(C);return _.set(x,U),_.set(new Uint8Array(S.buffer),I),_.set(new Uint8Array($.buffer),v),_.set(E,k),_},vn=(e,n,t)=>{let r=e.cheats.get(n),s=t.filter(a=>a.status===0);r!==void 0?s.forEach(a=>r?.push(a)):e.cheats.set(n,t);let i=n&4294967040,l=e.cheats.get(i);if(l!==void 0){s.forEach(o=>l?.push(o));let a=l.reduce((o,u,d)=>(o.set(u,d),o),new WeakMap);l?.sort((o,u)=>o.serial!==u.serial?o.serial-u.serial:a.get(o)-a.get(u))}else e.cheats.set(i,t.slice());return e};function xn(e,n){let t=n.toLowerCase(),r=n.toUpperCase();return Object.entries(e).filter(s=>{let[i,l]=s;return i.startsWith(r)?!0:l.file.toLowerCase().includes(t)})}var wr=V('<div class=" caches ">'),vr=V('<div class=" sources "><div class=prompt></div><div class=splitter></div><div class=option><input type=file></div><div class=option>'),xr=V('<div class=" fullname "><h3>'),kr=V('<div class=" newtag ">'),$r=V('<div class=" tags ">'),Nt=V('<div class=" acti ">'),Cr=V('<div class=" acts "><div class=" acti "></div><div class=" acti "></div><div class=" acti ">'),Sr=V('<div class=" cheats "><div><div class=" func "><div class="hole empty"></div><div class=" keys "><div class=" new ">'),Ar=V('<div class=" editor "><div class=" gamelist "><button class=" merge "></button><div class=" gamestitle "><span></span><input type=search></div></div><div class=" cheatlist ">'),_r=V('<span class=" notag ">'),Er=V("<div class=chtag>-"),Lr=V('<div class=" func "><div class=" hole "><span class=" cnt "></span><button class=expand></button></div><div class=" keys ">'),Tr=V('<div class=" key ">'),Mr=V('<div class=" published "><div class=" vscroll ">'),Ur=V('<div class=" cnt ">'),Nr=V('<div class=cart><div class=" image "><div class=" code "></div></div><div class=" info "><p class=" name ">'),Ir=V("<a>"),Or=V("<span><input type=text maxlength=8><em>"),It=V("<button type=button>"),Pr=V('<div class=" edit-hole "><div class=" htitle "><input type=search></div><div class=" hcontent "><div class=" keylist "><div class=" keyintro "></div><div class=" keytext "><a></a></div></div><div class=" details "><div class=" detailname "><input type=search></div><div class=" detailopts "><button></button><button></button><button></button></div><div class=" instset "><div class=" findaddr "><h4></h4></div><div class=" instdat "><table><thead><tr><th></th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>a</th><th>b</th><th>c</th><th>d</th><th>e</th><th>f</th></tr></thead><tbody></tbody></table></div></div></div></div><div class=" hoption "><div class=" left "><button type=button></button></div><div class=" right "><button type=button></button><button type=submit></button></div></div><div class=" searchtips "style=display:none><pre>'),Fr=V('<em class=" hdrag ">'),Dr=V("<div class=keytext><span>"),Hr=V('<em class=" hdrop ">'),jr=V("<tr><td>"),Rr=V("<tr><td>\u2026\u2026"),Vr=V("<td colspan=16>"),Br=V("<td><input type=text maxlength=2>"),qr=V("<div class=error>"),ze={caching:0,pending:1,editing:2},Gr=16*1024*1024,Ot=e=>e.split("").reduce((n,t,r)=>r<4?n|t.charCodeAt()<<24-r*8:n,0),zr=e=>{let n=String.fromCharCode(e&255),t="\u5176\u4ED6\u8BED\u79CD";switch(n){case"C":t="\u5B98\u65B9\u4E2D\u6587";break;case"J":t="\u65E5\u6587\u7248";break;case"E":t="\u82F1\u6587\u7248";break;case"F":t="\u6CD5\u8BED\u7248";break;case"S":t="\u897F\u73ED\u7259\u8BED";break;case"I":t="\u610F\u5927\u5229\u8BED";break;case"D":t="\u5FB7\u8BED\u7248";break;case"K":t="\u97E9\u6587\u7248";break;case"X":case"P":t="\u6B27\u6D32\u8BED\u79CD";break;default:t=t}return t},Yr=()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js",{scope:"/acl-editor/"})},Kr=(e,n)=>(e??"").replace(new RegExp("`([a-zA-Z][a-zA-Z0-9]*)`","g"),(t,r)=>n[r]??""),Wr="clipboard-key",nt=e=>{if(nt[e])return nt[e];let n=sessionStorage.getItem(e),[t,r]=Y(n);return Ie(()=>{let s=t();s?sessionStorage.setItem(e,s):sessionStorage.removeItem(e)}),nt[e]=[t,r],nt[e]},Xr=e=>{let[n,t]=Y(0),r=()=>{localStorage.setItem("ready","1"),location.reload()};return At(function s(){setTimeout(()=>{let i=n();i+1>100?r():(t(i+1),s())},125)}),(()=>{var s=wr();return w(s,T(oe.Progress,{class:"prog",color:"#ffc823",get percent(){return n()}})),s})()},Jr=e=>{let{ready:n,config:t}=e,r=R(()=>t().loader),[s,i]=Y(-1),l;return(()=>{var a=vr(),o=a.firstChild,u=o.nextSibling,d=u.nextSibling,c=d.firstChild,m=d.nextSibling;w(o,()=>r().title),w(u,T(Q,{get when(){return s()>0},get children(){return T(oe.Progress,{class:" bar ",color:"#FFC823",get percent(){return s()}})}})),d.$$click=()=>ni(l,i).then(n,()=>(0,oe.toast)({text:r().invalid,type:"error"})),w(d,()=>r().local,c);var p=l;return typeof p=="function"?Ge(p,c):l=c,c.style.setProperty("display","none"),et(m,"click",(0,oe.onlyonce)(()=>ri(r().stdfile,i).then(n)),!0),w(m,()=>r().remote),a})()},Zr=e=>{let{origin:n,config:t}=e,[r,s]=Y({}),[i,l]=Y(""),[a,o]=Y(0),[u,d]=Y([],{equals:!1}),[c,m]=Y(-1),[p,x]=Y(!1),[S,A]=Y([],{equals:!1}),[O,$]=Y(""),[E,U]=Y(""),I=R(()=>t().editor),v=R(()=>E()==""?Object.entries(r()):xn(r(),E())),k=R(()=>S().filter(D=>D.status!==3).map(({serial:D,status:F})=>F<<8|D&255));Ie(()=>{let D=n(),F=D.cheats.get(Ot(i()))??[];A(F);let j=F[a()];if(j)j.status===1&&bn(j,D.source,D.trunks,I()),d(j.holes);else{let W={offset:0,holes:[],status:0,serial:Ot(i())};F[a()]=W,d(W.holes)}});let M=D=>{l(D),o(0),m(-1),x(!1)},C=!1,P=0,b=(0,oe.debounce)(50)(()=>{C||(P=c(),m(-1)),window.removeEventListener("mouseup",b)});At(async()=>{let F=await(await fetch("/r/gbadb.json")).json();s(F)}),Oe(()=>{window.removeEventListener("mouseup",b)});let _="",g=null,y=(D,F)=>{if(F==c()){m(-1);return}let j=D.currentTarget,W=g.getBoundingClientRect();_=`right: 0.2rem; top: ${j.getBoundingClientRect().bottom+4-W.top+g.scrollTop}px;`,m(F),C=!0,setTimeout(()=>{C=!1,window.addEventListener("mouseup",b)},50)},ne=D=>F=>{D<0?d(W=>(W.push(F),W)):d(W=>(W[D]=F,W)),x(!1);let j=S()[a()];j.status==2?j.status=4:j.status==0&&(j.status=4,e.refresh(vn(n(),j.serial,S())))},B=()=>{let D=c();u()[D]===p()&&x(!1),D>=0&&(d(F=>(F.splice(D,1),F)),A(F=>(F[a()].status=4,F)))},ee=D=>()=>{let F=c(),j=F+D;(p()[F]===p()||p()[j]===p())&&x(!1),d(W=>{let Se=W[j];return W[j]=W[F],W[F]=Se,W}),A(W=>(W[a()].status=4,W))},xe=()=>{let D=u()[c()];$(JSON.stringify(D))},le=()=>{A(j=>(j[a()].status=4,j)),x(!1);let D=c(),F=JSON.parse(O());d(j=>(j.splice(D,0,F),j)),$("")},ve=()=>{let D=Date.now(),F=wn(n());console.log("spend time",Date.now()-D);let j=new Blob([F.buffer],{type:"application/octet-stream"}),W=document.createElement("a"),Se=URL.createObjectURL(j);W.href=Se,W.download="gba.acl",W.click(),setTimeout(()=>URL.revokeObjectURL(Se),1e4)};return(()=>{var D=Ar(),F=D.firstChild,j=F.firstChild,W=j.nextSibling,Se=W.firstChild,rt=Se.nextSibling,yt=F.nextSibling;return j.$$click=ve,w(j,()=>I().savefile),w(Se,()=>I().gamelist),rt.$$input=ke=>U(ke.target.value),w(F,T(Q,{get when(){return Object.keys(r()).length>0},get fallback(){return T(oe.Loading,{})},get children(){return T(Qr,{origin:n,config:I,games:v,val:i,udt:M,get fullsize(){return Object.keys(r()).length}})}}),null),w(yt,T(Q,{get when(){return r()[i()]},get children(){return[(()=>{var ke=xr(),se=ke.firstChild;return w(se,()=>r()[i()].file),ke})(),(()=>{var ke=$r();return w(ke,T(Q,{get when(){return Qe(()=>k().length>0)()&&!(k().length===1&&k().at(0)>>8===0)},get fallback(){return(()=>{var se=_r();return w(se,()=>I().emptycheat),se})()},get children(){return[T(Ce,{get each(){return k()},children:(se,f)=>(()=>{var L=Er(),z=L.firstChild;return L.$$click=()=>(o(f()),x(!1)),w(L,()=>String.fromCharCode(f()+"A".charCodeAt()),z),w(L,()=>zr(se),null),K(J=>{var de=a()===f(),ae=se>>8===4;return de!==J.e&&L.classList.toggle("curtag",J.e=de),ae!==J.t&&L.classList.toggle("edited",J.t=ae),J},{e:void 0,t:void 0}),L})()}),(()=>{var se=kr();return se.$$click=()=>(o(S().length),x(!1)),w(se,()=>I().baktips),se})()]}})),ke})(),(()=>{var ke=Sr(),se=ke.firstChild,f=se.firstChild,L=f.firstChild,z=L.nextSibling,J=z.firstChild,de=g;return typeof de=="function"?Ge(de,se):g=se,w(se,T(Ce,{get each(){return u()},children:(ae,Ae)=>(()=>{var Ee=Lr(),Te=Ee.firstChild,ie=Te.firstChild,Me=ie.nextSibling,it=Te.nextSibling;return w(Te,()=>ae.label,ie),w(ie,(()=>{var fe=Qe(()=>ae.keys.length>1);return()=>fe()?Kr(I().keytips,ae.keys):""})()),Me.$$click=fe=>y(fe,Ae()),w(it,T(Ce,{get each(){return ae.keys},children:fe=>(()=>{var _e=Tr();return w(_e,()=>fe.label),_e})()})),K(fe=>{var _e=c()==Ae(),Pe=I().expand;return _e!==fe.e&&Me.classList.toggle("using",fe.e=_e),Pe!==fe.t&&(Me.innerHTML=fe.t=Pe),fe},{e:void 0,t:void 0}),Ee})()}),f),J.$$click=()=>(P=-1,x({label:"",new:1,keys:[{label:I().defaultKey,value:[]}]})),w(J,()=>I().newtips),w(se,T(Q,{get when(){return c()>=0},get children(){var ae=Cr(),Ae=ae.firstChild,Ee=Ae.nextSibling,Te=Ee.nextSibling;return Ae.$$click=()=>x(u()[c()]),w(Ae,()=>I().editips),Ee.$$click=B,w(Ee,()=>I().deltips),Te.$$click=xe,w(Te,()=>I().cpytips),w(ae,T(Q,{get when(){return O().length>0},get children(){var ie=Nt();return ie.$$click=le,w(ie,()=>I().pastips),ie}}),null),w(ae,T(Q,{get when(){return c()>0},get children(){var ie=Nt();return et(ie,"click",ee(-1),!0),w(ie,()=>I().mvutips),ie}}),null),w(ae,T(Q,{get when(){return c()+1<u().length},get children(){var ie=Nt();return et(ie,"click",ee(1),!0),w(ie,()=>I().mvdtips),ie}}),null),K(ie=>qe(ae,c()<0?"":_,ie)),ae}}),null),ke})()]}})),w(D,T(Q,{get when(){return p()},get children(){return T(ti,{hole:p,config:I,exit:()=>x(!1),get apply(){return ne(P)}})}}),null),K(()=>we(rt,"placeholder",I().findgame)),D})()},Qr=e=>{let{origin:n,config:t,games:r,fullsize:s}=e,{val:i,udt:l}=e,a=0,o=null,u={},d=[i,l],c=null,m=0,[p,x]=Y(0),S=750,A=90,O=Math.ceil(window.innerHeight/A+10)*3,$=R(()=>r().slice(p(),O+p())),E=R(()=>`padding-top: ${A*p()}px; padding-bottom: ${A*(r().length-O-p())}px`),U=()=>{console.log("time to load screen shot",a,r().length),o=null};Ie(()=>{r().length>0&&!o&&(o=setTimeout(U,S))}),Ie(()=>{let v=r().length,k=i();if(c){let M=0;if(v===s){let C=r().findIndex(([_])=>_===k),P=getComputedStyle(c),b=parseFloat(P.height);C>Math.floor(b/A)&&(M=C*A-Math.floor(b/2)+A/2),M>c.scrollHeight-b&&(M=c.scrollHeight-b)}m!=v&&(m=v,x(0),c.scrollTo({top:M,behavior:"instant"}))}});let I=v=>{o&&clearTimeout(o),o=setTimeout(U,S);let k=v.scrollTop,{height:M}=v.getBoundingClientRect(),C=Math.floor(k/A),P=Math.floor((k+M)/A)+1,b=p(),_=b+O,g=O/3,y=b;(P>_-g-1||C<b+g)&&(y=(Math.floor(C/g)-1)*g,y<0?y=0:y+O>=r().length&&(y=r().length-O)),y!=b&&x(y),a=k};return(()=>{var v=Mr(),k=v.firstChild,M=c;return typeof M=="function"?Ge(M,v):c=v,v.addEventListener("scroll",C=>r().length>O&&I(C.currentTarget)),w(k,T(Q,{get when(){return $().length>0},get children(){return T(Ce,{get each(){return $()},children:C=>T(ei,{model:C,menu:d,origin:n})})}})),K(C=>qe(k,E(),C)),v})()},ei=e=>{let[n,t]=e.menu,r=R(()=>Ot(e.model[0])),s=i=>{if(i==0)return{"background-image":"url(/r/loadimg.svg)","background-size":"120px 80px"};let l=(i&255)-1,a=l%10,o=Math.floor(l/10);return{"background-image":`url(/r/agb.${i>>8}.webp)`,"background-position-x":`-${120*a}px`,"background-position-y":`-${80*o}px`}};return(()=>{var i=Nr(),l=i.firstChild,a=l.firstChild,o=l.nextSibling,u=o.firstChild;return i.$$click=t,i.$$clickData=e.model[0],w(a,()=>e.model[0]),w(l,T(Q,{get when(){return e.origin().cheats.has(r())},get children(){var d=Ur();return w(d,()=>e.origin().cheats.get(r()).length),d}}),null),w(u,()=>e.model[1].file),K(d=>{var c=e.model[0]==n(),m=s(e.model[1].g);return c!==d.e&&i.classList.toggle("using",d.e=c),d.t=qe(l,m,d.t),d},{e:void 0,t:void 0}),i})()},ti=e=>{let n=e.hole,t=e.config,r,s=(f,L)=>(f[L.addr]=L.val,f),i=f=>f-f%16,l=f=>{let L=new Set;for(let z of f)L.add(i(z.addr));return Array.from(L).sort()},a=(f,L)=>new Array((L-f)/16).fill(f).map((z,J)=>z+J*16),[o,u]=Y(0),[d,c]=Y(-1),[m,p]=Y(""),[x,S]=Y([],{equals:!1}),[A,O]=nt(Wr),$=R(()=>yn(n(),x())),E=R(()=>$().keys?.length===0?{}:$().keys[o()]),U=R(()=>{let f=parseInt(m(),16);return isNaN(f)?E().value?l(E().value):[]:f<33554432?[i(f)]:f<=33816575?a(i(f),Math.min(i(f)+16*5,i(33816575))):f<50331648?[i(f)]:f<=50364415?a(i(f),Math.min(i(f)+16*5,i(50364415))):[i(f)]}),I=R(()=>E().value?E().value.reduce(s,{}):{}),v=R(()=>($().keys??[]).every(f=>f.value?.length>0)&&$().label.length>0),k=f=>33554432<=f&&f<33816575||50331648<=f&&f<50364415,M=f=>f.target.value=f.target.value.replace(/[^0-9a-fA-F]/g,""),C=f=>{r=M(f)},P=f=>f.length<4096&&f[0].value.length<2?f[0].value.length==1?f.length<256:f[0].value.length==2?Math.abs(f[0].value[0].addr-f[0].value[1].addr)===1:!1:!1,b=f=>{S(L=>(L.push($e(te.Title,f.target.value)),L))},_=f=>{S(L=>(L.push($e(te.Label,[o(),f.target.value])),L))},g=()=>{let f=o();f>=$().keys.length-1&&u($().keys.length-2),S(L=>(L.push($e(te.Throw,f)),L))},y=(f,L)=>{let z=parseInt(L.target.value,16);S(J=>(J.push($e(te.Value,[o(),f,z])),J))},ne=()=>{let f=A();Ve(()=>{O(""),S(L=>(L.push($e(te.Paste,[o(),f])),L))})},B=()=>{let f=JSON.stringify($().keys[o()]);O(f)},ee=()=>{let f=$().keys.length;Ve(()=>{S(L=>(L.push($e(te.Spawn,`\u79D8\u6280${f+1}`)),L)),u(f)})},xe=()=>{let f=$().keys.length;Ve(()=>{S(L=>(L.push($e(te.Spawn,`\u79D8\u6280${$().keys.length+1}`)),L.push($e(te.Paste,[$().keys.length,A()])),L)),O(""),u(f)})},le=f=>f.key==="Enter"&&F(),ve=f=>{let L=document.body.querySelector(".searchtips");L.style.display="none",f.target.removeEventListener("blur",ve),f.target.removeEventListener("input",C),f.target.removeEventListener("keydown",le)},D=f=>{let L=document.body.querySelector(".searchtips");L.style.display="block",f.target.addEventListener("blur",ve),f.target.addEventListener("input",C),f.target.addEventListener("keydown",le)},F=()=>{p(r)},j=f=>{f.currentTarget.removeEventListener("dragend",j),c(-1)},W=(f,L)=>{let z=L.currentTarget,J=z.parentElement,de=J.getBoundingClientRect();L.dataTransfer.setDragImage(J,L.pageX-de.left,L.pageY-de.top),z.addEventListener("dragend",j),c(f)},Se=f=>{f.preventDefault(),f.dataTransfer.dropEffect="move"},rt=(f,L)=>{L.preventDefault();let z=o(),J=d();Ve(()=>{S(de=>(de.push($e(te.Index,[J,f])),de)),Math.min(J,f)<=z&&z<=Math.max(J,f)&&(J===z?u(f):J<f?u(z-1):u(z+1))})},yt=async()=>{let f=await navigator.clipboard.readText();if(f?.length>0){let L=f.split(`
`).map(z=>z.replace(/\\s/g,""));S(z=>(z.push($e(te.BatAN,L)),z))}},ke=async()=>{S(f=>(f.push($e(te.BatIP,null)),f))},se=async()=>{let f=o(),L=x().at(-1);Ve(()=>{L?.t===te.Spawn&&1+f===$().keys.length&&u(0),S(z=>(z.pop(),z))})};return T(pt,{get children(){var f=Pr(),L=f.firstChild,z=L.firstChild,J=L.nextSibling,de=J.firstChild,ae=de.firstChild,Ae=ae.nextSibling,Ee=Ae.firstChild,Te=de.nextSibling,ie=Te.firstChild,Me=ie.firstChild,it=ie.nextSibling,fe=it.firstChild,_e=fe.nextSibling,Pe=_e.nextSibling,$n=it.nextSibling,wt=$n.firstChild,Cn=wt.firstChild,Pt=wt.nextSibling,Sn=Pt.firstChild,Ft=Sn.firstChild,An=Ft.firstChild,_n=An.firstChild,En=Ft.nextSibling,Dt=J.nextSibling,vt=Dt.firstChild,xt=vt.firstChild,Ht=vt.nextSibling,st=Ht.firstChild,Ye=st.nextSibling,Ln=Dt.nextSibling,Tn=Ln.firstChild;return z.addEventListener("blur",b),w(ae,()=>t().keyname),w(de,T(Ce,{get each(){return $().keys??[]},children:(N,be)=>(()=>{var he=Dr(),ge=he.firstChild;return ge.$$click=u,ge.$$clickData=be(),w(ge,()=>N.label),w(he,T(Q,{get when(){return d()<0||d()===be()},get fallback(){return(()=>{var X=Hr();return X.addEventListener("drop",me=>rt(be(),me)),X.addEventListener("dragover",Se),K(()=>X.innerHTML=t().dest),X})()},get children(){var X=Fr();return X.addEventListener("dragstart",me=>W(be(),me)),we(X,"draggable",!0),K(()=>X.innerHTML=t().drag),X}}),null),K(X=>{var me=be()===o(),Ue=N.value?.length===0,Le=N.value?.length==0?t().unusabletip:"";return me!==X.e&&he.classList.toggle("selected",X.e=me),Ue!==X.t&&he.classList.toggle("unusable",X.t=Ue),Le!==X.a&&we(ge,"title",X.a=Le),X},{e:void 0,t:void 0,a:void 0}),he})()}),Ae),Ee.$$click=ee,w(Ee,()=>t().addkey),w(Ae,T(Q,{get when(){return A()},get children(){return["\xA0\xA0",(()=>{var N=Ir();return N.$$click=xe,w(N,()=>t().pastekey),N})()]}}),null),Me.addEventListener("blur",_),fe.$$click=B,w(fe,()=>t().optcopy),_e.$$click=ne,w(_e,()=>t().optpaste),Pe.$$click=g,w(Pe,()=>t().optdelete),w(Cn,()=>t().instips),w(wt,T(Q,{get when(){return m().length==0},get fallback(){return(()=>{var N=It();return N.$$click=()=>(r="",p("")),w(N,()=>t().goback),N})()},get children(){var N=Or(),be=N.firstChild,he=be.nextSibling;return be.addEventListener("focus",D),he.$$click=F,K(ge=>{var X=t().findaddr,me=t().search;return X!==ge.e&&we(be,"placeholder",ge.e=X),me!==ge.t&&(he.innerHTML=ge.t=me),ge},{e:void 0,t:void 0}),N}}),null),w(_n,()=>t().coladdr),w(En,T(Ce,{get each(){return U()},children:(N,be)=>[(()=>{var he=jr(),ge=he.firstChild;return w(ge,()=>N.toString(16).padStart(8,"0")),w(he,T(Q,{get when(){return k(N)},get fallback(){return(()=>{var X=Vr();return w(X,()=>t().badaddr),X})()},get children(){return T(Ce,{get each(){return new Array(16).fill(0)},children:(X,me)=>(()=>{var Ue=Br(),Le=Ue.firstChild;return Le.addEventListener("blur",ot=>y(me()+N,ot)),Le.$$input=M,K(()=>Le.value=I()[me()+N]?.toString(16).padStart(2,"0")??""),Ue})()})}}),null),he})(),T(Q,{get when(){return U()[be()+1]>N+16},get children(){return Rr()}})]})),w(Pt,T(Q,{get when(){return Qe(()=>E().value.length===0)()&&U().length===0},get children(){return T(oe.Markdown,{get body(){return t().editvaltip},class:" emptytip "})}}),null),xt.$$click=yt,w(xt,()=>t().batchload),w(vt,T(Q,{get when(){return Qe(()=>!!$().keys)()?P($().keys):!1},get children(){var N=It();return N.$$click=ke,w(N,()=>t().batchcalc),K(()=>we(N,"title",t().batchcalctip)),N}}),null),w(Ht,T(Q,{get when(){return x().length>0},get children(){var N=It();return N.$$click=se,w(N,()=>t().optundo),N}}),st),et(st,"click",e.exit,!0),w(st,()=>t().endEdit),Ye.$$click=e.apply,Ye.$$clickData=$(),w(Ye,()=>t().useEdit),w(Tn,()=>t().searchtip),K(N=>{var be=t().holename,he=$().keys.length===1,ge=$().keys.length===1?t().nametip:"",X=!A(),me=$().keys.length===1,Ue=$().keys.length===1?t().actiontip:"",Le=t().batchloadtip,ot=!v(),jt=v()?"":t().nosavetip;return be!==N.e&&we(z,"placeholder",N.e=be),he!==N.t&&(Me.disabled=N.t=he),ge!==N.a&&we(Me,"title",N.a=ge),X!==N.o&&(_e.disabled=N.o=X),me!==N.i&&(Pe.disabled=N.i=me),Ue!==N.n&&we(Pe,"title",N.n=Ue),Le!==N.s&&we(xt,"title",N.s=Le),ot!==N.h&&(Ye.disabled=N.h=ot),jt!==N.r&&we(Ye,"title",N.r=jt),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),K(()=>z.value=$().label??""),K(()=>Me.value=E().label),f}})},ni=async(e,n)=>{let t=await(0,oe.selectFile)(e),r=t.stream().getReader(),s=await kn(r,n,t.size);return Ut(s)},ri=async(e,n)=>{let t=await fetch(e),r=t.body.pipeThrough(new DecompressionStream("gzip")).getReader(),s=await kn(r,n,t.headers.get("x-size"));return Ut(s)},kn=(e,n,t)=>{t=Number(t);let r=t==0?Gr:t,s=new Uint8Array(r),i=0,l=({done:a,value:o})=>a?(s=s.slice(0,i),n(100),Promise.resolve()):(s.set(o,i),i+=o.byteLength,n(100*(1-Math.pow(i/r-1,4))),e.read().then(l));return e.read().then(l).then(()=>s)},ii=()=>{let[e]=Qt(()=>fetch("/r/acl-editor.json").then(l=>l.json())),n=localStorage.getItem("ready"),[t,r]=Y(n!=null?ze.pending:ze.caching),[s,i]=Y({},{equals:!1});return T(ft,{get fallback(){return T(oe.Loading,{})},get children(){return[T(De,{get when(){return e.state=="errored"},get children(){var l=qr();return w(l,()=>e.error.message),l}}),T(De,{get when(){return e.state=="ready"},get children(){return T(ft,{fallback:"nothing",get children(){return[T(De,{get when(){return t()==ze.caching},get children(){return T(Xr,{config:e})}}),T(De,{get when(){return t()==ze.pending},get children(){return T(Jr,{config:e,ready:l=>(i(l),r(ze.editing))})}}),T(De,{get when(){return t()==ze.editing},get children(){return T(Zr,{config:e,origin:s,refresh:i})}})]}})}})]}})};(0,oe.main)(ii);Yr();gt(["click","input"]);})();
