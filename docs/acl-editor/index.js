(()=>{var Mn=Object.create;var Rt=Object.defineProperty;var Un=Object.getOwnPropertyDescriptor;var Nn=Object.getOwnPropertyNames;var In=Object.getPrototypeOf,On=Object.prototype.hasOwnProperty;var Vt=(e,n)=>()=>(e&&(n=e(e=0)),n);var Pn=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var Fn=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of Nn(n))!On.call(e,o)&&o!==t&&Rt(e,o,{get:()=>n[o],enumerable:!(r=Un(n,o))||r.enumerable});return e};var Dn=(e,n,t)=>(t=e!=null?Mn(In(e)):{},Fn(n||!e||!e.__esModule?Rt(t,"default",{value:e,enumerable:!0}):t,e));function Bt(e){let n=String(e),t=n.length-1;return q.context.id+(t?String.fromCharCode(96+t):"")+n}function Ct(e){q.context=e}function Hn(){return{...q.context,id:q.getNextContextId(),count:0}}function je(e,n){let t=G,r=H,o=e.length===0,i=n===void 0?r:n,l=o?Zt:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=o?e:()=>e(()=>ue(()=>Ne(l)));H=l,G=null;try{return ye(a,!0)}finally{G=t,H=r}}function Y(e,n){n=n?Object.assign({},at,n):at;let t={value:e,observers:null,observerSlots:null,comparator:n.equals||void 0},r=o=>(typeof o=="function"&&(h&&h.running&&h.sources.has(t)?o=o(t.tValue):o=o(t.value)),rn(t,o));return[nn.bind(t),r]}function Gt(e,n,t){let r=Je(e,n,!0,pe);Re&&h&&h.running?re.push(r):Fe(r)}function K(e,n,t){let r=Je(e,n,!1,pe);Re&&h&&h.running?re.push(r):Fe(r)}function Ie(e,n,t){Jt=Yn;let r=Je(e,n,!1,pe),o=We&&tn(We);o&&(r.suspense=o),(!t||!t.render)&&(r.user=!0),ce?ce.push(r):Fe(r)}function R(e,n,t){t=t?Object.assign({},at,t):at;let r=Je(e,n,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,Re&&h&&h.running?(r.tState=pe,re.push(r)):Fe(r),nn.bind(r)}function Vn(e){return e&&typeof e=="object"&&"then"in e}function Qt(e,n,t){let r,o,i;typeof n=="function"?(r=e,o=n,i=t||{}):(r=!0,o=e,i=n||{});let l=null,a=$t,s=null,u=!1,d=!1,c="initialValue"in i,m=typeof r=="function"&&R(r),p=new Set,[x,S]=(i.storage||Y)(i.initialValue),[_,O]=Y(void 0),[$,E]=Y(void 0,{equals:!1}),[U,I]=Y(c?"ready":"unresolved");q.context&&(s=q.getNextContextId(),i.ssrLoadFrom==="initial"?a=i.initialValue:q.load&&q.has(s)&&(a=q.load(s)));function w(b,A,v,g){return l===b&&(l=null,g!==void 0&&(c=!0),(b===a||A===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(g,{value:A})),a=$t,h&&b&&u?(h.promises.delete(b),u=!1,ye(()=>{h.running=!0,k(A,v)},!1)):k(A,v)),A}function k(b,A){ye(()=>{A===void 0&&S(()=>b),I(A!==void 0?"errored":c?"ready":"unresolved"),O(A);for(let v of p.keys())v.decrement();p.clear()},!1)}function M(){let b=We&&tn(We),A=x(),v=_();if(v!==void 0&&!l)throw v;return G&&!G.user&&b&&Gt(()=>{$(),l&&(b.resolved&&h&&u?h.promises.add(l):p.has(b)||(b.increment(),p.add(b)))}),A}function C(b=!0){if(b!==!1&&d)return;d=!1;let A=m?m():r;if(u=h&&h.running,A==null||A===!1){w(l,ue(x));return}h&&l&&h.promises.delete(l);let v,g=a!==$t?a:ue(()=>{try{return o(A,{value:x(),refetching:b})}catch(W){v=W}});if(v!==void 0){w(l,void 0,lt(v),A);return}else if(!Vn(g))return w(l,g,void 0,A),g;return l=g,"v"in g?(g.s===1?w(l,g.v,void 0,A):w(l,void 0,lt(g.v),A),g):(d=!0,queueMicrotask(()=>d=!1),ye(()=>{I(c?"refreshing":"pending"),E()},!1),g.then(W=>w(g,W,void 0,A),W=>w(g,void 0,lt(W),A)))}Object.defineProperties(M,{state:{get:()=>U()},error:{get:()=>_()},loading:{get(){let b=U();return b==="pending"||b==="refreshing"}},latest:{get(){if(!c)return M();let b=_();if(b&&!l)throw b;return x()}}});let P=H;return m?Gt(()=>(P=H,C(!1))):C(!1),[M,{refetch:b=>_t(P,()=>C(b)),mutate:S}]}function en(e,n=Xt,t){let r=new Map,o=Je(i=>{let l=e();for(let[a,s]of r.entries())if(n(a,l)!==n(a,i))for(let u of s.values())u.state=pe,u.pure?re.push(u):ce.push(u);return l},void 0,!0,pe);return Fe(o),i=>{let l=G;if(l){let a;(a=r.get(i))?a.add(l):r.set(i,a=new Set([l])),Oe(()=>{a.delete(l),!a.size&&r.delete(i)})}return n(i,h&&h.running&&h.sources.has(o)?o.tValue:o.value)}}function Ve(e){return ye(e,!1)}function ue(e){if(!He&&G===null)return e();let n=G;G=null;try{return He?He.untrack(e):e()}finally{G=n}}function At(e){Ie(()=>ue(e))}function Oe(e){return H===null||(H.cleanups===null?H.cleanups=[e]:H.cleanups.push(e)),e}function dt(){return H}function _t(e,n){let t=H,r=G;H=e,G=null;try{return ye(n,!0)}catch(o){ft(o)}finally{H=t,G=r}}function Bn(e){if(h&&h.running)return e(),h.done;let n=G,t=H;return Promise.resolve().then(()=>{G=n,H=t;let r;return(Re||We)&&(r=h||(h={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(o=>r.resolve=o)),r.running=!0),ye(e,!1),G=H=null,r?r.done:void 0})}function tn(e){let n;return H&&H.context&&(n=H.context[e.id])!==void 0?n:e.defaultValue}function qn(e){let n=R(e),t=R(()=>St(n()));return t.toArray=()=>{let r=t();return Array.isArray(r)?r:r!=null?[r]:[]},t}function nn(){let e=h&&h.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===pe)Fe(this);else{let n=re;re=null,ye(()=>ct(this),!1),re=n}if(G){let n=this.observers?this.observers.length:0;G.sources?(G.sources.push(this),G.sourceSlots.push(n)):(G.sources=[this],G.sourceSlots=[n]),this.observers?(this.observers.push(G),this.observerSlots.push(G.sources.length-1)):(this.observers=[G],this.observerSlots=[G.sources.length-1])}return e&&h.sources.has(this)?this.tValue:this.value}function rn(e,n,t){let r=h&&h.running&&h.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,n)){if(h){let o=h.running;(o||!t&&h.sources.has(e))&&(h.sources.add(e),e.tValue=n),o||(e.value=n)}else e.value=n;e.observers&&e.observers.length&&ye(()=>{for(let o=0;o<e.observers.length;o+=1){let i=e.observers[o],l=h&&h.running;l&&h.disposed.has(i)||((l?!i.tState:!i.state)&&(i.pure?re.push(i):ce.push(i),i.observers&&sn(i)),l?i.tState=pe:i.state=pe)}if(re.length>1e6)throw re=[],new Error},!1)}return n}function Fe(e){if(!e.fn)return;Ne(e);let n=ut;Yt(e,h&&h.running&&h.sources.has(e)?e.tValue:e.value,n),h&&!h.running&&h.sources.has(e)&&queueMicrotask(()=>{ye(()=>{h&&(h.running=!0),G=H=e,Yt(e,e.tValue,n),G=H=null},!1)})}function Yt(e,n,t){let r,o=H,i=G;G=H=e;try{r=e.fn(n)}catch(l){return e.pure&&(h&&h.running?(e.tState=pe,e.tOwned&&e.tOwned.forEach(Ne),e.tOwned=void 0):(e.state=pe,e.owned&&e.owned.forEach(Ne),e.owned=null)),e.updatedAt=t+1,ft(l)}finally{G=i,H=o}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?rn(e,r,!0):h&&h.running&&e.pure?(h.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=t)}function Je(e,n,t,r=pe,o){let i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:H,context:H?H.context:null,pure:t};if(h&&h.running&&(i.state=0,i.tState=r),H===null||H!==Zt&&(h&&h.running&&H.pure?H.tOwned?H.tOwned.push(i):H.tOwned=[i]:H.owned?H.owned.push(i):H.owned=[i]),He&&i.fn){let[l,a]=Y(void 0,{equals:!1}),s=He.factory(i.fn,a);Oe(()=>s.dispose());let u=()=>Bn(a).then(()=>d.dispose()),d=He.factory(i.fn,u);i.fn=c=>(l(),h&&h.running?d.track(c):s.track(c))}return i}function Xe(e){let n=h&&h.running;if((n?e.tState:e.state)===0)return;if((n?e.tState:e.state)===Ke)return ct(e);if(e.suspense&&ue(e.suspense.inFallback))return e.suspense.effects.push(e);let t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ut);){if(n&&h.disposed.has(e))return;(n?e.tState:e.state)&&t.push(e)}for(let r=t.length-1;r>=0;r--){if(e=t[r],n){let o=e,i=t[r+1];for(;(o=o.owner)&&o!==i;)if(h.disposed.has(o))return}if((n?e.tState:e.state)===pe)Fe(e);else if((n?e.tState:e.state)===Ke){let o=re;re=null,ye(()=>ct(e,t[0]),!1),re=o}}}function ye(e,n){if(re)return e();let t=!1;n||(re=[]),ce?t=!0:ce=[],ut++;try{let r=e();return Gn(t),r}catch(r){t||(ce=null),re=null,ft(r)}}function Gn(e){if(re&&(Re&&h&&h.running?zn(re):on(re),re=null),e)return;let n;if(h){if(!h.promises.size&&!h.queue.size){let r=h.sources,o=h.disposed;ce.push.apply(ce,h.effects),n=h.resolve;for(let i of ce)"tState"in i&&(i.state=i.tState),delete i.tState;h=null,ye(()=>{for(let i of o)Ne(i);for(let i of r){if(i.value=i.tValue,i.owned)for(let l=0,a=i.owned.length;l<a;l++)Ne(i.owned[l]);i.tOwned&&(i.owned=i.tOwned),delete i.tValue,delete i.tOwned,i.tState=0}zt(!1)},!1)}else if(h.running){h.running=!1,h.effects.push.apply(h.effects,ce),ce=null,zt(!0);return}}let t=ce;ce=null,t.length&&ye(()=>Jt(t),!1),n&&n()}function on(e){for(let n=0;n<e.length;n++)Xe(e[n])}function zn(e){for(let n=0;n<e.length;n++){let t=e[n],r=h.queue;r.has(t)||(r.add(t),Re(()=>{r.delete(t),ye(()=>{h.running=!0,Xe(t)},!1),h&&(h.running=!1)}))}}function Yn(e){let n,t=0;for(n=0;n<e.length;n++){let r=e[n];r.user?e[t++]=r:Xe(r)}if(q.context){if(q.count){q.effects||(q.effects=[]),q.effects.push(...e.slice(0,t));return}Ct()}for(q.effects&&(q.done||!q.count)&&(e=[...q.effects,...e],t+=q.effects.length,delete q.effects),n=0;n<t;n++)Xe(e[n])}function ct(e,n){let t=h&&h.running;t?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){let o=e.sources[r];if(o.sources){let i=t?o.tState:o.state;i===pe?o!==n&&(!o.updatedAt||o.updatedAt<ut)&&Xe(o):i===Ke&&ct(o,n)}}}function sn(e){let n=h&&h.running;for(let t=0;t<e.observers.length;t+=1){let r=e.observers[t];(n?!r.tState:!r.state)&&(n?r.tState=Ke:r.state=Ke,r.pure?re.push(r):ce.push(r),r.observers&&sn(r))}}function Ne(e){let n;if(e.sources)for(;e.sources.length;){let t=e.sources.pop(),r=e.sourceSlots.pop(),o=t.observers;if(o&&o.length){let i=o.pop(),l=t.observerSlots.pop();r<o.length&&(i.sourceSlots[l]=r,o[r]=i,t.observerSlots[r]=l)}}if(e.tOwned){for(n=e.tOwned.length-1;n>=0;n--)Ne(e.tOwned[n]);delete e.tOwned}if(h&&h.running&&e.pure)ln(e,!0);else if(e.owned){for(n=e.owned.length-1;n>=0;n--)Ne(e.owned[n]);e.owned=null}if(e.cleanups){for(n=e.cleanups.length-1;n>=0;n--)e.cleanups[n]();e.cleanups=null}h&&h.running?e.tState=0:e.state=0}function ln(e,n){if(n||(e.tState=0,h.disposed.add(e)),e.owned)for(let t=0;t<e.owned.length;t++)ln(e.owned[t])}function lt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Kt(e,n,t){try{for(let r of n)r(e)}catch(r){ft(r,t&&t.owner||null)}}function ft(e,n=H){let t=qt&&n&&n.context&&n.context[qt],r=lt(e);if(!t)throw r;ce?ce.push({fn(){Kt(r,t,n)},state:pe}):Kt(r,t,n)}function St(e){if(typeof e=="function"&&!e.length)return St(e());if(Array.isArray(e)){let n=[];for(let t=0;t<e.length;t++){let r=St(e[t]);Array.isArray(r)?n.push.apply(n,r):n.push(r)}return n}return e}function Wt(e){for(let n=0;n<e.length;n++)e[n]()}function Wn(e,n,t={}){let r=[],o=[],i=[],l=0,a=n.length>1?[]:null;return Oe(()=>Wt(i)),()=>{let s=e()||[],u=s.length,d,c;return s[Rn],ue(()=>{let p,x,S,_,O,$,E,U,I;if(u===0)l!==0&&(Wt(i),i=[],r=[],o=[],l=0,a&&(a=[])),t.fallback&&(r=[Kn],o[0]=je(w=>(i[0]=w,t.fallback())),l=1);else if(l===0){for(o=new Array(u),c=0;c<u;c++)r[c]=s[c],o[c]=je(m);l=u}else{for(S=new Array(u),_=new Array(u),a&&(O=new Array(u)),$=0,E=Math.min(l,u);$<E&&r[$]===s[$];$++);for(E=l-1,U=u-1;E>=$&&U>=$&&r[E]===s[U];E--,U--)S[U]=o[E],_[U]=i[E],a&&(O[U]=a[E]);for(p=new Map,x=new Array(U+1),c=U;c>=$;c--)I=s[c],d=p.get(I),x[c]=d===void 0?-1:d,p.set(I,c);for(d=$;d<=E;d++)I=r[d],c=p.get(I),c!==void 0&&c!==-1?(S[c]=o[d],_[c]=i[d],a&&(O[c]=a[d]),c=x[c],p.set(I,c)):i[d]();for(c=$;c<u;c++)c in S?(o[c]=S[c],i[c]=_[c],a&&(a[c]=O[c],a[c](c))):o[c]=je(m);o=o.slice(0,l=u),r=s.slice(0)}return o});function m(p){if(i[c]=p,a){let[x,S]=Y(c);return a[c]=S,n(s[c],x)}return n(s[c])}}}function T(e,n){if(Xn&&q.context){let t=q.context;Ct(Hn());let r=ue(()=>e(n||{}));return Ct(t),r}return ue(()=>e(n||{}))}function Ce(e){let n="fallback"in e&&{fallback:()=>e.fallback};return R(Wn(()=>e.each,e.children,n||void 0))}function ee(e){let n=e.keyed,t=R(()=>e.when,void 0,void 0),r=n?t:R(t,void 0,{equals:(o,i)=>!o==!i});return R(()=>{let o=r();if(o){let i=e.children;return typeof i=="function"&&i.length>0?ue(()=>i(n?o:()=>{if(!ue(r))throw an("Show");return t()})):i}return e.fallback},void 0,void 0)}function ht(e){let n=qn(()=>e.children),t=R(()=>{let r=n(),o=Array.isArray(r)?r:[r],i=()=>{};for(let l=0;l<o.length;l++){let a=l,s=o[l],u=i,d=R(()=>u()?void 0:s.when,void 0,void 0),c=s.keyed?d:R(d,void 0,{equals:(m,p)=>!m==!p});i=()=>u()||(c()?[a,d,s]:void 0)}return i});return R(()=>{let r=t()();if(!r)return e.fallback;let[o,i,l]=r,a=l.children;return typeof a=="function"&&a.length>0?ue(()=>a(l.keyed?i():()=>{if(ue(t)()?.[0]!==o)throw an("Match");return i()})):a},void 0,void 0)}function De(e){return e}var q,jn,Xt,si,Rn,li,at,qt,Jt,pe,Ke,Zt,$t,H,h,Re,He,G,re,ce,ut,ai,zt,We,Kn,Xn,an,Ze=Vt(()=>{q={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Bt(this.context.count)},getNextContextId(){return Bt(this.context.count++)}};jn=!1,Xt=(e,n)=>e===n,si=Symbol("solid-proxy"),Rn=Symbol("solid-track"),li=Symbol("solid-dev-component"),at={equals:Xt},qt=null,Jt=on,pe=1,Ke=2,Zt={owned:null,cleanups:null,context:null,owner:null},$t={},H=null,h=null,Re=null,He=null,G=null,re=null,ce=null,ut=0;[ai,zt]=Y(!1);Kn=Symbol("fallback");Xn=!1;an=e=>`Stale read from <${e}>.`});function Zn(e,n,t){let r=t.length,o=n.length,i=r,l=0,a=0,s=n[o-1].nextSibling,u=null;for(;l<o||a<i;){if(n[l]===t[a]){l++,a++;continue}for(;n[o-1]===t[i-1];)o--,i--;if(o===l){let d=i<r?a?t[a-1].nextSibling:t[i-a]:s;for(;a<i;)e.insertBefore(t[a++],d)}else if(i===a)for(;l<o;)(!u||!u.has(n[l]))&&n[l].remove(),l++;else if(n[l]===t[i-1]&&t[a]===n[o-1]){let d=n[--o].nextSibling;e.insertBefore(t[a++],n[l++].nextSibling),e.insertBefore(t[--i],d),n[o]=t[i]}else{if(!u){u=new Map;let c=a;for(;c<i;)u.set(t[c],c++)}let d=u.get(n[l]);if(d!=null)if(a<d&&d<i){let c=l,m=1,p;for(;++c<o&&c<i&&!((p=u.get(n[c]))==null||p!==d+m);)m++;if(m>d-a){let x=n[l];for(;a<d;)e.insertBefore(t[a++],x)}else e.replaceChild(t[a++],n[l++])}else l++;else n[l++].remove()}}}function Lt(e,n,t,r={}){let o;return je(i=>{o=i,n===document?e():y(n,e(),n.firstChild?null:void 0,t)},r.owner),()=>{o(),n.textContent=""}}function V(e,n,t,r){let o,i=()=>{let a=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=e,t?a.content.firstChild.firstChild:r?a.firstChild:a.content.firstChild},l=n?()=>ue(()=>document.importNode(o||(o=i()),!0)):()=>(o||(o=i())).cloneNode(!0);return l.cloneNode=l,l}function mt(e,n=window.document){let t=n[cn]||(n[cn]=new Set);for(let r=0,o=e.length;r<o;r++){let i=e[r];t.has(i)||(t.add(i),n.addEventListener(i,Qn))}}function we(e,n,t){Mt(e)||(t==null?e.removeAttribute(n):e.setAttribute(n,t))}function pt(e,n){Mt(e)||(n==null?e.removeAttribute("class"):e.className=n)}function et(e,n,t,r){if(r)Array.isArray(t)?(e[`$$${n}`]=t[0],e[`$$${n}Data`]=t[1]):e[`$$${n}`]=t;else if(Array.isArray(t)){let o=t[0];e.addEventListener(n,t[0]=i=>o.call(e,t[1],i))}else e.addEventListener(n,t,typeof t!="function"&&t)}function Tt(e,n,t={}){let r=Object.keys(n||{}),o=Object.keys(t),i,l;for(i=0,l=o.length;i<l;i++){let a=o[i];!a||a==="undefined"||n[a]||(un(e,a,!1),delete t[a])}for(i=0,l=r.length;i<l;i++){let a=r[i],s=!!n[a];!a||a==="undefined"||t[a]===s||!s||(un(e,a,!0),t[a]=s)}return t}function qe(e,n,t){if(!n)return t?we(e,"style"):n;let r=e.style;if(typeof n=="string")return r.cssText=n;typeof t=="string"&&(r.cssText=t=void 0),t||(t={}),n||(n={});let o,i;for(i in t)n[i]==null&&r.removeProperty(i),delete t[i];for(i in n)o=n[i],o!==t[i]&&(r.setProperty(i,o),t[i]=o);return t}function Ge(e,n,t){return ue(()=>e(n,t))}function y(e,n,t,r){if(t!==void 0&&!r&&(r=[]),typeof n!="function")return gt(e,n,r,t);K(o=>gt(e,n(),o,t),r)}function Mt(e){return!!q.context&&!q.done&&(!e||e.isConnected)}function un(e,n,t){let r=n.trim().split(/\s+/);for(let o=0,i=r.length;o<i;o++)e.classList.toggle(r[o],t)}function Qn(e){if(q.registry&&q.events&&q.events.find(([s,u])=>u===e))return;let n=e.target,t=`$$${e.type}`,r=e.target,o=e.currentTarget,i=s=>Object.defineProperty(e,"target",{configurable:!0,value:s}),l=()=>{let s=n[t];if(s&&!n.disabled){let u=n[`${t}Data`];if(u!==void 0?s.call(n,u,e):s.call(n,e),e.cancelBubble)return}return n.host&&typeof n.host!="string"&&!n.host._$host&&n.contains(e.target)&&i(n.host),!0},a=()=>{for(;l()&&(n=n._$host||n.parentNode||n.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),q.registry&&!q.done&&(q.done=_$HY.done=!0),e.composedPath){let s=e.composedPath();i(s[0]);for(let u=0;u<s.length-2&&(n=s[u],!!l());u++){if(n._$host){n=n._$host,a();break}if(n.parentNode===o)break}}else a();i(r)}function gt(e,n,t,r,o){let i=Mt(e);if(i){!t&&(t=[...e.childNodes]);let s=[];for(let u=0;u<t.length;u++){let d=t[u];d.nodeType===8&&d.data.slice(0,2)==="!$"?d.remove():s.push(d)}t=s}for(;typeof t=="function";)t=t();if(n===t)return t;let l=typeof n,a=r!==void 0;if(e=a&&t[0]&&t[0].parentNode||e,l==="string"||l==="number"){if(i||l==="number"&&(n=n.toString(),n===t))return t;if(a){let s=t[0];s&&s.nodeType===3?s.data!==n&&(s.data=n):s=document.createTextNode(n),t=Be(e,t,r,s)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n}else if(n==null||l==="boolean"){if(i)return t;t=Be(e,t,r)}else{if(l==="function")return K(()=>{let s=n();for(;typeof s=="function";)s=s();t=gt(e,s,t,r)}),()=>t;if(Array.isArray(n)){let s=[],u=t&&Array.isArray(t);if(Et(s,n,t,o))return K(()=>t=gt(e,s,t,r,!0)),()=>t;if(i){if(!s.length)return t;if(r===void 0)return t=[...e.childNodes];let d=s[0];if(d.parentNode!==e)return t;let c=[d];for(;(d=d.nextSibling)!==r;)c.push(d);return t=c}if(s.length===0){if(t=Be(e,t,r),a)return t}else u?t.length===0?dn(e,s,r):Zn(e,t,s):(t&&Be(e),dn(e,s));t=s}else if(n.nodeType){if(i&&n.parentNode)return t=a?[n]:n;if(Array.isArray(t)){if(a)return t=Be(e,t,r,n);Be(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function Et(e,n,t,r){let o=!1;for(let i=0,l=n.length;i<l;i++){let a=n[i],s=t&&t[e.length],u;if(!(a==null||a===!0||a===!1))if((u=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=Et(e,a,s)||o;else if(u==="function")if(r){for(;typeof a=="function";)a=a();o=Et(e,Array.isArray(a)?a:[a],Array.isArray(s)?s:[s])||o}else e.push(a),o=!0;else{let d=String(a);s&&s.nodeType===3&&s.data===d?e.push(s):e.push(document.createTextNode(d))}}return o}function dn(e,n,t=null){for(let r=0,o=n.length;r<o;r++)e.insertBefore(n[r],t)}function Be(e,n,t,r){if(t===void 0)return e.textContent="";let o=r||document.createTextNode("");if(n.length){let i=!1;for(let l=n.length-1;l>=0;l--){let a=n[l];if(o!==a){let s=a.parentNode===e;!i&&!l?s?e.replaceChild(o,a):e.insertBefore(o,t):s&&a.remove()}else i=!0}}else e.insertBefore(o,t);return[o]}function tr(e,n=!1){return n?document.createElementNS(er,e):document.createElement(e)}function bt(e){let{useShadow:n}=e,t=document.createTextNode(""),r=()=>e.mount||document.body,o=dt(),i,l=!!q.context;return Ie(()=>{l&&(dt().user=l=!1),i||(i=_t(o,()=>R(()=>e.children)));let a=r();if(a instanceof HTMLHeadElement){let[s,u]=Y(!1),d=()=>u(!0);je(c=>y(a,()=>s()?c():i(),null)),Oe(d)}else{let s=tr(e.isSVG?"g":"div",e.isSVG),u=n&&s.attachShadow?s.attachShadow({mode:"open"}):s;Object.defineProperty(s,"_$host",{get(){return t.parentNode},configurable:!0}),y(u,i),a.appendChild(s),e.ref&&e.ref(s),Oe(()=>a.removeChild(s))}},void 0,{render:!l}),t}var Jn,yi,Qe,cn,wi,er,Q=Vt(()=>{Ze();Ze();Jn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],yi=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...Jn]),Qe=e=>R(()=>e());cn="_$DX_DELEGATE";wi=Symbol(),er="http://www.w3.org/2000/svg"});var pn=Pn((Di,mn)=>{Q();Q();Q();Q();Q();Q();Q();Q();Q();Q();Q();Q();Q();Ze();var yt=V("<div>"),nr=V("<div class=loading>LOADING"),rr=V("<div><div>"),ir=V('<button class=common-select-button><span class=common-select-text></span><span class=" common-select-icon "><svg viewBox="0 0 1024 1024"version=1.1 xmlns=http://www.w3.org/2000/svg width=1em height=1em><path d="M908.7 363.7L554 751.6c-10.6 12.1-25.9 19-41.9 19-16.1 0-31.3-6.9-41.9-19L115.4 363.7c-17.3-18.3-22.7-44.9-13.7-68.5 8.9-23.5 30.6-40 55.7-42.2h709.1c25.2 2.1 46.9 18.5 55.8 42.1 9 23.7 3.7 50.2-13.6 68.6z m0 0"fill=currentColor>'),or=V('<dialog class=" common-select-popover ">'),sr=async e=>{let n=document.getElementById("app");(()=>{try{return window.WebAssembly!=null&&window.HTMLCanvasElement!=null&&window.HTMLDialogElement!=null&&typeof HTMLDialogElement.prototype.showModal=="function"&&window.OffscreenCanvas!=null&&navigator.getGamepads!=null}catch{return!1}})()?Lt(e,n):open("/nomaintenace.html","self")},lr=()=>window.navigator.userAgent.toLowerCase().includes("mobile"),ar=e=>n=>{let t,r=clearTimeout,o=setTimeout;return(...i)=>{t=(t&&r(t),o(()=>n(...i),e))}},hn=e=>{let n=!1;return(...t)=>{n=(!n&&e(...t),!0)}},cr=e=>(()=>{var n=yt();return K(t=>{var r=e.class??"markdown",o=e.body;return r!==t.e&&pt(n,t.e=r),o!==t.t&&(n.innerHTML=t.t=o),t},{e:void 0,t:void 0}),n})(),ur=()=>T(bt,{get children(){return nr()}}),dr=e=>{let n=new AudioContext({latencyHint:0}),t=2,r=new Uint8Array(0),o=(l,a,s)=>{if(l)if(a+s>l.length){let u=new Float32Array(2*(a+s));return u.set(l,0),u}else return l;else return new Float32Array(s*6)};return new WritableStream({start(l){this.pooled=r,this.srcnode=this.prepareSourceNode(),this.iswait=!1},source(){let l=this.srcnode;return l||(l=this.prepareSourceNode()),this.srcnode=null,l},write(l,a){let s;if(l.byteLength?(s=new Uint8Array(this.pooled.byteLength+l.byteLength),this.pooled.byteLength>0&&s.set(this.pooled,0),s.set(new Uint8Array(l.buffer,l.byteOffset,l.byteLength),this.pooled.byteLength)):s=this.pooled,this.iswait)this.srcnode||(this.srcnode=this.prepareSourceNode()),this.preprocess(s);else{let u;if(this.cursor)s.byteLength>200&&this.preprocess(s),u=n.createBuffer(t,this.cursor,e),u.copyToChannel(this.left,0,0),u.copyToChannel(this.right,1,0),this.left=this.right=this.cursor=void 0;else{let c=s.byteLength>>3;u=n.createBuffer(t,c,e);let m=u.getChannelData(0),p=u.getChannelData(1),x=new Float32Array(s.buffer,0,c*t);for(let S=0;S<c;++S){let _=S<<1;m[S]=x[_],p[S]=x[_+1]}this.pooled=this.pooled.slice(x.byteLength)}let d=this.source();d.buffer=u,d.start(),this.iswait=!0}},preprocess(l){let a=l.byteLength>>3,s=this.cursor??0,u=o(this.left,s,a),d=o(this.right,s,a),c=new Float32Array(l.buffer,0,a*t);for(let m=0;m<a;++m,++s){let p=m<<1;u[s]=c[p],d[s]=c[p+1]}this.cursor=s,this.left=u,this.right=d,this.pooled=l.slice(c.byteLength)},prepareSourceNode(){let l=n.createBufferSource();return l.onended=()=>{this.iswait=!1,(this.pooled.byteLength>0||this.cursor)&&this.write(r,null)},l.connect(n.destination),l}})},fr=e=>new Promise(n=>{e.click(),e.onchange=()=>{let t=e.files[0];n(t)}}),hr=e=>(()=>{var n=rr(),t=n.firstChild;return K(r=>{var o=e.class,i=`${e.percent.toFixed(3)}%`,l=e.color;return o!==r.e&&pt(n,r.e=o),i!==r.t&&((r.t=i)!=null?t.style.setProperty("width",i):t.style.removeProperty("width")),l!==r.a&&((r.a=l)!=null?t.style.setProperty("background",l):t.style.removeProperty("background")),r},{e:void 0,t:void 0,a:void 0}),n})(),gn=e=>{let n=en(()=>e.selected);return(()=>{var t=yt();return y(t,T(Ce,{get each(){return e.options},children:r=>(()=>{var o=yt();return o.$$click=()=>!r.disabled&&e.handler(r),y(o,()=>r.label),K(i=>{var l={[e.styled[1]]:!0,[e.styled[2]]:n(r.value)},a=r.label,s=r.disabled;return i.e=Tt(o,l,i.e),a!==i.t&&we(o,"title",i.t=a),s!==i.a&&(o.disabled=i.a=s),i},{e:void 0,t:void 0,a:void 0}),o})()})),K(()=>pt(t,e.styled[0])),t})()},gr=e=>{let n=R(()=>e.keyForText??"text"),t=R(()=>e.keyForValue??"value"),r=R(()=>e.placeholder??"---"),o=null,i=null,l=()=>{o?.open&&o.close(),i&&i()},a=c=>{l(),e.onChange&&e.onChange(c)},s=R(()=>{let c=e.options.find(m=>m[t()]===e.value);return c?c[n()]:null}),u=c=>{let m=c.currentTarget;if(o.open)l();else{let p=e.locate?e.locate(m):m.getBoundingClientRect();o.style.top=`${p.bottom+2}px`,o.style.left=`${p.left}px`,o.show(),setTimeout(()=>d(m))}},d=c=>{let m=p=>{!o.contains(p.target)&&!c.contains(p.target)&&l()};i&&i(),i=hn(()=>window.removeEventListener("mousedown",m)),window.addEventListener("mousedown",m)};return[(()=>{var c=ir(),m=c.firstChild;return c.$$click=u,y(m,T(ee,{get when(){return s()},get fallback(){return r()},get children(){return s()}})),K(()=>m.classList.toggle("common-select-empty",s()===null)),c})(),(()=>{var c=or(),m=o;return typeof m=="function"?Ge(m,c):o=c,y(c,T(gn,{styled:["common-select-list","common-select-item","common-select-value"],get selected(){return e.value},handler:a,get options(){return e.options.map(p=>({label:p[n()],value:p[t()]}))}})),c})()]},fn=e=>{let n=e-e%8;n<e&&(n+=8);let t=new ArrayBuffer(n>>2),r=new Uint8Array(t,0,n>>3),o=new Uint8Array(t,n>>3,n>>3),i=(s,u)=>{let d=s>>3;u[d]|=1<<(s&7)},l=(s,u)=>{let d=s>>3;u[d]&=~(1<<(s&7))},a=(s,u)=>{let d=s>>3;return!!(u[d]&1<<(s&7))};return{lock:(s,u)=>{if(s>e)throw new RangeError(`indexing ${s} is out of range ${e}`);if(a(s,o))throw new ReferenceError(`indexing ${s} is deleted before your action`);if(a(s,r)){if(u)return!0;throw new TypeError(`indexing ${s} is locking before your action`)}else i(s,r)},islock:s=>{if(s>e)throw new RangeError(`indexing ${s} is out of range ${e}`);return a(s,r)},unlock:s=>{if(s>e)throw new RangeError(`indexing ${s} is out of range ${e}`);l(s,r)},delete:s=>{if(s>e)throw new RangeError(`indexing ${s} is out of range ${e}`);i(s,o)},exist:s=>{if(s>e)throw new RangeError(`indexing ${s} is out of range ${e}`);return a(s,o)},lookup:()=>{for(let s=0;s<n;++s)if(o[s]!=255&&r[s]!=255)for(let u=0;u<8;++u){let d=1<<u;if(!(o[s]&d)&&!(r[s]&d)){let c=s*8+u;return c<e?c:-1}}return-1}}},mr=e=>{let n=new Array(e).fill(null),t=0,r=0;return{fifo_push:l=>{l!=null&&t+1!=r&&(n[t]=l,t=(t+1)%e)},fifo_pop:()=>{let l=n[r];return l&&(n[r]=null,r=(r+1)%e),l}}},pr=e=>{let n=R(()=>e.duration??5e3),t=R(()=>e.type=="error"?"common-element-toast-error":"common-element-toast-info"),r=R(()=>20+e.order*100);return(()=>{var o=yt();return y(o,()=>e.text),K(i=>{var l={"common-element-toast":!0,[t()]:!0},a=`bottom: ${r()}px; --aniduration: ${n()}ms;`;return i.e=Tt(o,l,i.e),i.t=qe(o,a,i.t),i},{e:void 0,t:void 0}),o})()},tt=null,br=e=>{let r,o,i;if(typeof e=="string"?r=e:typeof e=="object"?(r=String(e.text),o=e.type,i=e.duration):r=String(e),!tt){let l=document.createElement("div");l.id="toast",l.className="common-layout-toast",document.body.appendChild(l);let a=fn(5),{fifo_push:s,fifo_pop:u}=mr(40),d=m=>{s(m),c()},c=()=>{let m=a.lookup();if(m<0)return;let p=u();if(!p)return;a.lock(m);let x=document.createElement("div");tt.container.appendChild(x);let{text:S,Target:_,type:O,duration:$}=p;setTimeout(()=>{a.unlock(m),tt.container.removeChild(x),requestAnimationFrame(c)},$??5e3),Lt(()=>T(_,{order:m,text:S,type:O,duration:$}),x)};tt={container:l,exchanger:fn(5),schedule:d}}tt.schedule({Target:pr,type:o,duration:i,text:r})};mn.exports={main:sr,Loading:ur,Markdown:cr,Progress:hr,debounce:ar,onlyonce:hn,selectFile:fr,Hex:e=>e.toString(16).padStart(8,"0"),Menu:gn,Select:gr,toast:br,DUMMY_HREF:"#!",isMobileDev:lr(),streamToAudio:dr};mt(["click"])});Q();Q();Q();Q();Q();Q();Q();Q();Q();Q();Q();Ze();var se=Dn(pn());var Ut=e=>new Promise((n,t)=>{let r=new DataView(e.buffer),o=4997953,i=c=>!c&&t(new Error("broken"));i(r.byteLength>8),i((r.getUint32(0,!0)&16777215)==o);let l=r.getUint16(4,!0);i(r.byteLength>l*3+(l+1)*2+8);let a=r.getUint16(8+l*(3+2),!0);i(r.byteLength>l*3+(l+1)*2+a*8+8);let s=[],u=(c,m,p)=>(x,S)=>{let _=r.getUint32(m+(S+c)*8,!0),O=r.getUint32(m+(S+c)*8+4,!0),$=p|_&255,E=(_&-256)>>3,U=s.length;return s.push(E),{set_id:O,serial:$,offset:U,holes:[],status:1}},d=new Map;for(let c=0;c<l;++c){let m=8+3*c,p=8+l*3+c*2,x=8+l*5+2,S=r.getUint16(m,!1)<<16|r.getUint8(m+2)<<8,_=r.getUint16(p,!0),$=r.getUint16(p+2,!0)-_,E=new Array($).fill(0).map(u(_,x,S));d.set(S,E),E.reduce((U,I)=>(U.has(I.serial)?U.get(I.serial)?.push(I):U.set(I.serial,[I]),U),d)}n({cheats:d,trunks:s,source:e})}),bn=(e,n,t,r)=>{let o=t[e.offset],i=new DataView(n.buffer),l=i.getUint16(o,!0),a=o+2+12*l,s=new Map,u=new TextDecoder,d=(x,S,_)=>{let O=a+x,$=O+1;for(;n[$]>0;)++$;return u.decode(n.slice(O,$))},c=(x,S,_)=>{let O=_===2?($,E,U)=>i.getUint16($+E*2,!0):($,E,U)=>i.getUint32($+E*4,!0);return new Array(S).fill(x).map(O)};for(let x=0;x<l;++x){let[S,_,O]=c(o+2+x*12,3,4),$;S>65535?$=c(o+_,O,4):O>0?$=c(o+_,O,2).map(d):$=[r.defaultKey],s.set(S,$)}let p=s.get(0).map((x,S,_)=>{let O=s.get(S+1);return{label:x,keys:O.map(($,E,U)=>{let I=s.get(E+1<<16|S+1),w=[];for(let k=0;k<I.length;k+=2){let M=I[k],C=I[k+1]>>8,P=I[k+1]&255;w=w.concat(new Array(C).fill(M).map((b,A,v)=>({addr:b+A,val:P})))}return{label:$,value:w}})}});e.holes=p,e.status=2},ne={Title:1,Label:2,Value:3,Index:4,Paste:5,Throw:6,Spawn:7,BatAN:8,BatIP:9},$e=(e,n)=>({t:e,a:n}),yn=(e,n)=>{let t={label:e.label,keys:window.structuredClone(e.keys)};for(let r of n)switch(r.t){case ne.Title:t.label=r.a;continue;case ne.Label:let[o,i]=r.a;t.keys[o].label=i;continue;case ne.Value:let[l,a,s]=r.a;if(isNaN(s))t.keys[l].value=t.keys[l].value.filter(E=>E.addr!==a);else{let E=t.keys[l].value.find(U=>U.addr===a);E?E.val=s:t.keys[l].value.push({addr:a,val:s})}continue;case ne.Index:let[u,d]=r.a,c=t.keys[u],m=E=>E!==c,p=d>u?d+1:d;t.keys=[...t.keys.slice(0,p).filter(m),c,...t.keys.slice(p).filter(m)];continue;case ne.Paste:let[x,S]=r.a,_=JSON.parse(S);t.keys[x]=_;continue;case ne.Throw:let O=r.a;t.keys.splice(O,1);continue;case ne.Spawn:t.keys.push({label:r.a,value:[]});continue;case ne.BatAN:r.a.forEach(E=>E.trimStart().trimEnd().length>0&&t.keys.push({label:E,value:[]}));case ne.BatIP:if(t.keys.length<256){let E=t.keys[0];if(E.value.length==1)for(let U=1;U<t.keys.length;++U)t.keys[U].value=[{addr:E.value[0].addr,val:(E.value[0].val+U)%256}]}else{let E=t.keys[0];if(E.value.length==2)for(let U=1;U<t.keys.length;++U)t.keys[U].value=[{addr:E.value[0].addr,val:(E.value[0].val+U)%256},{addr:E.value[1].addr,val:Math.floor((E.value[0].val+U)/256)}]}default:break}return t};var yr=e=>{let n=(w,k,M)=>{let C=k.length,P=M-C;for(let b=0;b<P;++b){if(w[b+C]!=0)continue;let A=!0,v=0,g=b+v;for(;v<C;++v,++g)if(w[g]!=k[v]){A=!1;break}if(A)return b}return-1},t=(w,k,M)=>{let P=w.map(({addr:b,val:A})=>[b,A]).sort((b,A)=>b[0]-A[0]).reduce((b,[A,v])=>{if(k.set(A,M),b.length==0)b.push({addr:A,value:v,count:1});else{let g=b.at(-1);g.value==v&&g.addr+g.count==A?++g.count:b.push({addr:A,value:v,count:1})}return b},[]);return Uint32Array.from(P.reduce((b,A)=>[...b,A.addr,A.count<<8|A.value],[]))},r=(w,k,M,C)=>{let P=(D,F)=>F*Math.floor((D+F-1)/F),b=w[0].buffer.byteLength,A=2+w.length*b,v=A+k.buffer.byteLength,g=v+M.buffer.byteLength,W=g+C.buffer.byteLength,B=new ArrayBuffer(P(W,32)),te=new DataView(B);return te.setUint16(0,w.length,!0),w.forEach((D,F)=>{let j=2+F*b;te.setUint32(j,D[0],!0),te.setUint32(j+4,D[1]+(D[0]>65535?g:v),!0),te.setUint32(j+8,D[2],!0)}),new Uint8Array(B,A,k.length).set(k,0),new Uint8Array(B,v,M.buffer.byteLength).set(new Uint8Array(M.buffer),0),new Uint8Array(B,g,C.buffer.byteLength).set(new Uint8Array(C.buffer),0),new Uint8Array(B)},o=new TextEncoder,i=e.holes,l=[],a=[],s=[],u=(w,k)=>w|k<<16,d=(w,k)=>({id:w,data:k}),c=(w,k,M,C)=>{k.forEach(({label:P,value:b},A)=>{M.push(P),C&&s.push(P),l.push(d(u(w,A+1),b))})};i.forEach((w,k)=>{a.push(w.label),s.push(w.label);let M=[];c(k+1,w.keys,M,w.keys.length>1);let C=d(u(k+1,0),M);l.push(C)}),l.push(d(u(0,0),a)),l.sort((w,k)=>w.id-k.id),s.sort((w,k)=>k.length-w.length);let m=new Uint8Array(1024),p=new Uint16Array(128),x=new Uint32Array(4096),S={},_={str:0,cmd:0,idx:0},O=w=>{let k=C=>{let P=_.str,b=P+C.length+1;if(b>m.length){let A=new Uint8Array(Math.min(m.length*2,P+C.length+1024));A.set(m,0),A.set(C,P),m=A}else m.set(C,P);return _.str=b,P},M=C=>{if(S[C]!=null)return S[C];let P=o.encode(C),b=n(m,P,_.str);return b=b<0?k(P):b,S[C]=b,b};return w.map(M)},$=w=>{if(w.length==0)return 0;if(_.str>65535)throw new RangeError("string table is too big.");let k=_.idx,M=k+w.length;if(M>p.length){let C=new Uint16Array(Math.max(M+128,p.length*2));C.set(p,0),C.set(w,k),p=C}else p.set(w,k);return _.idx=M,k*2},E=w=>{let k=_.cmd,M=k+w.length;if(M>x.length){let C=new Uint32Array(Math.max(x.length*8,M));C.set(x,0),C.set(w,k),x=C}else x.set(w,k);return _.cmd=M,k*4};l.length>65535&&console.warn(`entry \u6570\u91CF\u8D85\u8FC7\u4E0A\u9650[game=${e.serial}]`);let U=new Map;O(s);let I=l.map(w=>{let{id:k,data:M}=w;if(k<65536){let C=k==0?O(M):O(M.length>1?M:[]),P=$(C);return Uint32Array.of(k,P,C.length)}else{let C=t(M,U,k&65535),P=E(C);return Uint32Array.of(k,P,C.length)}});return x=x.slice(0,_.cmd),m=m.slice(0,_.str),p=p.slice(0,_.idx),e.set_id=x.reduce((w,k)=>w^k,e.serial),e.offset=r(I,m,p,x),e.offset.byteLength},wn=e=>{let n=e.cheats,t=v=>String.fromCharCode(v>>24&255,v>>16&255,v>>8&255,v&255),r=v=>{let g=v.offset,W=e.trunks[g],B=e.trunks[g+1];return e.source.slice(W,B)},o=v=>v.status===3||v.status===0?!1:v.status===4?v.holes.length>0:!0,i=Array.from(n.keys()).filter(v=>(v&255)!=0).map(v=>{let W=n.get(v)?.filter(o).map(B=>{let te,xe;return B.status===4?(yr(B),xe=B.set_id,te=B.offset):(B.status===1||B.status===2)&&(xe=B.set_id,te=r(B)),{id:xe,bin:te}})??[];return{serial:t(v),cheat:W}});i.sort((v,g)=>v.serial.localeCompare(g.serial)),console.info(`valid rom has ${i.length}`);let l=new TextEncoder,a=new WeakMap,s=10240,u=(v,g)=>g*Math.floor((v+g-1)/g),d=(v,g)=>{let W=a.get(v),B=(W||0)+g.length;if(B>v.length){let te=new(Object.getPrototypeOf(v)).constructor(u(B,s)*2);return te.set(v,0),te.set(g,W),a.set(te,B),te}else return v.set(g,W),a.set(v,B),v},c=v=>v.reduce((g,{serial:W,cheat:B},te,xe)=>{let le=W.slice(0,-1),ve=a.get(g[1]);return le!=g[4]&&(ve>0&&g[2]-g[1].at(ve-1)>g[3]&&(g[3]=g[2]-g[1].at(ve-1)),g[0]=d(g[0],l.encode(le)),g[1]=d(g[1],[g[2]]),g[4]=le),g[2]=g[2]+B.length,te+1==xe.length&&(g[2]-g[1].at(ve-1)>g[3]&&(g[3]=g[2]-g[1].at(ve-1)),g[1]=d(g[1],[g[2]])),g},[d(new Uint8Array(s),[]),d(new Uint16Array(s),[]),0,0,""]),m=(v,g)=>v.reduce((W,{cheat:B,serial:te})=>{let xe=te.charCodeAt(3);return B.reduce((le,{id:ve,bin:D})=>{let F=le[2]+a.get(le[1]);return le[0]=d(le[0],[xe|F<<3,ve]),le[1]=d(le[1],D),le},W)},[d(new Uint32Array(s),[]),d(new Uint8Array(s),[]),u(g,32)]),p=(v,...g)=>{for(let W of g){let B=v[W];v[W]=B.slice(0,a.get(B))}return v},[x,S,_,O]=p(c(i),0,1),[$,E]=p(m(i,8+x.length+S.length*2+_*8),0,1);console.info(`name: ${x.length} cheats: ${_} maxl: ${O}`);let U=8,I=U+x.length,w=I+S.length*2,k=u(w+$.length*4,32),M=k+E.length,C=new ArrayBuffer(M),P=new DataView(C);P.setUint8(0,"A".charCodeAt(0)),P.setUint8(1,"C".charCodeAt(0)),P.setUint8(2,"L".charCodeAt(0)),P.setUint8(3,1);let b=x.length/3;P.setUint16(4,b,!0),P.setUint16(6,O,!0);let A=new Uint8Array(C);return A.set(x,U),A.set(new Uint8Array(S.buffer),I),A.set(new Uint8Array($.buffer),w),A.set(E,k),A},vn=(e,n,t)=>{let r=e.cheats.get(n),o=t.filter(a=>a.status===0);r!==void 0?o.forEach(a=>r?.push(a)):e.cheats.set(n,t);let i=n&4294967040,l=e.cheats.get(i);if(l!==void 0){o.forEach(s=>l?.push(s));let a=l.reduce((s,u,d)=>(s.set(u,d),s),new WeakMap);l?.sort((s,u)=>s.serial!==u.serial?s.serial-u.serial:a.get(s)-a.get(u))}else e.cheats.set(i,t.slice());return e};function xn(e,n){let t=n.toLowerCase(),r=n.toUpperCase();return Object.entries(e).filter(o=>{let[i,l]=o;return i.startsWith(r)?!0:l.file.toLowerCase().includes(t)})}var wr=V('<div class=" caches ">'),vr=V('<div class=" sources "><div class=prompt></div><div class=splitter></div><div class=option><input type=file></div><div class=option>'),xr=V('<div class=" fullname "><h3>'),kr=V('<div class=" newtag ">'),$r=V('<div class=" tags ">'),Nt=V('<div class=" acti ">'),Cr=V('<div class=" acts "><div class=" acti "></div><div class=" acti "></div><div class=" acti ">'),Sr=V('<div class=" cheats "><div><div class=" func "><div class="hole empty"></div><div class=" keys "><div class=" new ">'),Ar=V('<div class=" editor "><div class=" gamelist "><button class=" merge "></button><div class=" gamestitle "><span></span><input type=search></div></div><div class=" cheatlist ">'),_r=V('<span class=" notag ">'),Er=V("<div class=chtag>-"),Lr=V('<div class=" func "><div class=" hole "><span class=" cnt "></span><button class=expand></button></div><div class=" keys ">'),Tr=V('<div class=" key ">'),Mr=V('<div class=" published "><div class=" vscroll ">'),Ur=V('<div class=" cnt ">'),Nr=V('<div class=cart><div class=" image "><div class=" code "></div></div><div class=" info "><p class=" name ">'),Ir=V("<a>"),Or=V("<span><input type=text maxlength=8><em>"),It=V("<button type=button>"),Pr=V('<div class=" edit-hole "><div class=" htitle "><input type=search></div><div class=" hcontent "><div class=" keylist "><div class=" keyintro "></div><div class=" keytext "><a></a></div></div><div class=" details "><div class=" detailname "><input type=search></div><div class=" detailopts "><button></button><button></button><button></button></div><div class=" instset "><div class=" findaddr "><h4></h4></div><div class=" instdat "><table><thead><tr><th></th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>a</th><th>b</th><th>c</th><th>d</th><th>e</th><th>f</th></tr></thead><tbody></tbody></table></div></div></div></div><div class=" hoption "><div class=" left "><button type=button></button></div><div class=" right "><button type=button></button><button type=submit></button></div></div><div class=" searchtips "style=display:none><pre>'),Fr=V('<em class=" hdrag ">'),Dr=V("<div class=keytext><span>"),Hr=V('<em class=" hdrop ">'),jr=V("<tr><td>"),Rr=V("<tr><td>\u2026\u2026"),Vr=V("<td colspan=16>"),Br=V("<td><input type=text maxlength=2>"),qr=V("<div class=error>"),ze={caching:0,pending:1,editing:2},Gr=16*1024*1024,Ot=e=>e.split("").reduce((n,t,r)=>r<4?n|t.charCodeAt()<<24-r*8:n,0),zr=e=>{let n=String.fromCharCode(e&255),t="\u5176\u4ED6\u8BED\u79CD";switch(n){case"C":t="\u5B98\u65B9\u4E2D\u6587";break;case"J":t="\u65E5\u6587\u7248";break;case"E":t="\u82F1\u6587\u7248";break;case"F":t="\u6CD5\u8BED\u7248";break;case"S":t="\u897F\u73ED\u7259\u8BED";break;case"I":t="\u610F\u5927\u5229\u8BED";break;case"D":t="\u5FB7\u8BED\u7248";break;case"K":t="\u97E9\u6587\u7248";break;case"X":case"P":t="\u6B27\u6D32\u8BED\u79CD";break;default:t=t}return t},Yr=()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js",{scope:"/acl-editor/"})},Kr=(e,n)=>(e??"").replace(new RegExp("`([a-zA-Z][a-zA-Z0-9]*)`","g"),(t,r)=>n[r]??""),Wr="clipboard-key",nt=e=>{if(nt[e])return nt[e];let n=sessionStorage.getItem(e),[t,r]=Y(n);return Ie(()=>{let o=t();o?sessionStorage.setItem(e,o):sessionStorage.removeItem(e)}),nt[e]=[t,r],nt[e]},Xr=e=>{let[n,t]=Y(0),r=()=>{localStorage.setItem("ready","1"),location.reload()};return At(function o(){setTimeout(()=>{let i=n();i+1>100?r():(t(i+1),o())},125)}),(()=>{var o=wr();return y(o,T(se.Progress,{class:"prog",color:"#ffc823",get percent(){return n()}})),o})()},Jr=e=>{let{ready:n,config:t}=e,r=R(()=>t().loader),[o,i]=Y(-1),l;return(()=>{var a=vr(),s=a.firstChild,u=s.nextSibling,d=u.nextSibling,c=d.firstChild,m=d.nextSibling;y(s,()=>r().title),y(u,T(ee,{get when(){return o()>0},get children(){return T(se.Progress,{class:" bar ",color:"#FFC823",get percent(){return o()}})}})),d.$$click=()=>ni(l,i).then(n,()=>(0,se.toast)({text:r().invalid,type:"error"})),y(d,()=>r().local,c);var p=l;return typeof p=="function"?Ge(p,c):l=c,c.style.setProperty("display","none"),et(m,"click",(0,se.onlyonce)(()=>ri(r().stdfile,i).then(n)),!0),y(m,()=>r().remote),a})()},Zr=e=>{let{origin:n,config:t}=e,[r,o]=Y({}),[i,l]=Y(""),[a,s]=Y(0),[u,d]=Y([],{equals:!1}),[c,m]=Y(-1),[p,x]=Y(!1),[S,_]=Y([],{equals:!1}),[O,$]=Y(""),[E,U]=Y(""),I=R(()=>t().editor),w=R(()=>E()==""?Object.entries(r()):xn(r(),E())),k=R(()=>S().filter(D=>D.status!==3).map(({serial:D,status:F})=>F<<8|D&255));Ie(()=>{let D=n(),F=D.cheats.get(Ot(i()))??[];_(F);let j=F[a()];if(j)j.status===1&&bn(j,D.source,D.trunks,I()),d(j.holes);else{let X={offset:0,holes:[],status:0,serial:Ot(i())};F[a()]=X,d(X.holes)}});let M=D=>{l(D),s(0),m(-1),x(!1)},C=!1,P=0,b=(0,se.debounce)(50)(()=>{C||(P=c(),m(-1)),window.removeEventListener("mouseup",b)});At(async()=>{let F=await(await fetch("/r/gbadb.json")).json();o(F)}),Oe(()=>{window.removeEventListener("mouseup",b)});let A="",v=null,g=(D,F)=>{if(F==c()){m(-1);return}let j=D.currentTarget,X=v.getBoundingClientRect();A=`right: 0.2rem; top: ${j.getBoundingClientRect().bottom+4-X.top+v.scrollTop}px;`,m(F),C=!0,setTimeout(()=>{C=!1,window.addEventListener("mouseup",b)},50)},W=D=>F=>{D<0?d(X=>(X.push(F),X)):d(X=>(X[D]=F,X)),x(!1);let j=S()[a()];j.status==2?j.status=4:j.status==0&&(j.status=4,e.refresh(vn(n(),j.serial,S())))},B=()=>{let D=c();u()[D]===p()&&x(!1),D>=0&&(d(F=>(F.splice(D,1),F)),_(F=>(F[a()].status=4,F)))},te=D=>()=>{let F=c(),j=F+D;(p()[F]===p()||p()[j]===p())&&x(!1),d(X=>{let Se=X[j];return X[j]=X[F],X[F]=Se,X}),_(X=>(X[a()].status=4,X))},xe=()=>{let D=u()[c()];$(JSON.stringify(D))},le=()=>{_(j=>(j[a()].status=4,j)),x(!1);let D=c(),F=JSON.parse(O());d(j=>(j.splice(D,0,F),j)),$("")},ve=()=>{let D=Date.now(),F=wn(n());console.log("spend time",Date.now()-D);let j=new Blob([F.buffer],{type:"application/octet-stream"}),X=document.createElement("a"),Se=URL.createObjectURL(j);X.href=Se,X.download="gba.acl",X.click(),setTimeout(()=>URL.revokeObjectURL(Se),1e4)};return(()=>{var D=Ar(),F=D.firstChild,j=F.firstChild,X=j.nextSibling,Se=X.firstChild,rt=Se.nextSibling,wt=F.nextSibling;return j.$$click=ve,y(j,()=>I().savefile),y(Se,()=>I().gamelist),rt.$$input=ke=>U(ke.target.value),y(F,T(ee,{get when(){return Object.keys(r()).length>0},get fallback(){return T(se.Loading,{})},get children(){return T(Qr,{origin:n,config:I,games:w,val:i,udt:M,get fullsize(){return Object.keys(r()).length}})}}),null),y(wt,T(ee,{get when(){return r()[i()]},get children(){return[(()=>{var ke=xr(),oe=ke.firstChild;return y(oe,()=>r()[i()].file),ke})(),(()=>{var ke=$r();return y(ke,T(ee,{get when(){return Qe(()=>k().length>0)()&&!(k().length===1&&k().at(0)>>8===0)},get fallback(){return(()=>{var oe=_r();return y(oe,()=>I().emptycheat),oe})()},get children(){return[T(Ce,{get each(){return k()},children:(oe,f)=>(()=>{var L=Er(),z=L.firstChild;return L.$$click=()=>(s(f()),x(!1)),y(L,()=>String.fromCharCode(f()+"A".charCodeAt()),z),y(L,()=>zr(oe),null),K(Z=>{var de=a()===f(),ae=oe>>8===4;return de!==Z.e&&L.classList.toggle("curtag",Z.e=de),ae!==Z.t&&L.classList.toggle("edited",Z.t=ae),Z},{e:void 0,t:void 0}),L})()}),(()=>{var oe=kr();return oe.$$click=()=>(s(S().length),x(!1)),y(oe,()=>I().baktips),oe})()]}})),ke})(),(()=>{var ke=Sr(),oe=ke.firstChild,f=oe.firstChild,L=f.firstChild,z=L.nextSibling,Z=z.firstChild,de=v;return typeof de=="function"?Ge(de,oe):v=oe,y(oe,T(Ce,{get each(){return u()},children:(ae,Ae)=>(()=>{var Ee=Lr(),Te=Ee.firstChild,ie=Te.firstChild,Me=ie.nextSibling,it=Te.nextSibling;return y(Te,()=>ae.label,ie),y(ie,(()=>{var fe=Qe(()=>ae.keys.length>1);return()=>fe()?Kr(I().keytips,ae.keys):""})()),Me.$$click=fe=>g(fe,Ae()),y(it,T(Ce,{get each(){return ae.keys},children:fe=>(()=>{var _e=Tr();return y(_e,()=>fe.label),_e})()})),K(fe=>{var _e=c()==Ae(),Pe=I().expand;return _e!==fe.e&&Me.classList.toggle("using",fe.e=_e),Pe!==fe.t&&(Me.innerHTML=fe.t=Pe),fe},{e:void 0,t:void 0}),Ee})()}),f),Z.$$click=()=>(P=-1,x({label:"",new:1,keys:[{label:I().defaultKey,value:[]}]})),y(Z,()=>I().newtips),y(oe,T(ee,{get when(){return c()>=0},get children(){var ae=Cr(),Ae=ae.firstChild,Ee=Ae.nextSibling,Te=Ee.nextSibling;return Ae.$$click=()=>x(u()[c()]),y(Ae,()=>I().editips),Ee.$$click=B,y(Ee,()=>I().deltips),Te.$$click=xe,y(Te,()=>I().cpytips),y(ae,T(ee,{get when(){return O().length>0},get children(){var ie=Nt();return ie.$$click=le,y(ie,()=>I().pastips),ie}}),null),y(ae,T(ee,{get when(){return c()>0},get children(){var ie=Nt();return et(ie,"click",te(-1),!0),y(ie,()=>I().mvutips),ie}}),null),y(ae,T(ee,{get when(){return c()+1<u().length},get children(){var ie=Nt();return et(ie,"click",te(1),!0),y(ie,()=>I().mvdtips),ie}}),null),K(ie=>qe(ae,c()<0?"":A,ie)),ae}}),null),ke})()]}})),y(D,T(ee,{get when(){return p()},get children(){return T(ti,{hole:p,config:I,exit:()=>x(!1),get apply(){return W(P)}})}}),null),K(()=>we(rt,"placeholder",I().findgame)),D})()},Qr=e=>{let{origin:n,config:t,games:r,fullsize:o}=e,{val:i,udt:l}=e,a=0,s=null,u={},d=[i,l],c=null,m=0,[p,x]=Y(0),S=750,_=90,O=Math.ceil(window.innerHeight/_+10)*3,$=R(()=>r().slice(p(),O+p())),E=R(()=>`padding-top: ${_*p()}px; padding-bottom: ${_*(r().length-O-p())}px`),U=()=>{console.log("time to load screen shot",a,r().length),s=null};Ie(()=>{r().length>0&&!s&&(s=setTimeout(U,S))}),Ie(()=>{let w=r().length,k=i();if(c){let M=0;if(w===o){let C=r().findIndex(([A])=>A===k),P=getComputedStyle(c),b=parseFloat(P.height);C>Math.floor(b/_)&&(M=C*_-Math.floor(b/2)+_/2),M>c.scrollHeight-b&&(M=c.scrollHeight-b)}m!=w&&(m=w,x(0),c.scrollTo({top:M,behavior:"instant"}))}});let I=w=>{s&&clearTimeout(s),s=setTimeout(U,S);let k=w.scrollTop,{height:M}=w.getBoundingClientRect(),C=Math.floor(k/_),P=Math.floor((k+M)/_)+1,b=p(),A=b+O,v=O/3,g=b;(P>A-v-1||C<b+v)&&(g=(Math.floor(C/v)-1)*v,g<0?g=0:g+O>=r().length&&(g=r().length-O)),g!=b&&x(g),a=k};return(()=>{var w=Mr(),k=w.firstChild,M=c;return typeof M=="function"?Ge(M,w):c=w,w.addEventListener("scroll",C=>r().length>O&&I(C.currentTarget)),y(k,T(ee,{get when(){return $().length>0},get children(){return T(Ce,{get each(){return $()},children:C=>T(ei,{model:C,menu:d,origin:n})})}})),K(C=>qe(k,E(),C)),w})()},ei=e=>{let[n,t]=e.menu,r=R(()=>Ot(e.model[0])),o=i=>{if(i==0)return{"background-image":"url(/r/loadimg.svg)","background-size":"120px 80px"};let l=(i&255)-1,a=l%10,s=Math.floor(l/10);return{"background-image":`url(/r/agb.${i>>8}.webp)`,"background-position-x":`-${120*a}px`,"background-position-y":`-${80*s}px`}};return(()=>{var i=Nr(),l=i.firstChild,a=l.firstChild,s=l.nextSibling,u=s.firstChild;return i.$$click=t,i.$$clickData=e.model[0],y(a,()=>e.model[0]),y(l,T(ee,{get when(){return e.origin().cheats.has(r())},get children(){var d=Ur();return y(d,()=>e.origin().cheats.get(r()).length),d}}),null),y(u,()=>e.model[1].file),K(d=>{var c=e.model[0]==n(),m=o(e.model[1].g);return c!==d.e&&i.classList.toggle("using",d.e=c),d.t=qe(l,m,d.t),d},{e:void 0,t:void 0}),i})()},ti=e=>{let n=e.hole,t=e.config,r,o=(f,L)=>(f[L.addr]=L.val,f),i=f=>f-f%16,l=f=>{let L=new Set;for(let z of f)L.add(i(z.addr));return Array.from(L).sort()},a=(f,L)=>new Array((L-f)/16).fill(f).map((z,Z)=>z+Z*16),[s,u]=Y(0),[d,c]=Y(-1),[m,p]=Y(""),[x,S]=Y([],{equals:!1}),[_,O]=nt(Wr),$=R(()=>yn(n(),x())),E=R(()=>$().keys?.length===0?{}:$().keys[s()]),U=R(()=>{let f=parseInt(m(),16);return isNaN(f)?E().value?l(E().value):[]:f<33554432?[i(f)]:f<=33816575?a(i(f),Math.min(i(f)+16*5,i(33816575))):f<50331648?[i(f)]:f<=50364415?a(i(f),Math.min(i(f)+16*5,i(50364415))):[i(f)]}),I=R(()=>E().value?E().value.reduce(o,{}):{}),w=R(()=>($().keys??[]).every(f=>f.value?.length>0)&&$().label.length>0),k=f=>33554432<=f&&f<33816575||50331648<=f&&f<50364415,M=f=>f.target.value=f.target.value.replace(/[^0-9a-fA-F]/g,""),C=f=>{r=M(f)},P=f=>f.length<4096&&f[0].value.length<2?f[0].value.length==1?f.length<256:f[0].value.length==2?Math.abs(f[0].value[0].addr-f[0].value[1].addr)===1:!1:!1,b=f=>{S(L=>(L.push($e(ne.Title,f.target.value)),L))},A=f=>{S(L=>(L.push($e(ne.Label,[s(),f.target.value])),L))},v=()=>{let f=s();f>=$().keys.length-1&&u($().keys.length-2),S(L=>(L.push($e(ne.Throw,f)),L))},g=(f,L)=>{let z=parseInt(L.target.value,16);S(Z=>(Z.push($e(ne.Value,[s(),f,z])),Z))},W=()=>{let f=_();Ve(()=>{O(""),S(L=>(L.push($e(ne.Paste,[s(),f])),L))})},B=()=>{let f=JSON.stringify($().keys[s()]);O(f)},te=()=>{let f=$().keys.length;Ve(()=>{S(L=>(L.push($e(ne.Spawn,`\u79D8\u6280${f+1}`)),L)),u(f)})},xe=()=>{let f=$().keys.length;Ve(()=>{S(L=>(L.push($e(ne.Spawn,`\u79D8\u6280${$().keys.length+1}`)),L.push($e(ne.Paste,[$().keys.length,_()])),L)),O(""),u(f)})},le=f=>f.key==="Enter"&&F(),ve=f=>{let L=document.body.querySelector(".searchtips");L.style.display="none",f.target.removeEventListener("blur",ve),f.target.removeEventListener("input",C),f.target.removeEventListener("keydown",le)},D=f=>{let L=document.body.querySelector(".searchtips");L.style.display="block",f.target.addEventListener("blur",ve),f.target.addEventListener("input",C),f.target.addEventListener("keydown",le)},F=()=>{p(r)},j=f=>{f.currentTarget.removeEventListener("dragend",j),c(-1)},X=(f,L)=>{let z=L.currentTarget,Z=z.parentElement,de=Z.getBoundingClientRect();L.dataTransfer.setDragImage(Z,L.pageX-de.left,L.pageY-de.top),z.addEventListener("dragend",j),c(f)},Se=f=>{f.preventDefault(),f.dataTransfer.dropEffect="move"},rt=(f,L)=>{L.preventDefault();let z=s(),Z=d();Ve(()=>{S(de=>(de.push($e(ne.Index,[Z,f])),de)),Math.min(Z,f)<=z&&z<=Math.max(Z,f)&&(Z===z?u(f):Z<f?u(z-1):u(z+1))})},wt=async()=>{let f=await navigator.clipboard.readText();if(f?.length>0){let L=f.split(`
`).map(z=>z.replace(/\\s/g,""));S(z=>(z.push($e(ne.BatAN,L)),z))}},ke=async()=>{S(f=>(f.push($e(ne.BatIP,null)),f))},oe=async()=>{let f=s(),L=x().at(-1);Ve(()=>{L?.t===ne.Spawn&&1+f===$().keys.length&&u(0),S(z=>(z.pop(),z))})};return T(bt,{get children(){var f=Pr(),L=f.firstChild,z=L.firstChild,Z=L.nextSibling,de=Z.firstChild,ae=de.firstChild,Ae=ae.nextSibling,Ee=Ae.firstChild,Te=de.nextSibling,ie=Te.firstChild,Me=ie.firstChild,it=ie.nextSibling,fe=it.firstChild,_e=fe.nextSibling,Pe=_e.nextSibling,$n=it.nextSibling,vt=$n.firstChild,Cn=vt.firstChild,Pt=vt.nextSibling,Sn=Pt.firstChild,Ft=Sn.firstChild,An=Ft.firstChild,_n=An.firstChild,En=Ft.nextSibling,Dt=Z.nextSibling,xt=Dt.firstChild,kt=xt.firstChild,Ht=xt.nextSibling,ot=Ht.firstChild,Ye=ot.nextSibling,Ln=Dt.nextSibling,Tn=Ln.firstChild;return z.addEventListener("blur",b),y(ae,()=>t().keyname),y(de,T(Ce,{get each(){return $().keys??[]},children:(N,be)=>(()=>{var he=Dr(),ge=he.firstChild;return ge.$$click=u,ge.$$clickData=be(),y(ge,()=>N.label),y(he,T(ee,{get when(){return d()<0||d()===be()},get fallback(){return(()=>{var J=Hr();return J.addEventListener("drop",me=>rt(be(),me)),J.addEventListener("dragover",Se),K(()=>J.innerHTML=t().dest),J})()},get children(){var J=Fr();return J.addEventListener("dragstart",me=>X(be(),me)),we(J,"draggable",!0),K(()=>J.innerHTML=t().drag),J}}),null),K(J=>{var me=be()===s(),Ue=N.value?.length===0,Le=N.value?.length==0?t().unusabletip:"";return me!==J.e&&he.classList.toggle("selected",J.e=me),Ue!==J.t&&he.classList.toggle("unusable",J.t=Ue),Le!==J.a&&we(ge,"title",J.a=Le),J},{e:void 0,t:void 0,a:void 0}),he})()}),Ae),Ee.$$click=te,y(Ee,()=>t().addkey),y(Ae,T(ee,{get when(){return _()},get children(){return["\xA0\xA0",(()=>{var N=Ir();return N.$$click=xe,y(N,()=>t().pastekey),N})()]}}),null),Me.addEventListener("blur",A),fe.$$click=B,y(fe,()=>t().optcopy),_e.$$click=W,y(_e,()=>t().optpaste),Pe.$$click=v,y(Pe,()=>t().optdelete),y(Cn,()=>t().instips),y(vt,T(ee,{get when(){return m().length==0},get fallback(){return(()=>{var N=It();return N.$$click=()=>(r="",p("")),y(N,()=>t().goback),N})()},get children(){var N=Or(),be=N.firstChild,he=be.nextSibling;return be.addEventListener("focus",D),he.$$click=F,K(ge=>{var J=t().findaddr,me=t().search;return J!==ge.e&&we(be,"placeholder",ge.e=J),me!==ge.t&&(he.innerHTML=ge.t=me),ge},{e:void 0,t:void 0}),N}}),null),y(_n,()=>t().coladdr),y(En,T(Ce,{get each(){return U()},children:(N,be)=>[(()=>{var he=jr(),ge=he.firstChild;return y(ge,()=>N.toString(16).padStart(8,"0")),y(he,T(ee,{get when(){return k(N)},get fallback(){return(()=>{var J=Vr();return y(J,()=>t().badaddr),J})()},get children(){return T(Ce,{get each(){return new Array(16).fill(0)},children:(J,me)=>(()=>{var Ue=Br(),Le=Ue.firstChild;return Le.addEventListener("blur",st=>g(me()+N,st)),Le.$$input=M,K(()=>Le.value=I()[me()+N]?.toString(16).padStart(2,"0")??""),Ue})()})}}),null),he})(),T(ee,{get when(){return U()[be()+1]>N+16},get children(){return Rr()}})]})),y(Pt,T(ee,{get when(){return Qe(()=>E().value.length===0)()&&U().length===0},get children(){return T(se.Markdown,{get body(){return t().editvaltip},class:" emptytip "})}}),null),kt.$$click=wt,y(kt,()=>t().batchload),y(xt,T(ee,{get when(){return Qe(()=>!!$().keys)()?P($().keys):!1},get children(){var N=It();return N.$$click=ke,y(N,()=>t().batchcalc),K(()=>we(N,"title",t().batchcalctip)),N}}),null),y(Ht,T(ee,{get when(){return x().length>0},get children(){var N=It();return N.$$click=oe,y(N,()=>t().optundo),N}}),ot),et(ot,"click",e.exit,!0),y(ot,()=>t().endEdit),Ye.$$click=e.apply,Ye.$$clickData=$(),y(Ye,()=>t().useEdit),y(Tn,()=>t().searchtip),K(N=>{var be=t().holename,he=$().keys.length===1,ge=$().keys.length===1?t().nametip:"",J=!_(),me=$().keys.length===1,Ue=$().keys.length===1?t().actiontip:"",Le=t().batchloadtip,st=!w(),jt=w()?"":t().nosavetip;return be!==N.e&&we(z,"placeholder",N.e=be),he!==N.t&&(Me.disabled=N.t=he),ge!==N.a&&we(Me,"title",N.a=ge),J!==N.o&&(_e.disabled=N.o=J),me!==N.i&&(Pe.disabled=N.i=me),Ue!==N.n&&we(Pe,"title",N.n=Ue),Le!==N.s&&we(kt,"title",N.s=Le),st!==N.h&&(Ye.disabled=N.h=st),jt!==N.r&&we(Ye,"title",N.r=jt),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),K(()=>z.value=$().label??""),K(()=>Me.value=E().label),f}})},ni=async(e,n)=>{let t=await(0,se.selectFile)(e),r=t.stream().getReader(),o=await kn(r,n,t.size);return Ut(o)},ri=async(e,n)=>{let t=await fetch(e),r=t.body.pipeThrough(new DecompressionStream("gzip")).getReader(),o=await kn(r,n,t.headers.get("x-size"));return Ut(o)},kn=(e,n,t)=>{t=Number(t);let r=t==0?Gr:t,o=new Uint8Array(r),i=0,l=({done:a,value:s})=>a?(o=o.slice(0,i),n(100),Promise.resolve()):(o.set(s,i),i+=s.byteLength,n(100*(1-Math.pow(i/r-1,4))),e.read().then(l));return e.read().then(l).then(()=>o)},ii=()=>{let[e]=Qt(()=>fetch("/r/acl-editor.json").then(l=>l.json())),n=localStorage.getItem("ready"),[t,r]=Y(n!=null?ze.pending:ze.caching),[o,i]=Y({},{equals:!1});return T(ht,{get fallback(){return T(se.Loading,{})},get children(){return[T(De,{get when(){return e.state=="errored"},get children(){var l=qr();return y(l,()=>e.error.message),l}}),T(De,{get when(){return e.state=="ready"},get children(){return T(ht,{fallback:"nothing",get children(){return[T(De,{get when(){return t()==ze.caching},get children(){return T(Xr,{config:e})}}),T(De,{get when(){return t()==ze.pending},get children(){return T(Jr,{config:e,ready:l=>(i(l),r(ze.editing))})}}),T(De,{get when(){return t()==ze.editing},get children(){return T(Zr,{config:e,origin:o,refresh:i})}})]}})}})]}})};(0,se.main)(ii);Yr();mt(["click","input"]);})();
